// ==UserScript==
// @name         MCBBS Loader
// @namespace    https://mcbbs-loader.xuogroup.top
// @version      1.2.0
// @description  Load custom modules into MCBBS!
// @author       mcbbs-loader
// @match        https://www.mcbbs.net/*
// @run-at       document-start
// @updateURL    https://cdn.jsdelivr.net/gh/MCBBS-Loader/MCBBS-Loader-Core@main/dist/nightly.bundle.prod.user.js
// @grant        unsafeWindow
// @grant        GM_addStyle
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_log
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_download
// @grant        GM_notification
// @grant        GM_setClipboard
// @grant        GM_xmlhttpRequest
// @connect      gitee.com
// @connect      github.com
// @connect      cdn.jsdelivr.net
// @connect      mcbbs.net
// @connect      *
// ==/UserScript==

/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/api/NTEVT.js":
/*!**************************!*\
  !*** ./src/api/NTEVT.js ***!
  \**************************/
/*! namespace exports */
/*! export loadNTEVT [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadNTEVT\": () => /* binding */ loadNTEVT\n/* harmony export */ });\n\nfunction loadNTEVT() {\n  (async () => {\n    const removeHandler = (r) => {\n      switch (r.target.nodeName) {\n        case \"TBODY\":\n          if (typeof r.target.id != \"undefined\") {\n            if (r.target.id.lastIndexOf(\"normalthread_\") >= 0) {\n              r.target.dispatchEvent(\n                new CustomEvent(\"ThreadPreviewClosed\", { bubbles: true })\n              );\n            }\n          }\n          break;\n        case \"DIV\":\n          if (\n            typeof r.target.id != \"undefined\" &&\n            r.target.id.lastIndexOf(\"threadPreview_\") >= 0\n          ) {\n            if (\n              r.removedNodes[0].nodeName == \"SPAN\" &&\n              r.removedNodes[0].innerText == \" 请稍候...\"\n            ) {\n              r.target.dispatchEvent(\n                new CustomEvent(\"ThreadPreviewOpened\", { bubbles: true })\n              );\n            }\n          } else if (\n            r.removedNodes.length >= 3 &&\n            r.target.id.lastIndexOf(\"post_\") >= 0\n          ) {\n            if (\n              r.removedNodes[0].nodeName == \"A\" &&\n              r.removedNodes[0].name == \"newpost\" &&\n              r.removedNodes[0].parentNode != null\n            ) {\n              r.target.dispatchEvent(\n                new CustomEvent(\"ThreadFlushStarted\", { bubbles: true })\n              );\n            }\n          } else if (r.target.id == \"append_parent\") {\n            if (r.removedNodes[0].nodeName == \"DIV\") {\n              if (r.removedNodes[0].id == \"fwin_rate\") {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"RateWindowClosed\", { bubbles: true })\n                );\n              } else if (r.removedNodes[0].id == \"fwin_reply\") {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"ReplyWindowClosed\", { bubbles: true })\n                );\n              } else if (\n                typeof r.removedNodes[0].id != \"undefined\" &&\n                r.removedNodes[0].id.lastIndexOf(\"fwin_miscreport\") >= 0\n              ) {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"ReportWindowClosed\", { bubbles: true })\n                );\n              }\n            }\n          }\n          break;\n      }\n    };\n    const addHandler = (r) => {\n      switch (r.target.nodeName) {\n        case \"DIV\":\n          if (typeof r.target.id != \"undefined\") {\n            if (r.target.id.lastIndexOf(\"threadPreview_\") >= 0) {\n              if (\n                r.addedNodes[0].nodeName == \"SPAN\" &&\n                r.addedNodes[0].innerText == \" 请稍候...\"\n              ) {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"ThreadPreviewPreOpen\", { bubbles: true })\n                );\n              }\n            } else if (\n              r.addedNodes.length >= 3 &&\n              r.target.id.lastIndexOf(\"post_\") >= 0\n            ) {\n              if (\n                r.addedNodes[0].nodeName == \"A\" &&\n                r.addedNodes[0].name == \"newpost\" &&\n                r.addedNodes[0].parentNode != null\n              ) {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"ThreadFlushFinished\", { bubbles: true })\n                );\n              }\n            } else if (r.target.id == \"append_parent\") {\n              if (r.addedNodes[0].nodeName == \"DIV\") {\n                if (r.addedNodes[0].id == \"fwin_rate\") {\n                  r.addedNodes[0].dispatchEvent(\n                    new CustomEvent(\"RateWindowPreOpen\", { bubbles: true })\n                  );\n                } else if (r.addedNodes[0].id == \"fwin_reply\") {\n                  r.addedNodes[0].dispatchEvent(\n                    new CustomEvent(\"ReplyWindowPreOpen\", { bubbles: true })\n                  );\n                } else if (\n                  typeof r.addedNodes[0].id != \"undefined\" &&\n                  r.addedNodes[0].id.lastIndexOf(\"fwin_miscreport\") >= 0\n                ) {\n                  r.addedNodes[0].dispatchEvent(\n                    new CustomEvent(\"ReportWindowPreOpen\", { bubbles: true })\n                  );\n                }\n              }\n            } else if (r.target.id === \"\") {\n              if (\n                r.target.parentElement != null &&\n                r.target.parentElement == \"postlistreply\"\n              ) {\n                r.target.dispatchEvent(\n                  new CustomEvent(\"NewReplyAppended\", { bubbles: true })\n                );\n              }\n            }\n          }\n          break;\n        case \"A\":\n          if (\n            r.addedNodes[0].nodeName == \"#text\" &&\n            typeof tid == \"undefined\"\n          ) {\n            if (r.addedNodes[0].nodeValue == \"正在加载, 请稍后...\") {\n              r.target.dispatchEvent(\n                new CustomEvent(\"ThreadsListLoadStart\", { bubbles: true })\n              );\n            } else if (r.addedNodes[0].nodeValue == \"下一页 »\") {\n              r.target.dispatchEvent(\n                new CustomEvent(\"ThreadsListLoadFinished\", { bubbles: true })\n              );\n            }\n          }\n          break;\n        case \"TD\":\n          if (\n            r.target.id == \"fwin_content_rate\" &&\n            r.addedNodes[0].nodeName == \"DIV\" &&\n            r.addedNodes[0].id == \"floatlayout_topicadmin\"\n          ) {\n            r.target.dispatchEvent(\n              new CustomEvent(\"RateWindowOpened\", { bubbles: true })\n            );\n          }\n          if (\n            r.target.id == \"fwin_content_reply\" &&\n            r.addedNodes[0].nodeName == \"H3\" &&\n            r.addedNodes[0].id == \"fctrl_reply\"\n          ) {\n            r.target.dispatchEvent(\n              new CustomEvent(\"ReplyWindowOpened\", { bubbles: true })\n            );\n          }\n          if (\n            typeof r.target.id != \"undefined\" &&\n            r.target.id.lastIndexOf(\"fwin_content_miscreport\") >= 0 &&\n            r.addedNodes[0].nodeName == \"H3\" &&\n            r.addedNodes[0].id.lastIndexOf(\"fctrl_miscreport\") >= 0\n          ) {\n            r.target.dispatchEvent(\n              new CustomEvent(\"ReportWindowOpened\", { bubbles: true })\n            );\n          }\n          break;\n      }\n    };\n    const mainHandler = (r) => {\n      if (r.type == \"childList\") {\n        if (r.addedNodes.length > 0) {\n          addHandler(r);\n        }\n        if (r.removedNodes.length > 0) {\n          removeHandler(r);\n        }\n      }\n    };\n    let O = new MutationObserver((e) => {\n      for (let record of e) {\n        mainHandler(record);\n      }\n    });\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      if (!unsafeWindow.MExt) {\n        O.observe(document.body, { childList: true, subtree: true });\n      }\n    });\n    addEventListener(\"DiscuzAjaxPostPost\", () =>\n      document.dispatchEvent(new CustomEvent(\"DiscuzAjaxPostFinished\", { bubbles: true })));\n    addEventListener(\"DiscuzAjaxPostGet\", () =>\n      document.dispatchEvent(new CustomEvent(\"DiscuzAjaxGetFinished\", { bubbles: true })));\n  })();\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL05URVZULmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWNiYnMtbG9hZGVyLWNvcmUvLi9zcmMvYXBpL05URVZULmpzPzRlZGEiXSwic291cmNlc0NvbnRlbnQiOlsiXG5mdW5jdGlvbiBsb2FkTlRFVlQoKSB7XG4gIChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcmVtb3ZlSGFuZGxlciA9IChyKSA9PiB7XG4gICAgICBzd2l0Y2ggKHIudGFyZ2V0Lm5vZGVOYW1lKSB7XG4gICAgICAgIGNhc2UgXCJUQk9EWVwiOlxuICAgICAgICAgIGlmICh0eXBlb2Ygci50YXJnZXQuaWQgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKHIudGFyZ2V0LmlkLmxhc3RJbmRleE9mKFwibm9ybWFsdGhyZWFkX1wiKSA+PSAwKSB7XG4gICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiVGhyZWFkUHJldmlld0Nsb3NlZFwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJESVZcIjpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2Ygci50YXJnZXQuaWQgIT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAgICAgci50YXJnZXQuaWQubGFzdEluZGV4T2YoXCJ0aHJlYWRQcmV2aWV3X1wiKSA+PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHIucmVtb3ZlZE5vZGVzWzBdLm5vZGVOYW1lID09IFwiU1BBTlwiICYmXG4gICAgICAgICAgICAgIHIucmVtb3ZlZE5vZGVzWzBdLmlubmVyVGV4dCA9PSBcIiDor7fnqI3lgJkuLi5cIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiVGhyZWFkUHJldmlld09wZW5lZFwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgci5yZW1vdmVkTm9kZXMubGVuZ3RoID49IDMgJiZcbiAgICAgICAgICAgIHIudGFyZ2V0LmlkLmxhc3RJbmRleE9mKFwicG9zdF9cIikgPj0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICByLnJlbW92ZWROb2Rlc1swXS5ub2RlTmFtZSA9PSBcIkFcIiAmJlxuICAgICAgICAgICAgICByLnJlbW92ZWROb2Rlc1swXS5uYW1lID09IFwibmV3cG9zdFwiICYmXG4gICAgICAgICAgICAgIHIucmVtb3ZlZE5vZGVzWzBdLnBhcmVudE5vZGUgIT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiVGhyZWFkRmx1c2hTdGFydGVkXCIsIHsgYnViYmxlczogdHJ1ZSB9KVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoci50YXJnZXQuaWQgPT0gXCJhcHBlbmRfcGFyZW50XCIpIHtcbiAgICAgICAgICAgIGlmIChyLnJlbW92ZWROb2Rlc1swXS5ub2RlTmFtZSA9PSBcIkRJVlwiKSB7XG4gICAgICAgICAgICAgIGlmIChyLnJlbW92ZWROb2Rlc1swXS5pZCA9PSBcImZ3aW5fcmF0ZVwiKSB7XG4gICAgICAgICAgICAgICAgci50YXJnZXQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudChcIlJhdGVXaW5kb3dDbG9zZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLnJlbW92ZWROb2Rlc1swXS5pZCA9PSBcImZ3aW5fcmVwbHlcIikge1xuICAgICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJSZXBseVdpbmRvd0Nsb3NlZFwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIHR5cGVvZiByLnJlbW92ZWROb2Rlc1swXS5pZCAhPSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICAgICAgci5yZW1vdmVkTm9kZXNbMF0uaWQubGFzdEluZGV4T2YoXCJmd2luX21pc2NyZXBvcnRcIikgPj0gMFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByLnRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiUmVwb3J0V2luZG93Q2xvc2VkXCIsIHsgYnViYmxlczogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBhZGRIYW5kbGVyID0gKHIpID0+IHtcbiAgICAgIHN3aXRjaCAoci50YXJnZXQubm9kZU5hbWUpIHtcbiAgICAgICAgY2FzZSBcIkRJVlwiOlxuICAgICAgICAgIGlmICh0eXBlb2Ygci50YXJnZXQuaWQgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgaWYgKHIudGFyZ2V0LmlkLmxhc3RJbmRleE9mKFwidGhyZWFkUHJldmlld19cIikgPj0gMCkge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgci5hZGRlZE5vZGVzWzBdLm5vZGVOYW1lID09IFwiU1BBTlwiICYmXG4gICAgICAgICAgICAgICAgci5hZGRlZE5vZGVzWzBdLmlubmVyVGV4dCA9PSBcIiDor7fnqI3lgJkuLi5cIlxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByLnRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiVGhyZWFkUHJldmlld1ByZU9wZW5cIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgci5hZGRlZE5vZGVzLmxlbmd0aCA+PSAzICYmXG4gICAgICAgICAgICAgIHIudGFyZ2V0LmlkLmxhc3RJbmRleE9mKFwicG9zdF9cIikgPj0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0ubm9kZU5hbWUgPT0gXCJBXCIgJiZcbiAgICAgICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0ubmFtZSA9PSBcIm5ld3Bvc3RcIiAmJlxuICAgICAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5wYXJlbnROb2RlICE9IG51bGxcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgci50YXJnZXQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudChcIlRocmVhZEZsdXNoRmluaXNoZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChyLnRhcmdldC5pZCA9PSBcImFwcGVuZF9wYXJlbnRcIikge1xuICAgICAgICAgICAgICBpZiAoci5hZGRlZE5vZGVzWzBdLm5vZGVOYW1lID09IFwiRElWXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoci5hZGRlZE5vZGVzWzBdLmlkID09IFwiZndpbl9yYXRlXCIpIHtcbiAgICAgICAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJSYXRlV2luZG93UHJlT3BlblwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLmFkZGVkTm9kZXNbMF0uaWQgPT0gXCJmd2luX3JlcGx5XCIpIHtcbiAgICAgICAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJSZXBseVdpbmRvd1ByZU9wZW5cIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgICB0eXBlb2Ygci5hZGRlZE5vZGVzWzBdLmlkICE9IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5pZC5sYXN0SW5kZXhPZihcImZ3aW5fbWlzY3JlcG9ydFwiKSA+PSAwXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0uZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiUmVwb3J0V2luZG93UHJlT3BlblwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHIudGFyZ2V0LmlkID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICByLnRhcmdldC5wYXJlbnRFbGVtZW50ICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICByLnRhcmdldC5wYXJlbnRFbGVtZW50ID09IFwicG9zdGxpc3RyZXBseVwiXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJOZXdSZXBseUFwcGVuZGVkXCIsIHsgYnViYmxlczogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJBXCI6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgci5hZGRlZE5vZGVzWzBdLm5vZGVOYW1lID09IFwiI3RleHRcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIHRpZCA9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoci5hZGRlZE5vZGVzWzBdLm5vZGVWYWx1ZSA9PSBcIuato+WcqOWKoOi9vSwg6K+356iN5ZCOLi4uXCIpIHtcbiAgICAgICAgICAgICAgci50YXJnZXQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJUaHJlYWRzTGlzdExvYWRTdGFydFwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoci5hZGRlZE5vZGVzWzBdLm5vZGVWYWx1ZSA9PSBcIuS4i+S4gOmhtSDCu1wiKSB7XG4gICAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiVGhyZWFkc0xpc3RMb2FkRmluaXNoZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiVERcIjpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByLnRhcmdldC5pZCA9PSBcImZ3aW5fY29udGVudF9yYXRlXCIgJiZcbiAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5ub2RlTmFtZSA9PSBcIkRJVlwiICYmXG4gICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0uaWQgPT0gXCJmbG9hdGxheW91dF90b3BpY2FkbWluXCJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHIudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudChcIlJhdGVXaW5kb3dPcGVuZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByLnRhcmdldC5pZCA9PSBcImZ3aW5fY29udGVudF9yZXBseVwiICYmXG4gICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0ubm9kZU5hbWUgPT0gXCJIM1wiICYmXG4gICAgICAgICAgICByLmFkZGVkTm9kZXNbMF0uaWQgPT0gXCJmY3RybF9yZXBseVwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByLnRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoXCJSZXBseVdpbmRvd09wZW5lZFwiLCB7IGJ1YmJsZXM6IHRydWUgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiByLnRhcmdldC5pZCAhPSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICByLnRhcmdldC5pZC5sYXN0SW5kZXhPZihcImZ3aW5fY29udGVudF9taXNjcmVwb3J0XCIpID49IDAgJiZcbiAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5ub2RlTmFtZSA9PSBcIkgzXCIgJiZcbiAgICAgICAgICAgIHIuYWRkZWROb2Rlc1swXS5pZC5sYXN0SW5kZXhPZihcImZjdHJsX21pc2NyZXBvcnRcIikgPj0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgci50YXJnZXQuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwiUmVwb3J0V2luZG93T3BlbmVkXCIsIHsgYnViYmxlczogdHJ1ZSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBtYWluSGFuZGxlciA9IChyKSA9PiB7XG4gICAgICBpZiAoci50eXBlID09IFwiY2hpbGRMaXN0XCIpIHtcbiAgICAgICAgaWYgKHIuYWRkZWROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYWRkSGFuZGxlcihyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoci5yZW1vdmVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlbW92ZUhhbmRsZXIocik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCBPID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGUpID0+IHtcbiAgICAgIGZvciAobGV0IHJlY29yZCBvZiBlKSB7XG4gICAgICAgIG1haW5IYW5kbGVyKHJlY29yZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKCF1bnNhZmVXaW5kb3cuTUV4dCkge1xuICAgICAgICBPLm9ic2VydmUoZG9jdW1lbnQuYm9keSwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihcIkRpc2N1ekFqYXhQb3N0UG9zdFwiLCAoKSA9PlxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJEaXNjdXpBamF4UG9zdEZpbmlzaGVkXCIsIHsgYnViYmxlczogdHJ1ZSB9KSkpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoXCJEaXNjdXpBamF4UG9zdEdldFwiLCAoKSA9PlxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJEaXNjdXpBamF4R2V0RmluaXNoZWRcIiwgeyBidWJibGVzOiB0cnVlIH0pKSk7XG4gIH0pKCk7XG59XG5leHBvcnQgeyBsb2FkTlRFVlQgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/NTEVT.js\n");

/***/ }),

/***/ "./src/api/STDEVT.js":
/*!***************************!*\
  !*** ./src/api/STDEVT.js ***!
  \***************************/
/*! namespace exports */
/*! export LoaderEvent [provided] [no usage info] [missing usage info prevents renaming] */
/*! export loadEvents [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"loadEvents\": () => /* binding */ loadEvents,\n/* harmony export */   \"LoaderEvent\": () => /* binding */ LoaderEvent\n/* harmony export */ });\nclass LoaderEvent extends Event{\n  constructor(name, detail, cancelable = false) {\n    super(name, { bubbles: true, cancelable: cancelable });\n    this.name = name;\n    for(let [k, v] of Object.entries(detail))\n      this[k] = v;\n  }\n\n  static emit(name, detail = {}) {\n    document.dispatchEvent(new LoaderEvent(name, detail));\n  }\n\n  static emitCancelable(name, detail = {}) {\n    let event = new LoaderEvent(name, detail, true);\n    document.dispatchEvent(event);\n    return event.defaultPrevented;\n  }\n}\nfunction loadEvents() {\n  (async () => {\n    if(typeof unsafeWindow.ajaxpost != \"undefined\") {\n      const __ajaxpost = unsafeWindow.ajaxpost;\n      unsafeWindow.ajaxpost = (formid, showid, waitid, showidclass, submitbtn, recall) => {\n        if(LoaderEvent.emitCancelable(\"DiscuzAjaxPrePost\", {formid, showid, waitid, showidclass, submitbtn, recall}))\n          return;\n        __ajaxpost(formid, showid, waitid, showidclass, submitbtn, () => {\n          if (typeof recall == \"function\")\n            recall();\n          else\n            eval(recall);\n          LoaderEvent.emit(\"DiscuzAjaxPostPost\", {formid, showid, waitid, showidclass, submitbtn, recall});\n        });\n      };\n    }\n\n    if(typeof unsafeWindow.ajaxget != \"undefined\") {\n      const __ajaxget = unsafeWindow.ajaxget;\n      unsafeWindow.ajaxget = (url, showid, waitid, loading, display, recall) => {\n        if(LoaderEvent.emitCancelable(\"DiscuzAjaxPreGet\", {url, showid, waitid, loading, display, recall}))\n          return;\n        __ajaxget(url, showid, waitid, loading, display, () => {\n          if (typeof recall == \"function\")\n            recall();\n          else\n            eval(recall);\n          LoaderEvent.emit(\"DiscuzAjaxPostGet\", {url, showid, waitid, loading, display, recall});\n        });\n      };\n    }\n\n    if(typeof unsafeWindow.previewThread != \"undefined\") {\n      let __previewThread = unsafeWindow.previewThread;\n      unsafeWindow.previewThread = (tid, tbody) => {\n        if(LoaderEvent.emitCancelable(\"ToggleThreadPreview\", { tid, tbody}))\n          return;\n        __previewThread(tid, tbody);\n      }\n    }\n\n    if(typeof unsafeWindow.showWindow != \"undefined\") {\n      let __showWindow = unsafeWindow.showWindow;\n      unsafeWindow.showWindow = (win, url, method, cache, menuv) => {\n        if(LoaderEvent.emitCancelable(\"WindowPreLoad\", { win, url, method, cache, menuv }))\n          return;\n        __showWindow(win, url, method, cache, menuv);\n      }\n    }\n\n    if(typeof unsafeWindow.showMenu != \"undefined\") {\n      let __showMenu = unsafeWindow.showMenu;\n      unsafeWindow.showMenu = (detail) => {\n        if(LoaderEvent.emitCancelable(\"MenuPreShow\", { detail }))\n          return;\n        __showMenu(detail);\n        LoaderEvent.emit(\"MenuPostShow\", { detail });\n      }\n    }\n\n    if(typeof unsafeWindow.hideMenu != \"undefined\") {\n      let __hideMenu = unsafeWindow.hideMenu;\n      unsafeWindow.hideMenu = (attr, mtype) => {\n        if(LoaderEvent.emitCancelable(\"MenuPreHide\", { attr, mtype }))\n          return;\n        __hideMenu(attr, mtype);\n        LoaderEvent.emit(\"MenuPostHide\", { attr, mtype});\n      }\n    }\n  })();\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL1NUREVWVC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2FwaS9TVERFVlQuanM/Y2ZjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBMb2FkZXJFdmVudCBleHRlbmRzIEV2ZW50e1xuICBjb25zdHJ1Y3RvcihuYW1lLCBkZXRhaWwsIGNhbmNlbGFibGUgPSBmYWxzZSkge1xuICAgIHN1cGVyKG5hbWUsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogY2FuY2VsYWJsZSB9KTtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIGZvcihsZXQgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRldGFpbCkpXG4gICAgICB0aGlzW2tdID0gdjtcbiAgfVxuXG4gIHN0YXRpYyBlbWl0KG5hbWUsIGRldGFpbCA9IHt9KSB7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgTG9hZGVyRXZlbnQobmFtZSwgZGV0YWlsKSk7XG4gIH1cblxuICBzdGF0aWMgZW1pdENhbmNlbGFibGUobmFtZSwgZGV0YWlsID0ge30pIHtcbiAgICBsZXQgZXZlbnQgPSBuZXcgTG9hZGVyRXZlbnQobmFtZSwgZGV0YWlsLCB0cnVlKTtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICByZXR1cm4gZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcbiAgfVxufVxuZnVuY3Rpb24gbG9hZEV2ZW50cygpIHtcbiAgKGFzeW5jICgpID0+IHtcbiAgICBpZih0eXBlb2YgdW5zYWZlV2luZG93LmFqYXhwb3N0ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnN0IF9fYWpheHBvc3QgPSB1bnNhZmVXaW5kb3cuYWpheHBvc3Q7XG4gICAgICB1bnNhZmVXaW5kb3cuYWpheHBvc3QgPSAoZm9ybWlkLCBzaG93aWQsIHdhaXRpZCwgc2hvd2lkY2xhc3MsIHN1Ym1pdGJ0biwgcmVjYWxsKSA9PiB7XG4gICAgICAgIGlmKExvYWRlckV2ZW50LmVtaXRDYW5jZWxhYmxlKFwiRGlzY3V6QWpheFByZVBvc3RcIiwge2Zvcm1pZCwgc2hvd2lkLCB3YWl0aWQsIHNob3dpZGNsYXNzLCBzdWJtaXRidG4sIHJlY2FsbH0pKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgX19hamF4cG9zdChmb3JtaWQsIHNob3dpZCwgd2FpdGlkLCBzaG93aWRjbGFzcywgc3VibWl0YnRuLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZWNhbGwgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgcmVjYWxsKCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgZXZhbChyZWNhbGwpO1xuICAgICAgICAgIExvYWRlckV2ZW50LmVtaXQoXCJEaXNjdXpBamF4UG9zdFBvc3RcIiwge2Zvcm1pZCwgc2hvd2lkLCB3YWl0aWQsIHNob3dpZGNsYXNzLCBzdWJtaXRidG4sIHJlY2FsbH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIHVuc2FmZVdpbmRvdy5hamF4Z2V0ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGNvbnN0IF9fYWpheGdldCA9IHVuc2FmZVdpbmRvdy5hamF4Z2V0O1xuICAgICAgdW5zYWZlV2luZG93LmFqYXhnZXQgPSAodXJsLCBzaG93aWQsIHdhaXRpZCwgbG9hZGluZywgZGlzcGxheSwgcmVjYWxsKSA9PiB7XG4gICAgICAgIGlmKExvYWRlckV2ZW50LmVtaXRDYW5jZWxhYmxlKFwiRGlzY3V6QWpheFByZUdldFwiLCB7dXJsLCBzaG93aWQsIHdhaXRpZCwgbG9hZGluZywgZGlzcGxheSwgcmVjYWxsfSkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBfX2FqYXhnZXQodXJsLCBzaG93aWQsIHdhaXRpZCwgbG9hZGluZywgZGlzcGxheSwgKCkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVjYWxsID09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgIHJlY2FsbCgpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGV2YWwocmVjYWxsKTtcbiAgICAgICAgICBMb2FkZXJFdmVudC5lbWl0KFwiRGlzY3V6QWpheFBvc3RHZXRcIiwge3VybCwgc2hvd2lkLCB3YWl0aWQsIGxvYWRpbmcsIGRpc3BsYXksIHJlY2FsbH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIHVuc2FmZVdpbmRvdy5wcmV2aWV3VGhyZWFkICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGxldCBfX3ByZXZpZXdUaHJlYWQgPSB1bnNhZmVXaW5kb3cucHJldmlld1RocmVhZDtcbiAgICAgIHVuc2FmZVdpbmRvdy5wcmV2aWV3VGhyZWFkID0gKHRpZCwgdGJvZHkpID0+IHtcbiAgICAgICAgaWYoTG9hZGVyRXZlbnQuZW1pdENhbmNlbGFibGUoXCJUb2dnbGVUaHJlYWRQcmV2aWV3XCIsIHsgdGlkLCB0Ym9keX0pKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgX19wcmV2aWV3VGhyZWFkKHRpZCwgdGJvZHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmKHR5cGVvZiB1bnNhZmVXaW5kb3cuc2hvd1dpbmRvdyAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBsZXQgX19zaG93V2luZG93ID0gdW5zYWZlV2luZG93LnNob3dXaW5kb3c7XG4gICAgICB1bnNhZmVXaW5kb3cuc2hvd1dpbmRvdyA9ICh3aW4sIHVybCwgbWV0aG9kLCBjYWNoZSwgbWVudXYpID0+IHtcbiAgICAgICAgaWYoTG9hZGVyRXZlbnQuZW1pdENhbmNlbGFibGUoXCJXaW5kb3dQcmVMb2FkXCIsIHsgd2luLCB1cmwsIG1ldGhvZCwgY2FjaGUsIG1lbnV2IH0pKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgX19zaG93V2luZG93KHdpbiwgdXJsLCBtZXRob2QsIGNhY2hlLCBtZW51dik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIHVuc2FmZVdpbmRvdy5zaG93TWVudSAhPSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBsZXQgX19zaG93TWVudSA9IHVuc2FmZVdpbmRvdy5zaG93TWVudTtcbiAgICAgIHVuc2FmZVdpbmRvdy5zaG93TWVudSA9IChkZXRhaWwpID0+IHtcbiAgICAgICAgaWYoTG9hZGVyRXZlbnQuZW1pdENhbmNlbGFibGUoXCJNZW51UHJlU2hvd1wiLCB7IGRldGFpbCB9KSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIF9fc2hvd01lbnUoZGV0YWlsKTtcbiAgICAgICAgTG9hZGVyRXZlbnQuZW1pdChcIk1lbnVQb3N0U2hvd1wiLCB7IGRldGFpbCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZih0eXBlb2YgdW5zYWZlV2luZG93LmhpZGVNZW51ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGxldCBfX2hpZGVNZW51ID0gdW5zYWZlV2luZG93LmhpZGVNZW51O1xuICAgICAgdW5zYWZlV2luZG93LmhpZGVNZW51ID0gKGF0dHIsIG10eXBlKSA9PiB7XG4gICAgICAgIGlmKExvYWRlckV2ZW50LmVtaXRDYW5jZWxhYmxlKFwiTWVudVByZUhpZGVcIiwgeyBhdHRyLCBtdHlwZSB9KSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIF9faGlkZU1lbnUoYXR0ciwgbXR5cGUpO1xuICAgICAgICBMb2FkZXJFdmVudC5lbWl0KFwiTWVudVBvc3RIaWRlXCIsIHsgYXR0ciwgbXR5cGV9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pKCk7XG59XG5cbmV4cG9ydCB7IGxvYWRFdmVudHMsIExvYWRlckV2ZW50IH07Il0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/STDEVT.js\n");

/***/ }),

/***/ "./src/craftmcbbs/craft-ui.js":
/*!************************************!*\
  !*** ./src/craftmcbbs/craft-ui.js ***!
  \************************************/
/*! namespace exports */
/*! export showAlert [provided] [no usage info] [missing usage info prevents renaming] */
/*! export showDialogFull [provided] [no usage info] [missing usage info prevents renaming] */
/*! export showOfflineWindow [provided] [no usage info] [missing usage info prevents renaming] */
/*! export showPopper [provided] [no usage info] [missing usage info prevents renaming] */
/*! export showSuccess [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"showAlert\": () => /* binding */ showAlert,\n/* harmony export */   \"showPopper\": () => /* binding */ showPopper,\n/* harmony export */   \"showSuccess\": () => /* binding */ showSuccess,\n/* harmony export */   \"showDialogFull\": () => /* binding */ showDialogFull,\n/* harmony export */   \"showOfflineWindow\": () => /* binding */ showOfflineWindow\n/* harmony export */ });\n/* harmony import */ var _libs_native__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/native */ \"./src/libs/native.js\");\n;\n\nfunction showSuccess(msg, title, callback) {\n  (0,_libs_native__WEBPACK_IMPORTED_MODULE_0__.getUnsafeWindow)().showDialog(msg, \"right\", title, callback);\n}\n\nfunction showAlert(msg, title, callback) {\n  (0,_libs_native__WEBPACK_IMPORTED_MODULE_0__.getUnsafeWindow)().showDialog(msg, \"alert\", title, callback);\n}\n\nfunction showDialogFull(config) {\n  showDialog(\n    config.msg,\n    config.mode,\n    config.title,\n    config.onClick,\n    config.cover,\n    config.onCancel,\n    config.confirmText,\n    config.cancelText,\n    config.closeTime,\n    config.locationTime\n  );\n}\n\nfunction showPopper(msg) {\n  (0,_libs_native__WEBPACK_IMPORTED_MODULE_0__.getUnsafeWindow)().showError(msg);\n}\n\nfunction showOfflineWindow(k, element, menuv) {\n  let menuid = 'fwin_' + k;\n  let menuObj = $(menuid);\n  let hidedom = '';\n  let show = function () {\n    hideMenu('fwin_dialog', 'dialog');\n    let v = {\n      mtype: 'win',\n      menuid: menuid,\n      duration: 3,\n      pos: '00',\n      zindex: JSMENU['zIndex']['win'],\n      drag: '',\n      cache: -1\n    };\n    for (k in menuv)\n      v[k] = menuv[k];\n    showMenu(v);\n  };\n  if (!menuObj) {\n    menuObj = document.createElement('div');\n    menuObj.id = menuid;\n    menuObj.className = 'fwinmask';\n    menuObj.style.opacity = 0;\n    menuObj.style.pointerEvents = 'none';\n    document.getElementById('append_parent').appendChild(menuObj);\n    evt = ' style=\"cursor:move\" onmousedown=\"dragMenu($(\\'' + menuid + '\\'), event, 1)\" ondblclick=\"hideWindow(\\'' + k + '\\')\"';\n    hidedom = '<style type=\"text/css\">object{visibility:hidden;}</style>';\n    menuObj.innerHTML = hidedom + '<table cellpadding=\"0\" cellspacing=\"0\" class=\"fwin\"><tr><td class=\"t_l\"></td><td class=\"t_c\"' + evt + '></td><td class=\"t_r\"></td></tr><tr><td class=\"m_l\"' + evt + ')\">&nbsp;&nbsp;</td><td class=\"m_c\" id=\"fwin_content_' + k + '\">' + '</td><td class=\"m_r\"' + evt + '\"></td></tr><tr><td class=\"b_l\"></td><td class=\"b_c\"' + evt + '></td><td class=\"b_r\"></td></tr></table>';\n    if(element instanceof Text || element instanceof HTMLElement)\n      document.getElementById('fwin_content_' + k).appendChild(element);\n    else\n      document.getElementById('fwin_content_' + k).innerHTML = element;\n  }\n  show();\n  doane();\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3JhZnRtY2Jicy9jcmFmdC11aS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2NyYWZ0bWNiYnMvY3JhZnQtdWkuanM/M2RkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRVbnNhZmVXaW5kb3cgfSBmcm9tIFwiLi4vbGlicy9uYXRpdmVcIjtcblxuZnVuY3Rpb24gc2hvd1N1Y2Nlc3MobXNnLCB0aXRsZSwgY2FsbGJhY2spIHtcbiAgZ2V0VW5zYWZlV2luZG93KCkuc2hvd0RpYWxvZyhtc2csIFwicmlnaHRcIiwgdGl0bGUsIGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZywgdGl0bGUsIGNhbGxiYWNrKSB7XG4gIGdldFVuc2FmZVdpbmRvdygpLnNob3dEaWFsb2cobXNnLCBcImFsZXJ0XCIsIHRpdGxlLCBjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHNob3dEaWFsb2dGdWxsKGNvbmZpZykge1xuICBzaG93RGlhbG9nKFxuICAgIGNvbmZpZy5tc2csXG4gICAgY29uZmlnLm1vZGUsXG4gICAgY29uZmlnLnRpdGxlLFxuICAgIGNvbmZpZy5vbkNsaWNrLFxuICAgIGNvbmZpZy5jb3ZlcixcbiAgICBjb25maWcub25DYW5jZWwsXG4gICAgY29uZmlnLmNvbmZpcm1UZXh0LFxuICAgIGNvbmZpZy5jYW5jZWxUZXh0LFxuICAgIGNvbmZpZy5jbG9zZVRpbWUsXG4gICAgY29uZmlnLmxvY2F0aW9uVGltZVxuICApO1xufVxuXG5mdW5jdGlvbiBzaG93UG9wcGVyKG1zZykge1xuICBnZXRVbnNhZmVXaW5kb3coKS5zaG93RXJyb3IobXNnKTtcbn1cblxuZnVuY3Rpb24gc2hvd09mZmxpbmVXaW5kb3coaywgZWxlbWVudCwgbWVudXYpIHtcbiAgbGV0IG1lbnVpZCA9ICdmd2luXycgKyBrO1xuICBsZXQgbWVudU9iaiA9ICQobWVudWlkKTtcbiAgbGV0IGhpZGVkb20gPSAnJztcbiAgbGV0IHNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgaGlkZU1lbnUoJ2Z3aW5fZGlhbG9nJywgJ2RpYWxvZycpO1xuICAgIGxldCB2ID0ge1xuICAgICAgbXR5cGU6ICd3aW4nLFxuICAgICAgbWVudWlkOiBtZW51aWQsXG4gICAgICBkdXJhdGlvbjogMyxcbiAgICAgIHBvczogJzAwJyxcbiAgICAgIHppbmRleDogSlNNRU5VWyd6SW5kZXgnXVsnd2luJ10sXG4gICAgICBkcmFnOiAnJyxcbiAgICAgIGNhY2hlOiAtMVxuICAgIH07XG4gICAgZm9yIChrIGluIG1lbnV2KVxuICAgICAgdltrXSA9IG1lbnV2W2tdO1xuICAgIHNob3dNZW51KHYpO1xuICB9O1xuICBpZiAoIW1lbnVPYmopIHtcbiAgICBtZW51T2JqID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbWVudU9iai5pZCA9IG1lbnVpZDtcbiAgICBtZW51T2JqLmNsYXNzTmFtZSA9ICdmd2lubWFzayc7XG4gICAgbWVudU9iai5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICBtZW51T2JqLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGVuZF9wYXJlbnQnKS5hcHBlbmRDaGlsZChtZW51T2JqKTtcbiAgICBldnQgPSAnIHN0eWxlPVwiY3Vyc29yOm1vdmVcIiBvbm1vdXNlZG93bj1cImRyYWdNZW51KCQoXFwnJyArIG1lbnVpZCArICdcXCcpLCBldmVudCwgMSlcIiBvbmRibGNsaWNrPVwiaGlkZVdpbmRvdyhcXCcnICsgayArICdcXCcpXCInO1xuICAgIGhpZGVkb20gPSAnPHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPm9iamVjdHt2aXNpYmlsaXR5OmhpZGRlbjt9PC9zdHlsZT4nO1xuICAgIG1lbnVPYmouaW5uZXJIVE1MID0gaGlkZWRvbSArICc8dGFibGUgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgY2xhc3M9XCJmd2luXCI+PHRyPjx0ZCBjbGFzcz1cInRfbFwiPjwvdGQ+PHRkIGNsYXNzPVwidF9jXCInICsgZXZ0ICsgJz48L3RkPjx0ZCBjbGFzcz1cInRfclwiPjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPVwibV9sXCInICsgZXZ0ICsgJylcIj4mbmJzcDsmbmJzcDs8L3RkPjx0ZCBjbGFzcz1cIm1fY1wiIGlkPVwiZndpbl9jb250ZW50XycgKyBrICsgJ1wiPicgKyAnPC90ZD48dGQgY2xhc3M9XCJtX3JcIicgKyBldnQgKyAnXCI+PC90ZD48L3RyPjx0cj48dGQgY2xhc3M9XCJiX2xcIj48L3RkPjx0ZCBjbGFzcz1cImJfY1wiJyArIGV2dCArICc+PC90ZD48dGQgY2xhc3M9XCJiX3JcIj48L3RkPjwvdHI+PC90YWJsZT4nO1xuICAgIGlmKGVsZW1lbnQgaW5zdGFuY2VvZiBUZXh0IHx8IGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudClcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmd2luX2NvbnRlbnRfJyArIGspLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgIGVsc2VcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmd2luX2NvbnRlbnRfJyArIGspLmlubmVySFRNTCA9IGVsZW1lbnQ7XG4gIH1cbiAgc2hvdygpO1xuICBkb2FuZSgpO1xufVxuXG5leHBvcnQgeyBzaG93QWxlcnQsIHNob3dQb3BwZXIsIHNob3dTdWNjZXNzLCBzaG93RGlhbG9nRnVsbCwgc2hvd09mZmxpbmVXaW5kb3cgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/craftmcbbs/craft-ui.js\n");

/***/ }),

/***/ "./src/libs/native.js":
/*!****************************!*\
  !*** ./src/libs/native.js ***!
  \****************************/
/*! namespace exports */
/*! export getGM [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getProperty [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getUnsafeWindow [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setLockedProperty [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setProperty [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"setProperty\": () => /* binding */ setProperty,\n/* harmony export */   \"getProperty\": () => /* binding */ getProperty,\n/* harmony export */   \"getUnsafeWindow\": () => /* binding */ getUnsafeWindow,\n/* harmony export */   \"setLockedProperty\": () => /* binding */ setLockedProperty,\n/* harmony export */   \"getGM\": () => /* binding */ getGM\n/* harmony export */ });\nfunction setProperty(obj, key, val) {\r\n  obj[key] = val;\r\n}\r\n\r\nfunction getProperty(obj, key) {\r\n  return obj[key];\r\n}\r\n\r\nfunction setLockedProperty(a, tag, val) {\r\n  Object.defineProperty(a, tag, {\r\n    value: val,\r\n    enumerable: false,\r\n    writable: false,\r\n    configurable: false,\r\n  });\r\n}\r\n\r\nfunction getUnsafeWindow() {\r\n  return unsafeWindow || window;\r\n}\r\n\r\nfunction getGM() {\r\n  return {\r\n    GM_addStyle,\r\n    GM_deleteValue,\r\n    GM_download,\r\n    GM_getResourceText,\r\n    GM_getResourceURL,\r\n    GM_getValue,\r\n    GM_listValues,\r\n    GM_log,\r\n    GM_notification,\r\n    GM_setClipboard,\r\n    GM_setValue,\r\n  };\r\n}\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9uYXRpdmUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tY2Jicy1sb2FkZXItY29yZS8uL3NyYy9saWJzL25hdGl2ZS5qcz9iODMwIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHNldFByb3BlcnR5KG9iaiwga2V5LCB2YWwpIHtcclxuICBvYmpba2V5XSA9IHZhbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvcGVydHkob2JqLCBrZXkpIHtcclxuICByZXR1cm4gb2JqW2tleV07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldExvY2tlZFByb3BlcnR5KGEsIHRhZywgdmFsKSB7XHJcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIHRhZywge1xyXG4gICAgdmFsdWU6IHZhbCxcclxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgd3JpdGFibGU6IGZhbHNlLFxyXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5zYWZlV2luZG93KCkge1xyXG4gIHJldHVybiB1bnNhZmVXaW5kb3cgfHwgd2luZG93O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRHTSgpIHtcclxuICByZXR1cm4ge1xyXG4gICAgR01fYWRkU3R5bGUsXHJcbiAgICBHTV9kZWxldGVWYWx1ZSxcclxuICAgIEdNX2Rvd25sb2FkLFxyXG4gICAgR01fZ2V0UmVzb3VyY2VUZXh0LFxyXG4gICAgR01fZ2V0UmVzb3VyY2VVUkwsXHJcbiAgICBHTV9nZXRWYWx1ZSxcclxuICAgIEdNX2xpc3RWYWx1ZXMsXHJcbiAgICBHTV9sb2csXHJcbiAgICBHTV9ub3RpZmljYXRpb24sXHJcbiAgICBHTV9zZXRDbGlwYm9hcmQsXHJcbiAgICBHTV9zZXRWYWx1ZSxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgeyBzZXRQcm9wZXJ0eSwgZ2V0UHJvcGVydHksIGdldFVuc2FmZVdpbmRvdywgc2V0TG9ja2VkUHJvcGVydHksIGdldEdNIH07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/native.js\n");

/***/ }),

/***/ "./src/libs/usfunc.js":
/*!****************************!*\
  !*** ./src/libs/usfunc.js ***!
  \****************************/
/*! namespace exports */
/*! export GMDeleteValue [provided] [no usage info] [missing usage info prevents renaming] */
/*! export GMGetValue [provided] [no usage info] [missing usage info prevents renaming] */
/*! export GMLog [provided] [no usage info] [missing usage info prevents renaming] */
/*! export GMSetValue [provided] [no usage info] [missing usage info prevents renaming] */
/*! export GMXmlhttpRequest [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getWindowProperty [provided] [no usage info] [missing usage info prevents renaming] */
/*! export setWindowProperty [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GMDeleteValue\": () => /* binding */ GMDeleteValue,\n/* harmony export */   \"GMSetValue\": () => /* binding */ GMSetValue,\n/* harmony export */   \"GMGetValue\": () => /* binding */ GMGetValue,\n/* harmony export */   \"GMLog\": () => /* binding */ GMLog,\n/* harmony export */   \"GMXmlhttpRequest\": () => /* binding */ GMXmlhttpRequest,\n/* harmony export */   \"setWindowProperty\": () => /* binding */ setWindowProperty,\n/* harmony export */   \"getWindowProperty\": () => /* binding */ getWindowProperty\n/* harmony export */ });\nfunction GMDeleteValue(name) {\r\n  GM_deleteValue(name);\r\n}\r\n\r\nfunction GMSetValue(name, value) {\r\n  GM_setValue(name, value);\r\n}\r\n\r\nfunction GMGetValue(name, defaultValue) {\r\n  return GM_getValue(name, defaultValue);\r\n}\r\n\r\nfunction GMLog(msg) {\r\n  GM_log(msg);\r\n}\r\n\r\nfunction setWindowProperty(key, value) {\r\n  unsafeWindow[key] = value;\r\n}\r\n\r\nfunction getWindowProperty(key) {\r\n  return unsafeWindow[key];\r\n}\r\n\r\nfunction GMXmlhttpRequest(details) {\r\n  return GM_xmlhttpRequest(details);\r\n}\r\n\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy91c2Z1bmMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tY2Jicy1sb2FkZXItY29yZS8uL3NyYy9saWJzL3VzZnVuYy5qcz85NWI4Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEdNRGVsZXRlVmFsdWUobmFtZSkge1xyXG4gIEdNX2RlbGV0ZVZhbHVlKG5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHTVNldFZhbHVlKG5hbWUsIHZhbHVlKSB7XHJcbiAgR01fc2V0VmFsdWUobmFtZSwgdmFsdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHTUdldFZhbHVlKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gIHJldHVybiBHTV9nZXRWYWx1ZShuYW1lLCBkZWZhdWx0VmFsdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBHTUxvZyhtc2cpIHtcclxuICBHTV9sb2cobXNnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0V2luZG93UHJvcGVydHkoa2V5LCB2YWx1ZSkge1xyXG4gIHVuc2FmZVdpbmRvd1trZXldID0gdmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFdpbmRvd1Byb3BlcnR5KGtleSkge1xyXG4gIHJldHVybiB1bnNhZmVXaW5kb3dba2V5XTtcclxufVxyXG5cclxuZnVuY3Rpb24gR01YbWxodHRwUmVxdWVzdChkZXRhaWxzKSB7XHJcbiAgcmV0dXJuIEdNX3htbGh0dHBSZXF1ZXN0KGRldGFpbHMpO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIEdNRGVsZXRlVmFsdWUsXHJcbiAgR01TZXRWYWx1ZSxcclxuICBHTUdldFZhbHVlLFxyXG4gIEdNTG9nLFxyXG4gIEdNWG1saHR0cFJlcXVlc3QsXHJcbiAgc2V0V2luZG93UHJvcGVydHksXHJcbiAgZ2V0V2luZG93UHJvcGVydHksXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/libs/usfunc.js\n");

/***/ }),

/***/ "./src/api/STDAPI.ts":
/*!***************************!*\
  !*** ./src/api/STDAPI.ts ***!
  \***************************/
/*! namespace exports */
/*! export forkAPI [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getAPIVersion [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"forkAPI\": () => /* binding */ forkAPI,\n/* harmony export */   \"getAPIVersion\": () => /* binding */ getAPIVersion\n/* harmony export */ });\n/* harmony import */ var _libs_usfunc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../libs/usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _libs_permissions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../libs/permissions */ \"./src/libs/permissions.ts\");\n/* harmony import */ var _libs_native__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../libs/native */ \"./src/libs/native.js\");\n/* harmony import */ var _libs_codeload__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../libs/codeload */ \"./src/libs/codeload.ts\");\n/* harmony import */ var _libs_configpage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../libs/configpage */ \"./src/libs/configpage.ts\");\n/* harmony import */ var _STDEVT__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./STDEVT */ \"./src/api/STDEVT.js\");\n/* harmony import */ var _craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../craftmcbbs/craft-ui */ \"./src/craftmcbbs/craft-ui.js\");\n/* harmony import */ var _libs_crossorigin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../libs/crossorigin */ \"./src/libs/crossorigin.ts\");\n;\n\n\n\n\n\n\n\nconst ML_VERSION = 2;\nconst GM = (0,_libs_native__WEBPACK_IMPORTED_MODULE_2__.getGM)();\nvar all = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"loader.all\", {});\nfunction forkAPI(id) {\n    return new MCBBSAPI(id);\n}\nfunction assert(value) {\n    if (!value)\n        throw new Error(\"Assertion failed!\");\n}\n(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.setWindowProperty)(\"MIDT\", {});\nclass Config {\n    constructor(internalConfig) {\n        this.internalConfig = Object.freeze(internalConfig);\n    }\n    get(dval) {\n        return _libs_configpage__WEBPACK_IMPORTED_MODULE_4__.default.getConfigVal(this.internalConfig.id, this.internalConfig.storageId, dval);\n    }\n    set(val) {\n        _libs_configpage__WEBPACK_IMPORTED_MODULE_4__.default.setConfigVal(this.internalConfig.id, this.internalConfig.storageId, val);\n    }\n}\nclass Common {\n    static acquireCommon() {\n        return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"VERHASH\") ? new Common() : null;\n    }\n    showOfflineWindow(k, element, menuv) {\n        (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_6__.showOfflineWindow)(k, element, menuv);\n    }\n    loadExtra(script, callback) {\n        (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"$F\")(\"__onExtraScriptLoaded\", [callback], script);\n    }\n}\nclass MCBBSAPI {\n    constructor(id) {\n        this.local = {};\n        this.LoaderEvent = _STDEVT__WEBPACK_IMPORTED_MODULE_5__.LoaderEvent;\n        this.getAPIVersion = getAPIVersion;\n        this.download = GM.GM_download;\n        this.export_ = (obj) => {\n            moduleExport(this.id, obj);\n        };\n        this.import_ = moduleImport;\n        this.GM_download = GM.GM_download;\n        this.GM_setValue = this.storeData;\n        this.GM_getValue = this.getData;\n        this.sysNotification = GM.GM_notification;\n        this.GIDURL = _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL;\n        this.id = id;\n        let gid = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"loader.all\").gid;\n        this.gid = gid ? Object.freeze(_libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.fromString(gid)) : _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.NIL;\n        if ((0,_libs_permissions__WEBPACK_IMPORTED_MODULE_1__.hasPermission)(id, \"loader:core\")) {\n            this.eval = _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.coreModEval;\n            this.GM = (0,_libs_native__WEBPACK_IMPORTED_MODULE_2__.getGM)();\n        }\n        else {\n            this.eval = undefined;\n            this.GM = undefined;\n        }\n    }\n    get $() {\n        return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"jq\");\n    }\n    storeData(k, v) {\n        storeData(this.id + \"-\" + k, v);\n    }\n    createConfig(stgid, name, type, desc, check = (arg) => undefined, value = \"\") {\n        assert(typeof stgid == \"string\");\n        assert(typeof name == \"string\");\n        assert(typeof type == \"string\");\n        assert(typeof desc == \"string\");\n        assert(typeof check == \"function\");\n        assert(typeof value == \"string\");\n        return new Config(_libs_configpage__WEBPACK_IMPORTED_MODULE_4__.default.createConfigItem(this.id, stgid, name, type, desc, check, value));\n    }\n    getConfigVal(stgid, dval) {\n        assert(typeof stgid == \"string\");\n        return _libs_configpage__WEBPACK_IMPORTED_MODULE_4__.default.getConfigVal(this.id, stgid, dval);\n    }\n    setConfigVal(stgid, value) {\n        assert(typeof stgid == \"string\");\n        _libs_configpage__WEBPACK_IMPORTED_MODULE_4__.default.setConfigVal(this.id, stgid, value);\n    }\n    getData(k, dv) {\n        assert(typeof k == \"string\");\n        return getData(this.id + \"-\" + k, dv);\n    }\n    mountJS(src, onsucceed = () => { }, onerror = r => { }) {\n        assert(typeof src == \"string\" || src instanceof _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL);\n        if (typeof src == 'string' && !/^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g.test(src))\n            src = _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.fromString(src);\n        if (src == _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.NIL || src == '')\n            onerror(\"无效地址\");\n        if (src instanceof _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL)\n            src = src.asString();\n        (0,_libs_crossorigin__WEBPACK_IMPORTED_MODULE_7__.getCrossOriginData)(src, onerror, (msg) => {\n            let script = document.createElement(\"script\");\n            script.text = msg;\n            script.onload = onsucceed;\n            document.head.appendChild(script);\n        }, \"plain\");\n    }\n    mountCSS(src, onsucceed = () => { }, onerror = r => { }) {\n        assert(typeof src == \"string\" || src instanceof _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL);\n        if (typeof src == 'string' && !/^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g.test(src))\n            src = _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.fromString(src);\n        if (src == _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL.NIL || src == '')\n            onerror(\"无效地址\");\n        if (src instanceof _libs_codeload__WEBPACK_IMPORTED_MODULE_3__.GIDURL)\n            src = src.asString();\n        (0,_libs_crossorigin__WEBPACK_IMPORTED_MODULE_7__.getCrossOriginData)(src, onerror, (msg) => {\n            let style = document.createElement(\"style\");\n            style.innerHTML = msg;\n            style.onload = onsucceed;\n            document.head.appendChild(style);\n        }, \"plain\");\n    }\n    popInfo(msg) {\n        assert(typeof msg == \"string\");\n        (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_6__.showSuccess)(msg);\n    }\n    isModRunning(id) {\n        assert(typeof id == \"string\");\n        return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"loader.sortedModuleList\").indexOf(id) >= 0;\n    }\n    crossOriginRequest(details) {\n        return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMXmlhttpRequest)(details);\n    }\n    aquireCommon() {\n        return Common.acquireCommon();\n    }\n}\nfunction getAPIVersion() {\n    return ML_VERSION;\n}\nfunction moduleExport(idIn, obj) {\n    (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.setWindowProperty)(`module-export-${idIn}`, obj);\n    notifyExport(idIn);\n}\nfunction moduleImport(id, callback) {\n    if ((0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(`module-export-${id}`)) {\n        callback((0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(`module-export-${id}`));\n    }\n    else {\n        var origin = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\")[id];\n        if (origin) {\n            (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\")[id] = (obj) => {\n                origin(obj);\n                callback(obj);\n            };\n        }\n        else {\n            (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\")[id] = callback;\n        }\n    }\n    return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"loader.sortedModuleList\").indexOf(id) >= 0;\n}\nfunction notifyExport(id) {\n    for (var x in (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\")) {\n        if (x == id) {\n            (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\")[x]((0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(`module-export-${id}`));\n            var m = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"MIDT\");\n            delete m[x];\n            (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.setWindowProperty)(\"MIDT\", m);\n        }\n    }\n}\nfunction storeData(tag, data) {\n    (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMSetValue)(\"data-\" + tag, data);\n}\nfunction getData(tag, defaultVal) {\n    return (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"data-\" + tag, defaultVal);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL1NUREFQSS50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2FwaS9TVERBUEkudHM/ZWJjMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXRXaW5kb3dQcm9wZXJ0eSxcbiAgR01HZXRWYWx1ZSxcbiAgR01TZXRWYWx1ZSxcbiAgR01YbWxodHRwUmVxdWVzdCxcbiAgc2V0V2luZG93UHJvcGVydHksXG59IGZyb20gXCIuLi9saWJzL3VzZnVuY1wiO1xuaW1wb3J0IHsgaGFzUGVybWlzc2lvbiB9IGZyb20gXCIuLi9saWJzL3Blcm1pc3Npb25zXCI7XG5pbXBvcnQgeyBnZXRHTSB9IGZyb20gXCIuLi9saWJzL25hdGl2ZVwiO1xuaW1wb3J0IHsgY29yZU1vZEV2YWwsIEdJRFVSTCB9IGZyb20gXCIuLi9saWJzL2NvZGVsb2FkXCI7XG5pbXBvcnQgY29uZmlncGFnZSBmcm9tIFwiLi4vbGlicy9jb25maWdwYWdlXCI7XG5pbXBvcnQgeyBMb2FkZXJFdmVudCB9IGZyb20gXCIuL1NUREVWVFwiO1xuaW1wb3J0IHsgc2hvd0RpYWxvZ0Z1bGwsIHNob3dPZmZsaW5lV2luZG93LCBzaG93U3VjY2VzcyB9IGZyb20gXCIuLi9jcmFmdG1jYmJzL2NyYWZ0LXVpXCI7XG5pbXBvcnQgeyBnZXRDcm9zc09yaWdpbkRhdGEgfSBmcm9tIFwiLi4vbGlicy9jcm9zc29yaWdpblwiO1xuXG5pbnRlcmZhY2UgSW50ZXJuYWxDb25maWcge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIHN0Z2lkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzYzogc3RyaW5nO1xuICBjaGVjazogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgdmFsdWU6IHN0cmluZztcbn1cblxuY29uc3QgTUxfVkVSU0lPTiA9IDI7XG5jb25zdCBHTTogYW55ID0gZ2V0R00oKTtcbnZhciBhbGw6IGFueSA9IEdNR2V0VmFsdWUoXCJsb2FkZXIuYWxsXCIsIHt9KTtcblxuZnVuY3Rpb24gZm9ya0FQSShpZDogc3RyaW5nKSB7XG4gIHJldHVybiBuZXcgTUNCQlNBUEkoaWQpO1xufVxuXG5mdW5jdGlvbiBhc3NlcnQodmFsdWU6IGFueSk6IHZvaWQge1xuICBpZighdmFsdWUpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQXNzZXJ0aW9uIGZhaWxlZCFcIik7XG59XG5cbi8vIOaooeWdl+WvvOWFpeWvvOWHulxuc2V0V2luZG93UHJvcGVydHkoXCJNSURUXCIsIHt9KTtcblxuLyoqXG4gKiDnu5nmqKHlnZfnmoTljZXkuKrnmoTphY3nva5cbiAqL1xuY2xhc3MgQ29uZmlnIHtcbiAgcHJpdmF0ZSBpbnRlcm5hbENvbmZpZzogYW55O1xuICBjb25zdHJ1Y3RvcihpbnRlcm5hbENvbmZpZzogYW55KSB7XG4gICAgdGhpcy5pbnRlcm5hbENvbmZpZyA9IE9iamVjdC5mcmVlemUoaW50ZXJuYWxDb25maWcpO1xuICB9XG5cbiAgZ2V0KGR2YWw/OiBhbnkpIHtcbiAgICByZXR1cm4gY29uZmlncGFnZS5nZXRDb25maWdWYWwodGhpcy5pbnRlcm5hbENvbmZpZy5pZCwgdGhpcy5pbnRlcm5hbENvbmZpZy5zdG9yYWdlSWQsIGR2YWwpO1xuICB9XG5cbiAgc2V0KHZhbDogYW55KSB7XG4gICAgY29uZmlncGFnZS5zZXRDb25maWdWYWwodGhpcy5pbnRlcm5hbENvbmZpZy5pZCwgdGhpcy5pbnRlcm5hbENvbmZpZy5zdG9yYWdlSWQsIHZhbCk7XG4gIH1cbn1cblxuLyoqXG4gKiDlr7ltY2Jic+eahGNvbW1vbi5qc+eahOWwgeijhVxuICovXG5jbGFzcyBDb21tb24ge1xuICBwdWJsaWMgc3RhdGljIGFjcXVpcmVDb21tb24oKTogQ29tbW9uIHwgbnVsbCB7XG4gICAgcmV0dXJuIGdldFdpbmRvd1Byb3BlcnR5KFwiVkVSSEFTSFwiKSA/IG5ldyBDb21tb24oKSA6IG51bGw7Ly8g5Zug5Li65pyJ5Lqb6aG16Z2iY29tbW9uLmpz5LiN5Yqg6L29XG4gIH1cblxuICBwdWJsaWMgc2hvd09mZmxpbmVXaW5kb3coazogc3RyaW5nLCBlbGVtZW50OiBIVE1MRWxlbWVudCB8IFRleHQgfCBzdHJpbmcsIG1lbnV2Pzogb2JqZWN0KSB7XG4gICAgc2hvd09mZmxpbmVXaW5kb3coaywgZWxlbWVudCwgbWVudXYpO1xuICB9XG5cbiAgcHVibGljIGxvYWRFeHRyYShzY3JpcHQ6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICBnZXRXaW5kb3dQcm9wZXJ0eShcIiRGXCIpKFwiX19vbkV4dHJhU2NyaXB0TG9hZGVkXCIsIFtjYWxsYmFja10sIHNjcmlwdCk7XG4gIH1cbn1cblxuY2xhc3MgTUNCQlNBUEkge1xuICBwdWJsaWMgaWQ6IHN0cmluZztcbiAgcHVibGljIGxvY2FsOiBPYmplY3QgPSB7fTtcbiAgcHVibGljIExvYWRlckV2ZW50ID0gTG9hZGVyRXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoaWQ6IHN0cmluZykge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICBsZXQgZ2lkID0gR01HZXRWYWx1ZShcImxvYWRlci5hbGxcIikuZ2lkO1xuICAgIHRoaXMuZ2lkID0gZ2lkID8gT2JqZWN0LmZyZWV6ZShHSURVUkwuZnJvbVN0cmluZyhnaWQpKSA6IEdJRFVSTC5OSUw7XG4gICAgaWYgKGhhc1Blcm1pc3Npb24oaWQsIFwibG9hZGVyOmNvcmVcIikpIHtcbiAgICAgIHRoaXMuZXZhbCA9IGNvcmVNb2RFdmFsO1xuICAgICAgdGhpcy5HTSA9IGdldEdNKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZhbCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuR00gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEFQSVZlcnNpb24gPSBnZXRBUElWZXJzaW9uO1xuICBwdWJsaWMgZG93bmxvYWQgPSBHTS5HTV9kb3dubG9hZDtcbiAgcHVibGljIGV4cG9ydF8gPSAob2JqOiBhbnkpID0+IHtcbiAgICBtb2R1bGVFeHBvcnQodGhpcy5pZCwgb2JqKTtcbiAgfTtcbiAgcHVibGljIGltcG9ydF8gPSBtb2R1bGVJbXBvcnQ7XG5cbiAgcHVibGljIGdldCAkKCkge1xuICAgIHJldHVybiBnZXRXaW5kb3dQcm9wZXJ0eShcImpxXCIpO1xuICB9XG5cbiAgLy8gUG9seWZpbGxzXG4gIHB1YmxpYyBHTV9kb3dubG9hZCA9IEdNLkdNX2Rvd25sb2FkO1xuICBwdWJsaWMgR01fc2V0VmFsdWUgPSB0aGlzLnN0b3JlRGF0YTtcbiAgcHVibGljIEdNX2dldFZhbHVlID0gdGhpcy5nZXREYXRhO1xuXG4gIHB1YmxpYyBzdG9yZURhdGEoazogc3RyaW5nLCB2OiBhbnkpIHtcbiAgICBzdG9yZURhdGEodGhpcy5pZCArIFwiLVwiICsgaywgdik7XG4gIH1cblxuICAvLyDov5nkuKrmlrnms5Xlj4LmlbDlpKrlpJrvvIzlupTorr7ms5Xlh4/lsJHkuIDkuptcbiAgcHVibGljIGNyZWF0ZUNvbmZpZyhcbiAgICBzdGdpZDogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgZGVzYzogc3RyaW5nLFxuICAgIGNoZWNrOiAoYXJnOiBzdHJpbmcpID0+IHN0cmluZyB8IHVuZGVmaW5lZCA9IChhcmcpID0+IHVuZGVmaW5lZCxcbiAgICB2YWx1ZTogc3RyaW5nID0gXCJcIlxuICApIHtcbiAgICBhc3NlcnQodHlwZW9mIHN0Z2lkID09IFwic3RyaW5nXCIpO1xuICAgIGFzc2VydCh0eXBlb2YgbmFtZSA9PSBcInN0cmluZ1wiKTtcbiAgICBhc3NlcnQodHlwZW9mIHR5cGUgPT0gXCJzdHJpbmdcIik7XG4gICAgYXNzZXJ0KHR5cGVvZiBkZXNjID09IFwic3RyaW5nXCIpO1xuICAgIGFzc2VydCh0eXBlb2YgY2hlY2sgPT0gXCJmdW5jdGlvblwiKTtcbiAgICBhc3NlcnQodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpO1xuICAgIHJldHVybiBuZXcgQ29uZmlnKGNvbmZpZ3BhZ2UuY3JlYXRlQ29uZmlnSXRlbSh0aGlzLmlkLCBzdGdpZCwgbmFtZSwgdHlwZSwgZGVzYywgY2hlY2ssIHZhbHVlKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29uZmlnVmFsKHN0Z2lkOiBzdHJpbmcsIGR2YWw/OiBhbnkpIHtcbiAgICBhc3NlcnQodHlwZW9mIHN0Z2lkID09IFwic3RyaW5nXCIpO1xuICAgIHJldHVybiBjb25maWdwYWdlLmdldENvbmZpZ1ZhbCh0aGlzLmlkLCBzdGdpZCwgZHZhbCk7IC8vIOS5i+WJjeeahOajgOafpeaWueazleS8mumAoOaIkOm7mOiupOWAvOS4umZhbHNl5oiW6ICFXCJcIuaXtuWksei0pVxuICB9XG5cbiAgcHVibGljIHNldENvbmZpZ1ZhbChzdGdpZDogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBzdGdpZCA9PSBcInN0cmluZ1wiKTtcbiAgICBjb25maWdwYWdlLnNldENvbmZpZ1ZhbCh0aGlzLmlkLCBzdGdpZCwgdmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGdldERhdGEoazogc3RyaW5nLCBkdjogYW55KSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBrID09IFwic3RyaW5nXCIpO1xuICAgIHJldHVybiBnZXREYXRhKHRoaXMuaWQgKyBcIi1cIiArIGssIGR2KTtcbiAgfVxuXG4gIHB1YmxpYyBtb3VudEpTKHNyYzogc3RyaW5nIHwgR0lEVVJMLCBvbnN1Y2NlZWQ6ICgpID0+IHZvaWQgPSAoKSA9PiB7fSwgb25lcnJvcjogKHJlYXNvbjogc3RyaW5nKSA9PiB2b2lkID0gciA9PiB7fSkge1xuICAgIGFzc2VydCh0eXBlb2Ygc3JjID09IFwic3RyaW5nXCIgfHwgc3JjIGluc3RhbmNlb2YgR0lEVVJMKTtcbiAgICBpZih0eXBlb2Ygc3JjID09ICdzdHJpbmcnICYmICEvXigoZmlsZXxodHRwc3xodHRwfGZ0cHxydHNwfG1tcyk/OlxcL1xcLylbXlxcc10rL2cudGVzdChzcmMpKVxuICAgICAgc3JjID0gR0lEVVJMLmZyb21TdHJpbmcoc3JjKTtcbiAgICBpZihzcmMgPT0gR0lEVVJMLk5JTCB8fCBzcmMgPT0gJycpXG4gICAgICBvbmVycm9yKFwi5peg5pWI5Zyw5Z2AXCIpO1xuICAgIGlmKHNyYyBpbnN0YW5jZW9mIEdJRFVSTClcbiAgICAgIHNyYyA9IHNyYy5hc1N0cmluZygpO1xuICAgIGdldENyb3NzT3JpZ2luRGF0YShzcmMsIG9uZXJyb3IsIChtc2cpID0+IHtcbiAgICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgc2NyaXB0LnRleHQgPSBtc2c7XG4gICAgICBzY3JpcHQub25sb2FkID0gb25zdWNjZWVkO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIH0sIFwicGxhaW5cIik7XG4gIH1cblxuICBwdWJsaWMgbW91bnRDU1Moc3JjOiBzdHJpbmcgfCBHSURVUkwsIG9uc3VjY2VlZDogKCkgPT4gdm9pZCA9ICgpID0+IHt9LCBvbmVycm9yOiAocmVhc29uOiBzdHJpbmcpID0+IHZvaWQgPSByID0+IHt9KSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBzcmMgPT0gXCJzdHJpbmdcIiB8fCBzcmMgaW5zdGFuY2VvZiBHSURVUkwpO1xuICAgIGlmKHR5cGVvZiBzcmMgPT0gJ3N0cmluZycgJiYgIS9eKChmaWxlfGh0dHBzfGh0dHB8ZnRwfHJ0c3B8bW1zKT86XFwvXFwvKVteXFxzXSsvZy50ZXN0KHNyYykpXG4gICAgICBzcmMgPSBHSURVUkwuZnJvbVN0cmluZyhzcmMpO1xuICAgIGlmKHNyYyA9PSBHSURVUkwuTklMIHx8IHNyYyA9PSAnJylcbiAgICAgIG9uZXJyb3IoXCLml6DmlYjlnLDlnYBcIik7XG4gICAgaWYoc3JjIGluc3RhbmNlb2YgR0lEVVJMKVxuICAgICAgc3JjID0gc3JjLmFzU3RyaW5nKCk7XG4gICAgZ2V0Q3Jvc3NPcmlnaW5EYXRhKHNyYywgb25lcnJvciwgKG1zZykgPT4ge1xuICAgICAgbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgc3R5bGUuaW5uZXJIVE1MID0gbXNnO1xuICAgICAgc3R5bGUub25sb2FkID0gb25zdWNjZWVkO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfSwgXCJwbGFpblwiKTtcbiAgfVxuXG4gIHB1YmxpYyBwb3BJbmZvKG1zZzogc3RyaW5nKSB7XG4gICAgYXNzZXJ0KHR5cGVvZiBtc2cgPT0gXCJzdHJpbmdcIik7XG4gICAgc2hvd1N1Y2Nlc3MobXNnKTsvLyDov5nkuKrkuJzopb/mmoLml7bov5nmoLdcbiAgfVxuXG4gIHB1YmxpYyBpc01vZFJ1bm5pbmcoaWQ6IHN0cmluZykge1xuICAgIGFzc2VydCh0eXBlb2YgaWQgPT0gXCJzdHJpbmdcIik7XG4gICAgcmV0dXJuIEdNR2V0VmFsdWUoXCJsb2FkZXIuc29ydGVkTW9kdWxlTGlzdFwiKS5pbmRleE9mKGlkKSA+PSAwO1xuICB9XG5cbiAgcHVibGljIGNyb3NzT3JpZ2luUmVxdWVzdChkZXRhaWxzOiBhbnkpOiB7YWJvcnQ6ICgpID0+IHZvaWR9IHtcbiAgICByZXR1cm4gR01YbWxodHRwUmVxdWVzdChkZXRhaWxzKTtcbiAgfVxuXG4gIHB1YmxpYyBhcXVpcmVDb21tb24oKSB7XG4gICAgcmV0dXJuIENvbW1vbi5hY3F1aXJlQ29tbW9uKCk7XG4gIH1cblxuICBwdWJsaWMgc3lzTm90aWZpY2F0aW9uID0gR00uR01fbm90aWZpY2F0aW9uO1xuICBwdWJsaWMgR007XG4gIHB1YmxpYyBldmFsO1xuICBwdWJsaWMgR0lEVVJMID0gR0lEVVJMO1xuICBwdWJsaWMgZ2lkOiBHSURVUkw7XG59XG5cbi8vIOWunueOsOmDqOWIhlxuZnVuY3Rpb24gZ2V0QVBJVmVyc2lvbigpIHtcbiAgcmV0dXJuIE1MX1ZFUlNJT047XG59XG5cbmZ1bmN0aW9uIG1vZHVsZUV4cG9ydChpZEluOiBzdHJpbmcsIG9iajogYW55KSB7XG4gIHNldFdpbmRvd1Byb3BlcnR5KGBtb2R1bGUtZXhwb3J0LSR7aWRJbn1gLCBvYmopO1xuICBub3RpZnlFeHBvcnQoaWRJbik7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZUltcG9ydChpZDogc3RyaW5nLCBjYWxsYmFjazogKGFyZzogYW55KSA9PiB2b2lkKTogYm9vbGVhbiB7XG4gIGlmIChnZXRXaW5kb3dQcm9wZXJ0eShgbW9kdWxlLWV4cG9ydC0ke2lkfWApKSB7XG4gICAgY2FsbGJhY2soZ2V0V2luZG93UHJvcGVydHkoYG1vZHVsZS1leHBvcnQtJHtpZH1gKSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIG9yaWdpbiA9IGdldFdpbmRvd1Byb3BlcnR5KFwiTUlEVFwiKVtpZF07XG4gICAgaWYgKG9yaWdpbikge1xuICAgICAgZ2V0V2luZG93UHJvcGVydHkoXCJNSURUXCIpW2lkXSA9IChvYmo6IGFueSkgPT4ge1xuICAgICAgICBvcmlnaW4ob2JqKTtcbiAgICAgICAgY2FsbGJhY2sob2JqKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGdldFdpbmRvd1Byb3BlcnR5KFwiTUlEVFwiKVtpZF0gPSBjYWxsYmFjaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIEdNR2V0VmFsdWUoXCJsb2FkZXIuc29ydGVkTW9kdWxlTGlzdFwiKS5pbmRleE9mKGlkKSA+PSAwOyAvLyDorqnooqvosIPnlKjogIXnn6XpgZPmmK/lkKZpbXBvcnTliLBcbn1cblxuZnVuY3Rpb24gbm90aWZ5RXhwb3J0KGlkOiBzdHJpbmcpIHtcbiAgZm9yICh2YXIgeCBpbiBnZXRXaW5kb3dQcm9wZXJ0eShcIk1JRFRcIikpIHtcbiAgICBpZiAoeCA9PSBpZCkge1xuICAgICAgZ2V0V2luZG93UHJvcGVydHkoXCJNSURUXCIpW3hdKGdldFdpbmRvd1Byb3BlcnR5KGBtb2R1bGUtZXhwb3J0LSR7aWR9YCkpO1xuICAgICAgdmFyIG0gPSBnZXRXaW5kb3dQcm9wZXJ0eShcIk1JRFRcIik7XG4gICAgICBkZWxldGUgbVt4XTtcbiAgICAgIHNldFdpbmRvd1Byb3BlcnR5KFwiTUlEVFwiLCBtKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RvcmVEYXRhKHRhZzogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgR01TZXRWYWx1ZShcImRhdGEtXCIgKyB0YWcsIGRhdGEpO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhKHRhZzogc3RyaW5nLCBkZWZhdWx0VmFsOiBhbnkpOiBhbnkge1xuICByZXR1cm4gR01HZXRWYWx1ZShcImRhdGEtXCIgKyB0YWcsIGRlZmF1bHRWYWwpO1xufVxuXG5leHBvcnQgeyBmb3JrQVBJLCBnZXRBUElWZXJzaW9uLCBJbnRlcm5hbENvbmZpZyB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFIQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBeUZBO0FBR0E7QUF0SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBR0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQU9BO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/STDAPI.ts\n");

/***/ }),

/***/ "./src/libs/codeload.ts":
/*!******************************!*\
  !*** ./src/libs/codeload.ts ***!
  \******************************/
/*! namespace exports */
/*! export GIDURL [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export coreModEval [provided] [no usage info] [missing usage info prevents renaming] */
/*! export deleteModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getDependencyError [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getTmpDisabled [provided] [no usage info] [missing usage info prevents renaming] */
/*! export installFromGID [provided] [no usage info] [missing usage info prevents renaming] */
/*! export installFromUrl [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isDependencySolved [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isDirty [provided] [no usage info] [missing usage info prevents renaming] */
/*! export markDirty [provided] [no usage info] [missing usage info prevents renaming] */
/*! export mountCode [provided] [no usage info] [missing usage info prevents renaming] */
/*! export parseMeta [provided] [no usage info] [missing usage info prevents renaming] */
/*! export resortDependency [provided] [no usage info] [missing usage info prevents renaming] */
/*! export unmountCode [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GIDURL\": () => /* binding */ GIDURL,\n/* harmony export */   \"addModule\": () => /* binding */ addModule,\n/* harmony export */   \"mountCode\": () => /* binding */ mountCode,\n/* harmony export */   \"deleteModule\": () => /* binding */ deleteModule,\n/* harmony export */   \"unmountCode\": () => /* binding */ unmountCode,\n/* harmony export */   \"installFromUrl\": () => /* binding */ installFromUrl,\n/* harmony export */   \"parseMeta\": () => /* binding */ parseMeta,\n/* harmony export */   \"isDirty\": () => /* binding */ isDirty,\n/* harmony export */   \"markDirty\": () => /* binding */ markDirty,\n/* harmony export */   \"coreModEval\": () => /* binding */ coreModEval,\n/* harmony export */   \"resortDependency\": () => /* binding */ resortDependency,\n/* harmony export */   \"getTmpDisabled\": () => /* binding */ getTmpDisabled,\n/* harmony export */   \"getDependencyError\": () => /* binding */ getDependencyError,\n/* harmony export */   \"isDependencySolved\": () => /* binding */ isDependencySolved,\n/* harmony export */   \"installFromGID\": () => /* binding */ installFromGID\n/* harmony export */ });\n/* harmony import */ var _api_STDAPI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/STDAPI */ \"./src/api/STDAPI.ts\");\n/* harmony import */ var _encrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./encrypt */ \"./src/libs/encrypt.ts\");\n/* harmony import */ var _native__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./native */ \"./src/libs/native.js\");\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./manager */ \"./src/libs/manager.ts\");\n/* harmony import */ var _static__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./static */ \"./src/libs/static.ts\");\n/* harmony import */ var _crossorigin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./crossorigin */ \"./src/libs/crossorigin.ts\");\n/* harmony import */ var _craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../craftmcbbs/craft-ui */ \"./src/craftmcbbs/craft-ui.js\");\n/* harmony import */ var _domutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./domutils */ \"./src/libs/domutils.ts\");\n;\n\n\n\n\n\n\n\n\nclass GIDURL {\n    constructor(service, version, repo, file, provider, root = GIDURL.NIL) {\n        this.service = service == '~' ? root.service : service;\n        this.version = version == '~' ? root.version : version;\n        this.repo = repo == '~' ? root.repo : repo;\n        this.file = file == '~' ? root.file : file;\n        this.provider = provider == '~' ? root.provider : provider;\n    }\n    static fromString(str, root = GIDURL.NIL) {\n        let strs = str.split(\":\");\n        switch (strs.length) {\n            case 1:\n                return new GIDURL(\"github\", \"\", str, str, \"MCBBS-Loader\", root);\n            case 2:\n                return new GIDURL(\"github\", \"\", strs[1], strs[1], strs[0], root);\n            case 3:\n                return new GIDURL(\"github\", \"\", strs[1], strs[2], strs[0], root);\n            case 4:\n                return new GIDURL(\"github\", strs[3], strs[1], strs[2], strs[0], root);\n            case 5:\n                return new GIDURL(strs[0], strs[4], strs[2], strs[3], strs[1], root);\n            default:\n                return GIDURL.NIL;\n        }\n    }\n    getAsURL(extname = \".js\") {\n        return this.service == \"github\" ?\n            `https://cdn.jsdelivr.net/gh/${this.provider}/` +\n                `${this.repo}${this.version ? '@' : ''}${this.version}/${this.file}${extname}` :\n            this.service == \"gitee\" ?\n                `https://gitee.com/${this.provider}/${this.repo}/raw/${this.version}/${this.file}${extname}` : \"\";\n    }\n    asString() {\n        return [this.service, this.provider, this.repo, this.file, this.version].join(':');\n    }\n}\nGIDURL.NIL = new GIDURL(\"\", \"\", \"\", \"\", \"\", null);\nconst STRING_API_VERSION = String((0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.getAPIVersion)());\nlet dirty = false, globalDependencyError = null, globalTmpDisabled = null;\nfunction getTmpDisabled() {\n    return globalTmpDisabled == null ? globalTmpDisabled = (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.tmpDisabled\", []) : globalTmpDisabled;\n}\nfunction getDependencyError() {\n    return globalDependencyError == null ?\n        globalDependencyError = (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.dependencyError\", \"\") : globalDependencyError;\n}\nfunction isDependencySolved() {\n    return !getDependencyError().length;\n}\nfunction resortDependency() {\n    return resortDependencyInternal((0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.all\", {}), \"\", []);\n}\nfunction resortDependencyInternal(all, dependencyError, tmpDisabled) {\n    const mapNil = {};\n    let fixRaw = (id, raw) => {\n        raw.beforeHead = mapNil;\n        raw.afterHead = mapNil;\n        raw.id = id;\n        return raw;\n    };\n    let dependencies = new Map();\n    let stack = [];\n    let sortedList = [];\n    let toDisable = new Set();\n    for (let [id, enabled] of Object.entries(all)) {\n        if (enabled)\n            dependencies.set(id, fixRaw(id, JSON.parse((0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"depend-\" + id, \"{}\"))));\n        if (((0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"meta-\" + id, {}).apiVersion || (0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.getAPIVersion)()) != (0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.getAPIVersion)()) {\n            deleteModule(id, () => {\n                console.log(\"[MCBBS Loader] 由于 API 版本不兼容，移除了 ID 为 \" + id + \" 的脚本。\\n如有需要，你可以重新安装。\");\n                (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_7__.showPopper)(\"[MCBBS Loader] 由于 API 版本不兼容，移除了 ID 为 \" + id + \" 的脚本。\\n如有需要，你可以重新安装。\");\n            });\n        }\n    }\n    let insert = (before, after) => {\n        let node = {\n            before: before,\n            after: after,\n            beforeNext: before.beforeHead,\n            afterNext: after.afterHead,\n            beforePrev: mapNil,\n            afterPrev: mapNil,\n        };\n        node.beforeNext.beforePrev = node.afterNext.afterPrev = node;\n        after.afterHead = before.beforeHead = node;\n    };\n    let unlink = (node) => {\n        node.afterNext.afterPrev = node.afterPrev;\n        node.beforeNext.beforePrev = node.beforePrev;\n        node.afterPrev.afterNext = node.afterNext;\n        node.beforePrev.beforeNext = node.beforeNext;\n        if (node === node.after.afterHead)\n            node.after.afterHead = node.afterNext;\n        if (node === node.before.beforeHead)\n            node.before.beforeHead = node.beforeNext;\n        if (mapNil === node.after.afterHead)\n            stack.push(node.after);\n    };\n    dependencies.forEach((v, k) => {\n        let depend = v.depend;\n        if (depend instanceof Array) {\n            depend.forEach(e => {\n                if (!dependencies.get(e)) {\n                    dependencyError += `${k}依赖${e}，但是后者未安装或未启用。\\n`;\n                    toDisable.add(k);\n                }\n            });\n        }\n        let before = v.before;\n        if (before instanceof Array) {\n            before.forEach((e) => {\n                let target = dependencies.get(e);\n                if (target)\n                    insert(v, target);\n            });\n        }\n        let after = v.after;\n        if (after instanceof Array) {\n            after.forEach((e) => {\n                let target = dependencies.get(e);\n                if (target)\n                    insert(target, v);\n            });\n        }\n    });\n    dependencies.forEach((v) => {\n        if (v.afterHead === mapNil)\n            stack.push(v);\n    });\n    while (stack.length) {\n        let process = stack.pop();\n        sortedList.push(process.id);\n        while (mapNil != process.beforeHead)\n            unlink(process.beforeHead);\n    }\n    dependencies.forEach(v => {\n        if (v.beforeHead != mapNil) {\n            toDisable.add(v.id);\n            dependencyError += v.id + \"要求在\";\n            let node = v.beforeHead;\n            while (node != mapNil) {\n                dependencyError += node.after.id + (node.beforeNext === mapNil ? \"\" : \",\");\n                node = node.beforeNext;\n            }\n            dependencyError += \"之前加载，然而此要求无法满足。\\n\";\n        }\n    });\n    let toSerialize = [];\n    toDisable.forEach((v) => {\n        toSerialize.push(v);\n        delete all[v];\n    });\n    if (toSerialize.length) {\n        dependencyError += \"已临时停用\" + toSerialize.toString() + \"\\n\";\n        return resortDependencyInternal(all, dependencyError, tmpDisabled.concat(toSerialize));\n    }\n    else {\n        globalTmpDisabled = tmpDisabled;\n        globalDependencyError = dependencyError;\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"loader.sortedModuleList\", sortedList);\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"loader.dependencyError\", dependencyError);\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"loader.tmpDisabled\", tmpDisabled);\n        return sortedList;\n    }\n    ;\n}\nfunction verifyId(id) {\n    return /^[0-9|a-z|A-Z|\\.|_]+$/.test(id);\n}\nfunction addModule(code, gid = GIDURL.NIL) {\n    let isModuleRegex = /\\/\\*( )*MCBBS[ -]*Module/;\n    let ccode = code.trim();\n    if (!isModuleRegex.test(ccode))\n        return \"这不是一个模块\";\n    let dataMap = new Map();\n    parseMeta(ccode, dataMap);\n    let flitBlank = (strarr) => {\n        let newarr = [];\n        for (let str of strarr) {\n            let target = str.trim();\n            if (target.length)\n                newarr.push(target);\n        }\n        return newarr;\n    };\n    let depend = dataMap.get(\"depend\") || \"\", before, after, apiVersion, id = dataMap.get(\"id\");\n    if (id === undefined)\n        return \"未提供 id 数据值\";\n    else if (!verifyId(id))\n        return \"不合要求的 id\";\n    let ins_depend = [], deplocMap = {};\n    for (let d of depend.split(\",\")) {\n        let dep = d.trim();\n        if (!dep.length)\n            continue;\n        if (dep.includes(\"->\")) {\n            let parse = /^([0-9|a-z|A-Z|\\.|_]+) -> ([0-9|a-z|A-Z|\\.|_|:|/|%|@|-]+)$/.exec(dep);\n            if (!parse || parse.length != 3)\n                return \"依赖地址编写格式错误\";\n            ins_depend.push(parse[1]);\n            if (!deplocMap[parse[1]])\n                deplocMap[parse[1]] = [];\n            deplocMap[parse[1]].push(parse[2]);\n        }\n        else {\n            ins_depend.push(dep);\n        }\n    }\n    depend = ins_depend.join(\",\");\n    let obj = {\n        id: id,\n        permissions: dataMap.get(\"permissions\") || \"\",\n        name: _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(dataMap.get(\"name\") || dataMap.get(\"id\")),\n        author: _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(dataMap.get(\"author\") || \"Someone\"),\n        icon: dataMap.get(\"icon\") || _static__WEBPACK_IMPORTED_MODULE_5__.IMG_MCBBS,\n        depend: depend,\n        before: (before = dataMap.get(\"before\") || \"\"),\n        after: (after = dataMap.get(\"after\") || \"\"),\n        description: _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(dataMap.get(\"description\") || \"No description provided.\"),\n        updateURL: dataMap.get(\"updateURL\"),\n        apiVersion: (apiVersion = dataMap.get(\"apiVersion\")),\n        version: dataMap.get(\"version\") ? _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(dataMap.get(\"version\")) : undefined,\n        gid: gid != GIDURL.NIL ? gid.asString() : dataMap.get(\"gid\")\n    };\n    if ((apiVersion || STRING_API_VERSION) != STRING_API_VERSION) {\n        return \"不支持的 API 版本：\" + apiVersion;\n    }\n    if (regMeta(id, obj)) {\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"code-\" + id, ccode);\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"depend-\" + id, JSON.stringify({\n            depend: ins_depend,\n            before: flitBlank(before.split(\",\")),\n            after: flitBlank(after.split(\",\")),\n        }));\n        markDirty();\n        let all = (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.all\", {});\n        for (let dep of ins_depend) {\n            if (all[dep] == undefined) {\n                let tryInstall = () => {\n                    if (deplocMap[dep] && !deplocMap[dep].pending && deplocMap[dep].length) {\n                        deplocMap[dep].pending = true;\n                        let loc = deplocMap[dep].shift();\n                        if (/^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g.test(loc)) {\n                            installFromUrl(loc, (st) => {\n                                _manager__WEBPACK_IMPORTED_MODULE_4__.default.onInstall(st);\n                                deplocMap[dep].pending = false;\n                            }, (reason) => {\n                                _manager__WEBPACK_IMPORTED_MODULE_4__.default.onFailure(reason);\n                                deplocMap[dep].pending = false;\n                                tryInstall();\n                            });\n                        }\n                        else {\n                            installFromGID(GIDURL.fromString(loc, gid), (st) => {\n                                _manager__WEBPACK_IMPORTED_MODULE_4__.default.onInstall(st);\n                                deplocMap[dep].pending = false;\n                            }, (reason) => {\n                                _manager__WEBPACK_IMPORTED_MODULE_4__.default.onFailure(reason);\n                                deplocMap[dep].pending = false;\n                                tryInstall();\n                            });\n                        }\n                    }\n                };\n                tryInstall();\n            }\n        }\n        return dataMap;\n    }\n    else {\n        return \"未知错误\";\n    }\n}\nfunction parseMeta(code, map) {\n    let extractMetaRegex = /(?<=\\/\\*( )*MCBBS[ -]*Module)[\\s\\S]*?(?=\\*\\/)/;\n    let metaarr = code.match(extractMetaRegex) || [];\n    let metas = metaarr[0] || \"\";\n    metas = metas.replace(/\\\\\\n/g, \"\");\n    let allmeta = metas.split(\"\\n\");\n    let isItemRegex = /.+?\\=.*/;\n    let kRegex = /.+?(?=\\=)/;\n    let vRegex = /(?<=\\=).*/;\n    for (let l of allmeta) {\n        if (isItemRegex.test((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.trim)(l))) {\n            let k = ((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.trim)(l).match(kRegex) || [])[0] || \"\";\n            let v = ((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.trim)(l).match(vRegex) || [])[0] || \"\";\n            map.set((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.trim)(k), (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.trim)(v));\n        }\n    }\n}\nfunction regMeta(id, meta) {\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"meta-\" + id, meta);\n    let all = (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.all\", {});\n    try {\n        (0,_native__WEBPACK_IMPORTED_MODULE_2__.setProperty)(all, id, true);\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"loader.all\", all);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}\nfunction mountCode(id, code) {\n    _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.load(() => {\n        let script = document.createElement(\"script\");\n        script.text = `(MCBBS => {${code}})(Object.freeze(window.forkAPI_${(0,_encrypt__WEBPACK_IMPORTED_MODULE_1__.getAPIToken)()}(\"${id}\")))`;\n        script.id = \"code-\" + id;\n        script.onload = () => script.remove();\n        document.body.appendChild(script);\n    });\n}\nfunction unmountCode(id) {\n    _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.load(() => {\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`#code-${id}`).remove();\n    });\n}\nfunction deleteModule(id, callback) {\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMDeleteValue)(\"meta-\" + id);\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMDeleteValue)(\"code-\" + id);\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMDeleteValue)(\"depend-\" + id);\n    let obj = (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMGetValue)(\"loader.all\", {});\n    (0,_native__WEBPACK_IMPORTED_MODULE_2__.setProperty)(obj, id, undefined);\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_3__.GMSetValue)(\"loader.all\", obj);\n    markDirty();\n    callback();\n}\nfunction installFromGID(gid, onsuccess, onerror) {\n    installFromUrl(gid.getAsURL(), onsuccess, onerror, gid);\n}\nfunction installFromUrl(url, onsuccess = () => { }, onerror = () => { }, gid = GIDURL.NIL) {\n    (0,_crossorigin__WEBPACK_IMPORTED_MODULE_6__.getCrossOriginData)(url, () => onerror(\"安装失败，网络请求失败\"), data => {\n        let st = addModule(data, gid);\n        if (typeof st == \"string\")\n            onerror(st);\n        else\n            onsuccess(st);\n        resortDependency();\n    });\n}\nfunction isDirty() {\n    return dirty;\n}\nfunction markDirty() {\n    dirty = true;\n}\nfunction coreModEval(code) {\n    return new Promise((resolve, reject) => {\n        try {\n            eval(code);\n            resolve(0);\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9jb2RlbG9hZC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2xpYnMvY29kZWxvYWQudHM/M2MyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBUElWZXJzaW9uIH0gZnJvbSBcIi4uL2FwaS9TVERBUElcIjtcbmltcG9ydCB7IGdldEFQSVRva2VuIH0gZnJvbSBcIi4vZW5jcnlwdFwiO1xuaW1wb3J0IHsgc2V0UHJvcGVydHkgfSBmcm9tIFwiLi9uYXRpdmVcIjtcbmltcG9ydCB7IEdNRGVsZXRlVmFsdWUsIEdNR2V0VmFsdWUsIEdNU2V0VmFsdWUgfSBmcm9tIFwiLi91c2Z1bmNcIjtcbmltcG9ydCBtYW5hZ2VyIGZyb20gXCIuL21hbmFnZXJcIjtcbmltcG9ydCB7IElNR19NQ0JCUyB9IGZyb20gXCIuL3N0YXRpY1wiO1xuaW1wb3J0IHsgZ2V0Q3Jvc3NPcmlnaW5EYXRhIH0gZnJvbSBcIi4vY3Jvc3NvcmlnaW5cIjtcbmltcG9ydCB7IHNob3dQb3BwZXIgfSBmcm9tIFwiLi4vY3JhZnRtY2Jicy9jcmFmdC11aVwiO1xuaW1wb3J0IHsgRE9NVXRpbHMsIHNlbGVjdCwgdHJpbSB9IGZyb20gXCIuL2RvbXV0aWxzXCI7XG5cbi8vIOino+aekCBHSURcbmNsYXNzIEdJRFVSTCB7XG4gIHN0YXRpYyBOSUwgPSBuZXcgR0lEVVJMKFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIG51bGwpO1xuICBzZXJ2aWNlOiBzdHJpbmc7XG4gIHZlcnNpb246IHN0cmluZztcbiAgcmVwbzogc3RyaW5nO1xuICBmaWxlOiBzdHJpbmc7XG4gIHByb3ZpZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc2VydmljZTogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcsIHJlcG86IHN0cmluZywgZmlsZTogc3RyaW5nLCBwcm92aWRlcjogc3RyaW5nLFxuICAgIHJvb3Q6IEdJRFVSTCB8IG51bGwgPSBHSURVUkwuTklMKSB7XG4gICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZSA9PSAnficgPyByb290IS5zZXJ2aWNlIDogc2VydmljZTtcbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uID09ICd+JyA/IHJvb3QhLnZlcnNpb24gOiB2ZXJzaW9uO1xuICAgIHRoaXMucmVwbyA9IHJlcG8gPT0gJ34nID8gcm9vdCEucmVwbyA6IHJlcG87XG4gICAgdGhpcy5maWxlID0gZmlsZSA9PSAnficgPyByb290IS5maWxlIDogZmlsZTtcbiAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXIgPT0gJ34nID8gcm9vdCEucHJvdmlkZXIgOiBwcm92aWRlcjtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHN0cjogc3RyaW5nLCByb290OiBHSURVUkwgPSBHSURVUkwuTklMKTogR0lEVVJMIHtcbiAgICBsZXQgc3RycyA9IHN0ci5zcGxpdChcIjpcIik7XG4gICAgc3dpdGNoIChzdHJzLmxlbmd0aCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gbmV3IEdJRFVSTChcImdpdGh1YlwiLCBcIlwiLCBzdHIsIHN0ciwgXCJNQ0JCUy1Mb2FkZXJcIiwgcm9vdCk7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBuZXcgR0lEVVJMKFwiZ2l0aHViXCIsIFwiXCIsIHN0cnNbMV0sIHN0cnNbMV0sIHN0cnNbMF0sIHJvb3QpO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gbmV3IEdJRFVSTChcImdpdGh1YlwiLCBcIlwiLCBzdHJzWzFdLCBzdHJzWzJdLCBzdHJzWzBdLCByb290KTtcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgcmV0dXJuIG5ldyBHSURVUkwoXCJnaXRodWJcIiwgc3Ryc1szXSwgc3Ryc1sxXSwgc3Ryc1syXSwgc3Ryc1swXSwgcm9vdCk7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIHJldHVybiBuZXcgR0lEVVJMKHN0cnNbMF0sIHN0cnNbNF0sIHN0cnNbMl0sIHN0cnNbM10sIHN0cnNbMV0sIHJvb3QpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEdJRFVSTC5OSUw7XG4gICAgfVxuICB9XG5cbiAgZ2V0QXNVUkwoZXh0bmFtZTogc3RyaW5nID0gXCIuanNcIik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuc2VydmljZSA9PSBcImdpdGh1YlwiID9cbiAgICAgIGBodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvJHt0aGlzLnByb3ZpZGVyfS9gICtcbiAgICAgIGAke3RoaXMucmVwb30ke3RoaXMudmVyc2lvbiA/ICdAJyA6ICcnfSR7dGhpcy52ZXJzaW9ufS8ke3RoaXMuZmlsZX0ke2V4dG5hbWV9YCA6XG4gICAgICB0aGlzLnNlcnZpY2UgPT0gXCJnaXRlZVwiID9cbiAgICAgICAgYGh0dHBzOi8vZ2l0ZWUuY29tLyR7dGhpcy5wcm92aWRlcn0vJHt0aGlzLnJlcG99L3Jhdy8ke3RoaXMudmVyc2lvbn0vJHt0aGlzLmZpbGV9JHtleHRuYW1lfWAgOiBcIlwiO1xuICB9XG5cbiAgYXNTdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gW3RoaXMuc2VydmljZSwgdGhpcy5wcm92aWRlciwgdGhpcy5yZXBvLCB0aGlzLmZpbGUsIHRoaXMudmVyc2lvbl0uam9pbignOicpO1xuICB9XG59XG5cbmNvbnN0IFNUUklOR19BUElfVkVSU0lPTiA9IFN0cmluZyhnZXRBUElWZXJzaW9uKCkpO1xubGV0IGRpcnR5OiBib29sZWFuID0gZmFsc2UsXG4gIGdsb2JhbERlcGVuZGVuY3lFcnJvcjogc3RyaW5nIHwgbnVsbCA9IG51bGwsIGdsb2JhbFRtcERpc2FibGVkOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsO1xuZnVuY3Rpb24gZ2V0VG1wRGlzYWJsZWQoKTogc3RyaW5nW10ge1xuICByZXR1cm4gZ2xvYmFsVG1wRGlzYWJsZWQgPT0gbnVsbCA/IGdsb2JhbFRtcERpc2FibGVkID0gR01HZXRWYWx1ZShcImxvYWRlci50bXBEaXNhYmxlZFwiLCBbXSkgOiBnbG9iYWxUbXBEaXNhYmxlZDtcbn1cblxuZnVuY3Rpb24gZ2V0RGVwZW5kZW5jeUVycm9yKCk6IHN0cmluZyB7XG4gIHJldHVybiBnbG9iYWxEZXBlbmRlbmN5RXJyb3IgPT0gbnVsbCA/XG4gICAgZ2xvYmFsRGVwZW5kZW5jeUVycm9yID0gR01HZXRWYWx1ZShcImxvYWRlci5kZXBlbmRlbmN5RXJyb3JcIiwgXCJcIikgOiBnbG9iYWxEZXBlbmRlbmN5RXJyb3I7XG59XG5cbmZ1bmN0aW9uIGlzRGVwZW5kZW5jeVNvbHZlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuICFnZXREZXBlbmRlbmN5RXJyb3IoKS5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIHJlc29ydERlcGVuZGVuY3koKTogc3RyaW5nIHwgc3RyaW5nW10ge1xuICByZXR1cm4gcmVzb3J0RGVwZW5kZW5jeUludGVybmFsKEdNR2V0VmFsdWUoXCJsb2FkZXIuYWxsXCIsIHt9KSwgXCJcIiwgW10pO1xufVxuXG5mdW5jdGlvbiByZXNvcnREZXBlbmRlbmN5SW50ZXJuYWwoYWxsOiBhbnksIGRlcGVuZGVuY3lFcnJvcjogc3RyaW5nLCB0bXBEaXNhYmxlZDogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIC8vIOWTqOWFteiKgueCue+8jOeUqOS6juagh+iusOmTvuihqOacq+Wwvu+8jOWPquWGmeS4jeivu++8jOWIneWni+WMluWFqHVuZGVmaW5lZFxuICBjb25zdCBtYXBOaWwgPSB7fTtcbiAgbGV0IGZpeFJhdyA9IChpZDogc3RyaW5nLCByYXc6IGFueSkgPT4ge1xuICAgIHJhdy5iZWZvcmVIZWFkID0gbWFwTmlsO1xuICAgIHJhdy5hZnRlckhlYWQgPSBtYXBOaWw7XG4gICAgcmF3LmlkID0gaWQ7XG4gICAgcmV0dXJuIHJhdztcbiAgfTtcbiAgLy8g6YK75o6l6KGoXG4gIGxldCBkZXBlbmRlbmNpZXMgPSBuZXcgTWFwPHN0cmluZywgb2JqZWN0PigpO1xuICBsZXQgc3RhY2s6IGFueVtdID0gW107XG4gIGxldCBzb3J0ZWRMaXN0ID0gW107XG4gIGxldCB0b0Rpc2FibGU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuXG4gIGZvciAobGV0IFtpZCwgZW5hYmxlZF0gb2YgT2JqZWN0LmVudHJpZXMoYWxsKSkge1xuICAgIGlmIChlbmFibGVkKVxuICAgICAgZGVwZW5kZW5jaWVzLnNldChpZCwgZml4UmF3KGlkLCBKU09OLnBhcnNlKEdNR2V0VmFsdWUoXCJkZXBlbmQtXCIgKyBpZCwgXCJ7fVwiKSkpKTtcbiAgICBpZiAoKEdNR2V0VmFsdWUoXCJtZXRhLVwiICsgaWQsIHt9KS5hcGlWZXJzaW9uIHx8IGdldEFQSVZlcnNpb24oKSkgIT0gZ2V0QVBJVmVyc2lvbigpKSB7XG4gICAgICBkZWxldGVNb2R1bGUoaWQsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbTUNCQlMgTG9hZGVyXSDnlLHkuo4gQVBJIOeJiOacrOS4jeWFvOWuue+8jOenu+mZpOS6hiBJRCDkuLogXCIgKyBpZCArIFwiIOeahOiEmuacrOOAglxcbuWmguaciemcgOimge+8jOS9oOWPr+S7pemHjeaWsOWuieijheOAglwiKTtcbiAgICAgICAgc2hvd1BvcHBlcihcIltNQ0JCUyBMb2FkZXJdIOeUseS6jiBBUEkg54mI5pys5LiN5YW85a6577yM56e76Zmk5LqGIElEIOS4uiBcIiArIGlkICsgXCIg55qE6ISa5pys44CCXFxu5aaC5pyJ6ZyA6KaB77yM5L2g5Y+v5Lul6YeN5paw5a6J6KOF44CCXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8vIOaOkuS4quW6j1xuICBsZXQgaW5zZXJ0ID0gKGJlZm9yZTogYW55LCBhZnRlcjogYW55KSA9PiB7XG4gICAgbGV0IG5vZGU6IGFueSA9IHtcbiAgICAgIGJlZm9yZTogYmVmb3JlLFxuICAgICAgYWZ0ZXI6IGFmdGVyLFxuICAgICAgYmVmb3JlTmV4dDogYmVmb3JlLmJlZm9yZUhlYWQsXG4gICAgICBhZnRlck5leHQ6IGFmdGVyLmFmdGVySGVhZCxcbiAgICAgIGJlZm9yZVByZXY6IG1hcE5pbCxcbiAgICAgIGFmdGVyUHJldjogbWFwTmlsLFxuICAgIH07XG4gICAgbm9kZS5iZWZvcmVOZXh0LmJlZm9yZVByZXYgPSBub2RlLmFmdGVyTmV4dC5hZnRlclByZXYgPSBub2RlO1xuICAgIGFmdGVyLmFmdGVySGVhZCA9IGJlZm9yZS5iZWZvcmVIZWFkID0gbm9kZTtcbiAgfTtcbiAgbGV0IHVubGluayA9IChub2RlOiBhbnkpID0+IHtcbiAgICBub2RlLmFmdGVyTmV4dC5hZnRlclByZXYgPSBub2RlLmFmdGVyUHJldjtcbiAgICBub2RlLmJlZm9yZU5leHQuYmVmb3JlUHJldiA9IG5vZGUuYmVmb3JlUHJldjtcbiAgICBub2RlLmFmdGVyUHJldi5hZnRlck5leHQgPSBub2RlLmFmdGVyTmV4dDtcbiAgICBub2RlLmJlZm9yZVByZXYuYmVmb3JlTmV4dCA9IG5vZGUuYmVmb3JlTmV4dDtcbiAgICBpZiAobm9kZSA9PT0gbm9kZS5hZnRlci5hZnRlckhlYWQpXG4gICAgICBub2RlLmFmdGVyLmFmdGVySGVhZCA9IG5vZGUuYWZ0ZXJOZXh0O1xuICAgIGlmIChub2RlID09PSBub2RlLmJlZm9yZS5iZWZvcmVIZWFkKVxuICAgICAgbm9kZS5iZWZvcmUuYmVmb3JlSGVhZCA9IG5vZGUuYmVmb3JlTmV4dDtcbiAgICAvLyDlpoLmnpzlroPkuI3pnIDopoHlnKjmn5DkuKrmj5Lku7bkuYvlkI7liqDovb3vvIzpgqPkuIvkuIDkuKrlsLHliqDovb3lroNcbiAgICBpZiAobWFwTmlsID09PSBub2RlLmFmdGVyLmFmdGVySGVhZClcbiAgICAgIHN0YWNrLnB1c2gobm9kZS5hZnRlcik7XG4gIH07XG4gIGRlcGVuZGVuY2llcy5mb3JFYWNoKCh2OiBhbnksIGspID0+IHtcbiAgICBsZXQgZGVwZW5kID0gdi5kZXBlbmQ7XG4gICAgaWYgKGRlcGVuZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBkZXBlbmQuZm9yRWFjaChlID0+IHtcbiAgICAgICAgaWYgKCFkZXBlbmRlbmNpZXMuZ2V0KGUpKSB7XG4gICAgICAgICAgZGVwZW5kZW5jeUVycm9yICs9IGAke2t95L6d6LWWJHtlfe+8jOS9huaYr+WQjuiAheacquWuieijheaIluacquWQr+eUqOOAglxcbmA7XG4gICAgICAgICAgdG9EaXNhYmxlLmFkZChrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBiZWZvcmUgPSB2LmJlZm9yZTtcbiAgICBpZiAoYmVmb3JlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGJlZm9yZS5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBkZXBlbmRlbmNpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAodGFyZ2V0KVxuICAgICAgICAgIGluc2VydCh2LCB0YXJnZXQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGxldCBhZnRlciA9IHYuYWZ0ZXI7XG4gICAgaWYgKGFmdGVyIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGFmdGVyLmZvckVhY2goKGUpID0+IHtcbiAgICAgICAgbGV0IHRhcmdldCA9IGRlcGVuZGVuY2llcy5nZXQoZSk7XG4gICAgICAgIGlmICh0YXJnZXQpXG4gICAgICAgICAgaW5zZXJ0KHRhcmdldCwgdik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBkZXBlbmRlbmNpZXMuZm9yRWFjaCgodjogYW55KSA9PiB7XG4gICAgaWYgKHYuYWZ0ZXJIZWFkID09PSBtYXBOaWwpXG4gICAgICBzdGFjay5wdXNoKHYpO1xuICB9KTtcbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgIGxldCBwcm9jZXNzID0gc3RhY2sucG9wKCkgYXMgYW55O1xuICAgIHNvcnRlZExpc3QucHVzaChwcm9jZXNzLmlkKTtcbiAgICAvLyDliqDkuKrmjpLluo/lrozmiJDmoIforrDvvIzop6PpmaTlhbbku5bmj5Lku7bpnIDopoHlnKjmnKzmj5Lku7bkuYvlkI7liqDovb3nmoTpmZDliLZcbiAgICB3aGlsZSAobWFwTmlsICE9IHByb2Nlc3MuYmVmb3JlSGVhZClcbiAgICAgIHVubGluayhwcm9jZXNzLmJlZm9yZUhlYWQpO1xuICB9XG4gIC8vIOWmguaenOaOkuW6j+W3sue7j+e7k+adn+S6hui/mOacieaPkuS7tuayoeaciei/m+WFpeWIsOW6j+WIl+mHjOadpe+8jOmCo+S5iOaOkuW6j+S4gOWumuaXoOino++8jOS9huaYr+ebuOWQjOS4gOS4quaooeWdl+eahOmUmeivr+WPqumcgOimgei+k+WHuuS4gOasoVxuICBkZXBlbmRlbmNpZXMuZm9yRWFjaCh2ID0+IHtcbiAgICBpZiAoKHYgYXMgYW55KS5iZWZvcmVIZWFkICE9IG1hcE5pbCkge1xuICAgICAgdG9EaXNhYmxlLmFkZCgodiBhcyBhbnkpLmlkKTtcbiAgICAgIGRlcGVuZGVuY3lFcnJvciArPSAodiBhcyBhbnkpLmlkICsgXCLopoHmsYLlnKhcIjtcbiAgICAgIGxldCBub2RlOiBhbnkgPSAodiBhcyBhbnkpLmJlZm9yZUhlYWQ7XG4gICAgICB3aGlsZSAobm9kZSAhPSBtYXBOaWwpIHtcbiAgICAgICAgZGVwZW5kZW5jeUVycm9yICs9IG5vZGUuYWZ0ZXIuaWQgKyAobm9kZS5iZWZvcmVOZXh0ID09PSBtYXBOaWwgPyBcIlwiIDogXCIsXCIpO1xuICAgICAgICBub2RlID0gbm9kZS5iZWZvcmVOZXh0O1xuICAgICAgfVxuICAgICAgZGVwZW5kZW5jeUVycm9yICs9IFwi5LmL5YmN5Yqg6L2977yM54S26ICM5q2k6KaB5rGC5peg5rOV5ruh6Laz44CCXFxuXCI7XG4gICAgfVxuICB9KTtcblxuICBsZXQgdG9TZXJpYWxpemU6IGFueVtdID0gW107XG4gIHRvRGlzYWJsZS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgdG9TZXJpYWxpemUucHVzaCh2KTtcbiAgICBkZWxldGUgYWxsW3ZdO1xuICB9KTtcbiAgaWYgKHRvU2VyaWFsaXplLmxlbmd0aCkge1xuICAgIGRlcGVuZGVuY3lFcnJvciArPSBcIuW3suS4tOaXtuWBnOeUqFwiICsgdG9TZXJpYWxpemUudG9TdHJpbmcoKSArIFwiXFxuXCI7XG4gICAgcmV0dXJuIHJlc29ydERlcGVuZGVuY3lJbnRlcm5hbChhbGwsIGRlcGVuZGVuY3lFcnJvciwgdG1wRGlzYWJsZWQuY29uY2F0KHRvU2VyaWFsaXplKSk7XG4gIH0gZWxzZSB7XG4gICAgZ2xvYmFsVG1wRGlzYWJsZWQgPSB0bXBEaXNhYmxlZDtcbiAgICBnbG9iYWxEZXBlbmRlbmN5RXJyb3IgPSBkZXBlbmRlbmN5RXJyb3I7XG4gICAgR01TZXRWYWx1ZShcImxvYWRlci5zb3J0ZWRNb2R1bGVMaXN0XCIsIHNvcnRlZExpc3QpO1xuICAgIEdNU2V0VmFsdWUoXCJsb2FkZXIuZGVwZW5kZW5jeUVycm9yXCIsIGRlcGVuZGVuY3lFcnJvcik7XG4gICAgR01TZXRWYWx1ZShcImxvYWRlci50bXBEaXNhYmxlZFwiLCB0bXBEaXNhYmxlZCk7XG4gICAgcmV0dXJuIHNvcnRlZExpc3Q7XG4gIH07XG59XG4vLyDpqozor4HkuIDkuKppZOaYr+WQpuato+ehrlxuZnVuY3Rpb24gdmVyaWZ5SWQoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL15bMC05fGEtenxBLVp8XFwufF9dKyQvLnRlc3QoaWQpOy8vIOWlveS6hueOsOWcqOS7gOS5iOespuWPt+mDveS4jeiuqeeUqOS6hlxufVxuLy8g5a6J6KOF5LiA5Liq5qih5Z2XXG5mdW5jdGlvbiBhZGRNb2R1bGUoY29kZTogc3RyaW5nLCBnaWQ6IEdJRFVSTCA9IEdJRFVSTC5OSUwpOiBNYXA8c3RyaW5nLCBzdHJpbmc+IHwgc3RyaW5nIHtcbiAgbGV0IGlzTW9kdWxlUmVnZXggPSAvXFwvXFwqKCApKk1DQkJTWyAtXSpNb2R1bGUvO1xuICBsZXQgY2NvZGUgPSBjb2RlLnRyaW0oKTtcbiAgaWYgKCFpc01vZHVsZVJlZ2V4LnRlc3QoY2NvZGUpKVxuICAgIHJldHVybiBcIui/meS4jeaYr+S4gOS4quaooeWdl1wiO1xuICBsZXQgZGF0YU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gIHBhcnNlTWV0YShjY29kZSwgZGF0YU1hcCk7XG4gIGxldCBmbGl0QmxhbmsgPSAoc3RyYXJyOiBzdHJpbmdbXSk6IHN0cmluZ1tdID0+IHtcbiAgICBsZXQgbmV3YXJyOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAobGV0IHN0ciBvZiBzdHJhcnIpIHtcbiAgICAgIGxldCB0YXJnZXQgPSBzdHIudHJpbSgpO1xuICAgICAgaWYgKHRhcmdldC5sZW5ndGgpXG4gICAgICAgIG5ld2Fyci5wdXNoKHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiBuZXdhcnI7XG4gIH07XG4gIGxldCBkZXBlbmQ6IHN0cmluZyA9IGRhdGFNYXAuZ2V0KFwiZGVwZW5kXCIpIHx8IFwiXCIsXG4gICAgYmVmb3JlOiBzdHJpbmcsXG4gICAgYWZ0ZXI6IHN0cmluZyxcbiAgICBhcGlWZXJzaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaWQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGRhdGFNYXAuZ2V0KFwiaWRcIik7XG4gIGlmIChpZCA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBcIuacquaPkOS+myBpZCDmlbDmja7lgLxcIlxuICBlbHNlIGlmICghdmVyaWZ5SWQoaWQpKVxuICAgIHJldHVybiBcIuS4jeWQiOimgeaxgueahCBpZFwiO1xuICBsZXQgaW5zX2RlcGVuZDogYW55W10gPSBbXSwgZGVwbG9jTWFwOiBhbnkgPSB7fTtcbiAgZm9yIChsZXQgZCBvZiBkZXBlbmQuc3BsaXQoXCIsXCIpKSB7XG4gICAgbGV0IGRlcCA9IGQudHJpbSgpO1xuICAgIGlmICghZGVwLmxlbmd0aClcbiAgICAgIGNvbnRpbnVlO1xuICAgIGlmIChkZXAuaW5jbHVkZXMoXCItPlwiKSkge1xuICAgICAgbGV0IHBhcnNlID0gL14oWzAtOXxhLXp8QS1afFxcLnxfXSspIC0+IChbMC05fGEtenxBLVp8XFwufF98OnwvfCV8QHwtXSspJC8uZXhlYyhkZXApO1xuICAgICAgaWYgKCFwYXJzZSB8fCBwYXJzZS5sZW5ndGggIT0gMylcbiAgICAgICAgcmV0dXJuIFwi5L6d6LWW5Zyw5Z2A57yW5YaZ5qC85byP6ZSZ6K+vXCI7XG4gICAgICBpbnNfZGVwZW5kLnB1c2gocGFyc2VbMV0pO1xuICAgICAgaWYgKCFkZXBsb2NNYXBbcGFyc2VbMV1dKVxuICAgICAgICBkZXBsb2NNYXBbcGFyc2VbMV1dID0gW107XG4gICAgICBkZXBsb2NNYXBbcGFyc2VbMV1dLnB1c2gocGFyc2VbMl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnNfZGVwZW5kLnB1c2goZGVwKTtcbiAgICB9XG4gIH1cblxuICBkZXBlbmQgPSBpbnNfZGVwZW5kLmpvaW4oXCIsXCIpO1xuICBsZXQgb2JqOiBvYmplY3QgPSB7XG4gICAgaWQ6IGlkLFxuICAgIHBlcm1pc3Npb25zOiBkYXRhTWFwLmdldChcInBlcm1pc3Npb25zXCIpIHx8IFwiXCIsXG4gICAgbmFtZTogRE9NVXRpbHMuYmFuKGRhdGFNYXAuZ2V0KFwibmFtZVwiKSB8fCBkYXRhTWFwLmdldChcImlkXCIpISksXG4gICAgYXV0aG9yOiBET01VdGlscy5iYW4oZGF0YU1hcC5nZXQoXCJhdXRob3JcIikgfHwgXCJTb21lb25lXCIpLFxuICAgIGljb246IGRhdGFNYXAuZ2V0KFwiaWNvblwiKSB8fCBJTUdfTUNCQlMsXG4gICAgZGVwZW5kOiBkZXBlbmQsXG4gICAgYmVmb3JlOiAoYmVmb3JlID0gZGF0YU1hcC5nZXQoXCJiZWZvcmVcIikgfHwgXCJcIiksXG4gICAgYWZ0ZXI6IChhZnRlciA9IGRhdGFNYXAuZ2V0KFwiYWZ0ZXJcIikgfHwgXCJcIiksXG4gICAgZGVzY3JpcHRpb246IERPTVV0aWxzLmJhbihkYXRhTWFwLmdldChcImRlc2NyaXB0aW9uXCIpIHx8IFwiTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQuXCIpLFxuICAgIHVwZGF0ZVVSTDogZGF0YU1hcC5nZXQoXCJ1cGRhdGVVUkxcIiksXG4gICAgYXBpVmVyc2lvbjogKGFwaVZlcnNpb24gPSBkYXRhTWFwLmdldChcImFwaVZlcnNpb25cIikpLFxuICAgIHZlcnNpb246IGRhdGFNYXAuZ2V0KFwidmVyc2lvblwiKSA/IERPTVV0aWxzLmJhbihkYXRhTWFwLmdldChcInZlcnNpb25cIikhKSA6IHVuZGVmaW5lZCxcbiAgICBnaWQ6IGdpZCAhPSBHSURVUkwuTklMID8gZ2lkLmFzU3RyaW5nKCkgOiBkYXRhTWFwLmdldChcImdpZFwiKVxuICB9O1xuICBpZiAoKGFwaVZlcnNpb24gfHwgU1RSSU5HX0FQSV9WRVJTSU9OKSAhPSBTVFJJTkdfQVBJX1ZFUlNJT04pIHtcbiAgICByZXR1cm4gXCLkuI3mlK/mjIHnmoQgQVBJIOeJiOacrO+8mlwiICsgYXBpVmVyc2lvbjtcbiAgfVxuICBpZiAocmVnTWV0YShpZCwgb2JqKSkge1xuICAgIEdNU2V0VmFsdWUoXCJjb2RlLVwiICsgaWQsIGNjb2RlKTtcbiAgICBHTVNldFZhbHVlKFxuICAgICAgXCJkZXBlbmQtXCIgKyBpZCxcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZGVwZW5kOiBpbnNfZGVwZW5kLFxuICAgICAgICBiZWZvcmU6IGZsaXRCbGFuayhiZWZvcmUuc3BsaXQoXCIsXCIpKSxcbiAgICAgICAgYWZ0ZXI6IGZsaXRCbGFuayhhZnRlci5zcGxpdChcIixcIikpLFxuICAgICAgfSlcbiAgICApO1xuICAgIG1hcmtEaXJ0eSgpO1xuICAgIGxldCBhbGwgPSBHTUdldFZhbHVlKFwibG9hZGVyLmFsbFwiLCB7fSk7XG4gICAgZm9yIChsZXQgZGVwIG9mIGluc19kZXBlbmQpIHtcbiAgICAgIGlmIChhbGxbZGVwXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbGV0IHRyeUluc3RhbGwgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKGRlcGxvY01hcFtkZXBdICYmICFkZXBsb2NNYXBbZGVwXS5wZW5kaW5nICYmIGRlcGxvY01hcFtkZXBdLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVwbG9jTWFwW2RlcF0ucGVuZGluZyA9IHRydWU7XG4gICAgICAgICAgICBsZXQgbG9jID0gZGVwbG9jTWFwW2RlcF0uc2hpZnQoKTtcbiAgICAgICAgICAgIGlmICgvXigoZmlsZXxodHRwc3xodHRwfGZ0cHxydHNwfG1tcyk/OlxcL1xcLylbXlxcc10rL2cudGVzdChsb2MpKSB7XG4gICAgICAgICAgICAgIGluc3RhbGxGcm9tVXJsKGxvYywgKHN0OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBtYW5hZ2VyLm9uSW5zdGFsbChzdCk7XG4gICAgICAgICAgICAgICAgZGVwbG9jTWFwW2RlcF0ucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9LCAocmVhc29uOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICBtYW5hZ2VyLm9uRmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICAgIGRlcGxvY01hcFtkZXBdLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0cnlJbnN0YWxsKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW5zdGFsbEZyb21HSUQoR0lEVVJMLmZyb21TdHJpbmcobG9jLCBnaWQpLCAoc3Q6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIG1hbmFnZXIub25JbnN0YWxsKHN0KTtcbiAgICAgICAgICAgICAgICBkZXBsb2NNYXBbZGVwXS5wZW5kaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0sIChyZWFzb246IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIG1hbmFnZXIub25GYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgZGVwbG9jTWFwW2RlcF0ucGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRyeUluc3RhbGwoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRyeUluc3RhbGwoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFNYXA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFwi5pyq55+l6ZSZ6K+vXCI7XG4gIH1cbn1cblxuLy8g6Kej5p6Q5aS06YOo5L+h5oGvXG5mdW5jdGlvbiBwYXJzZU1ldGEoY29kZTogc3RyaW5nLCBtYXA6IE1hcDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcbiAgbGV0IGV4dHJhY3RNZXRhUmVnZXggPSAvKD88PVxcL1xcKiggKSpNQ0JCU1sgLV0qTW9kdWxlKVtcXHNcXFNdKj8oPz1cXCpcXC8pLztcbiAgbGV0IG1ldGFhcnIgPSBjb2RlLm1hdGNoKGV4dHJhY3RNZXRhUmVnZXgpIHx8IFtdO1xuICBsZXQgbWV0YXMgPSBtZXRhYXJyWzBdIHx8IFwiXCI7XG4gIG1ldGFzID0gbWV0YXMucmVwbGFjZSgvXFxcXFxcbi9nLCBcIlwiKTtcbiAgbGV0IGFsbG1ldGEgPSBtZXRhcy5zcGxpdChcIlxcblwiKTtcbiAgbGV0IGlzSXRlbVJlZ2V4ID0gLy4rP1xcPS4qLztcbiAgbGV0IGtSZWdleCA9IC8uKz8oPz1cXD0pLztcbiAgbGV0IHZSZWdleCA9IC8oPzw9XFw9KS4qLztcbiAgZm9yIChsZXQgbCBvZiBhbGxtZXRhKSB7XG4gICAgaWYgKGlzSXRlbVJlZ2V4LnRlc3QodHJpbShsKSkpIHtcbiAgICAgIGxldCBrID0gKHRyaW0obCkubWF0Y2goa1JlZ2V4KSB8fCBbXSlbMF0gfHwgXCJcIjtcbiAgICAgIGxldCB2ID0gKHRyaW0obCkubWF0Y2godlJlZ2V4KSB8fCBbXSlbMF0gfHwgXCJcIjtcbiAgICAgIG1hcC5zZXQodHJpbShrKSwgdHJpbSh2KSk7XG4gICAgfVxuICB9XG59XG4vLyDms6jlhozlhYPmlbDmja5cbmZ1bmN0aW9uIHJlZ01ldGEoaWQ6IHN0cmluZywgbWV0YTogYW55KTogYm9vbGVhbiB7XG4gIEdNU2V0VmFsdWUoXCJtZXRhLVwiICsgaWQsIG1ldGEpO1xuICBsZXQgYWxsID0gR01HZXRWYWx1ZShcImxvYWRlci5hbGxcIiwge30pO1xuICB0cnkge1xuICAgIHNldFByb3BlcnR5KGFsbCwgaWQsIHRydWUpO1xuICAgIEdNU2V0VmFsdWUoXCJsb2FkZXIuYWxsXCIsIGFsbCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuLy8g5Yqg6L295Luj56CBXG5mdW5jdGlvbiBtb3VudENvZGUoaWQ6IHN0cmluZywgY29kZTogc3RyaW5nKTogdm9pZCB7XG4gIERPTVV0aWxzLmxvYWQoKCkgPT4ge1xuICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIHNjcmlwdC50ZXh0ID0gYChNQ0JCUyA9PiB7JHtjb2RlfX0pKE9iamVjdC5mcmVlemUod2luZG93LmZvcmtBUElfJHtnZXRBUElUb2tlbigpfShcIiR7aWR9XCIpKSlgO1xuICAgIHNjcmlwdC5pZCA9IFwiY29kZS1cIiArIGlkO1xuICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiBzY3JpcHQucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9KTtcbn1cbi8vIOWNuOi9veS7o+eggVxuZnVuY3Rpb24gdW5tb3VudENvZGUoaWQ6IHN0cmluZyk6IHZvaWQge1xuICBET01VdGlscy5sb2FkKCgpID0+IHtcbiAgICBzZWxlY3QoYCNjb2RlLSR7aWR9YCkucmVtb3ZlKCk7XG4gIH0pO1xufVxuLy8g5Yig6Zmk5qih5Z2XXG5mdW5jdGlvbiBkZWxldGVNb2R1bGUoaWQ6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgR01EZWxldGVWYWx1ZShcIm1ldGEtXCIgKyBpZCk7XG4gIEdNRGVsZXRlVmFsdWUoXCJjb2RlLVwiICsgaWQpO1xuICBHTURlbGV0ZVZhbHVlKFwiZGVwZW5kLVwiICsgaWQpO1xuICBsZXQgb2JqID0gR01HZXRWYWx1ZShcImxvYWRlci5hbGxcIiwge30pO1xuICBzZXRQcm9wZXJ0eShvYmosIGlkLCB1bmRlZmluZWQpO1xuICBHTVNldFZhbHVlKFwibG9hZGVyLmFsbFwiLCBvYmopO1xuICBtYXJrRGlydHkoKTtcbiAgY2FsbGJhY2soKTtcbn1cbi8vIOS9v+eUqOe7n+S4gCBJRCDlronoo4VcbmZ1bmN0aW9uIGluc3RhbGxGcm9tR0lEKGdpZDogR0lEVVJMLCBvbnN1Y2Nlc3M6IChzdDogTWFwPHN0cmluZywgc3RyaW5nPikgPT4gdm9pZCwgb25lcnJvcjogKHJlYXNvbjogc3RyaW5nKSA9PiB2b2lkKSB7XG4gIGluc3RhbGxGcm9tVXJsKGdpZC5nZXRBc1VSTCgpLCBvbnN1Y2Nlc3MsIG9uZXJyb3IsIGdpZCk7XG59XG4vLyDku45VUkzlronoo4VcbmZ1bmN0aW9uIGluc3RhbGxGcm9tVXJsKFxuICB1cmw6IHN0cmluZyxcbiAgb25zdWNjZXNzOiAoc3Q6IE1hcDxzdHJpbmcsIHN0cmluZz4pID0+IHZvaWQgPSAoKSA9PiB7IH0sXG4gIG9uZXJyb3I6IChyZWFzb246IHN0cmluZykgPT4gdm9pZCA9ICgpID0+IHsgfSxcbiAgZ2lkOiBHSURVUkwgPSBHSURVUkwuTklMXG4pIHtcbiAgZ2V0Q3Jvc3NPcmlnaW5EYXRhKHVybCwgKCkgPT4gb25lcnJvcihcIuWuieijheWksei0pe+8jOe9kee7nOivt+axguWksei0pVwiKSwgZGF0YSA9PiB7XG4gICAgbGV0IHN0ID0gYWRkTW9kdWxlKGRhdGEsIGdpZCk7XG4gICAgaWYgKHR5cGVvZiBzdCA9PSBcInN0cmluZ1wiKVxuICAgICAgb25lcnJvcihzdCk7XG4gICAgZWxzZVxuICAgICAgb25zdWNjZXNzKHN0KTtcbiAgICByZXNvcnREZXBlbmRlbmN5KCk7XG4gIH0pO1xufVxuLy8g5Yik5pat5piv5ZCm5pON5L2c6L+HXG5mdW5jdGlvbiBpc0RpcnR5KCkge1xuICByZXR1cm4gZGlydHk7XG59XG5mdW5jdGlvbiBtYXJrRGlydHkoKSB7XG4gIGRpcnR5ID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGNvcmVNb2RFdmFsKGNvZGU6IHN0cmluZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBldmFsKGNvZGUpO1xuICAgICAgcmVzb2x2ZSgwKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCB7XG4gIEdJRFVSTCxcbiAgYWRkTW9kdWxlLFxuICBtb3VudENvZGUsXG4gIGRlbGV0ZU1vZHVsZSxcbiAgdW5tb3VudENvZGUsXG4gIGluc3RhbGxGcm9tVXJsLFxuICBwYXJzZU1ldGEsXG4gIGlzRGlydHksXG4gIG1hcmtEaXJ0eSxcbiAgY29yZU1vZEV2YWwsXG4gIHJlc29ydERlcGVuZGVuY3ksXG4gIGdldFRtcERpc2FibGVkLFxuICBnZXREZXBlbmRlbmN5RXJyb3IsXG4gIGlzRGVwZW5kZW5jeVNvbHZlZCxcbiAgaW5zdGFsbEZyb21HSUQsXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUE1Q0E7QUErQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/codeload.ts\n");

/***/ }),

/***/ "./src/libs/configpage.ts":
/*!********************************!*\
  !*** ./src/libs/configpage.ts ***!
  \********************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _api_STDEVT__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/STDEVT */ \"./src/api/STDEVT.js\");\n/* harmony import */ var _craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../craftmcbbs/craft-ui */ \"./src/craftmcbbs/craft-ui.js\");\n/* harmony import */ var _domutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./domutils */ \"./src/libs/domutils.ts\");\n/* harmony import */ var _codeload__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./codeload */ \"./src/libs/codeload.ts\");\n;\n\n\n\n\nfunction dumpConfigPage() {\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"title\").html(\"MCBBS Loader - 配置页面\");\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"div[class='bm bw0']\").html(\"<span style='font-size:1.5rem'>设置中心</span>&nbsp;&nbsp;\" +\n        \"<button id='saveconfig' type='button' class='pn pnc'>\" +\n        \"<span>保存</span></button>&nbsp;<span style='color:#df307f'>您的设置应当会自动保存，如果没有，单击此按钮来保存。</span> \" +\n        \"<br/><div id='config_div'></div>\");\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"#saveconfig\").on(\"click\", autoSave);\n    renderAll();\n}\nfunction autoSave() {\n    for (let c of (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"CDT\"))\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMSetValue)(`configstore-${c.id}-${c.stgid}`, c.type === \"checkbox\" ?\n            document.getElementById(`confval-${c.id}-${c.stgid}`).classList.contains(\"fa-check-square\") :\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(`[id='confval-${c.id}-${c.stgid}']`).val());\n    (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_2__.showPopper)(\"设置保存成功！\");\n}\nfunction getConfigVal(idIn, storageIdIn, defaultValue) {\n    return (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(`configstore-${idIn}-${storageIdIn}`, defaultValue);\n}\nfunction setConfigVal(idIn, storageIdIn, value) {\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(`configstore-${idIn}-${storageIdIn}`, value);\n}\nfunction renderAll() {\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\".a\").removeClass(\"a\");\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"#manage_config\").parent().addClass(\"a\");\n    if (_api_STDEVT__WEBPACK_IMPORTED_MODULE_1__.LoaderEvent.emitCancelable(\"ConfigPagePreRender\"))\n        return;\n    for (let c of (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"CDT\")) {\n        let ele = `<label style='font-size:14px' for='confval-${c.id}-${c.stgid}'>\n        <span style='font-size:18px;color:#5d2391'>\n          <b>${c.name} </b>\n        </span>\n        (${c.id}:${c.stgid})\n        <br/>\n        <span style='color:#df307f'>${c.desc}</span>\n      </label>`;\n        if (c.type == \"checkbox\") {\n            ele =\n                `<span style='font-size:14px'>\n          <span style='font-size:18px;color:#5d2391'>\n            <i id='confval-${c.id}-${c.stgid}' class='chkbox fa fa-check-square'></i>\n            &nbsp;\n            <b>${c.name}</b>\n          </span>\n          (${c.id}:${c.stgid})\n          <br/>\n          <span style='color:#df307f'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${c.desc}</span>\n          <div id='conferr-${c.id}-${c.stgid}'></div></span>\n          <br/>\n        </span>`;\n        }\n        else if (c.type == \"textarea\") {\n            ele +=\n                `<br/>\n        <div id='conferr-${c.id}-${c.stgid}'></div>\n        <textarea id='confval-${c.id}-${c.stgid}' style=\"width: 99%;\" class=\"loadertextconf\"></textarea>\n        <br/>`;\n        }\n        else if (c.type == \"button\") {\n            ele +=\n                `<br/>\n        <div id='conferr-${c.id}-${c.stgid}'></div>\n        <button style='float: right;' class='pn pnc' id='confval-${c.id}-${c.stgid}'>${c.value}</button>\n        <br/>`;\n        }\n        else {\n            ele +=\n                `<div style='height: 17px;'>\n          <input type='text' class='px loadertextconf' id='confval-${c.id}-${c.stgid}'/>\n          <div id='conferr-${c.id}-${c.stgid}'></div>\n          <br/>\n        </div>`;\n        }\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"#config_div\").append(ele);\n        if (c.type == \"checkbox\") {\n            let faclass = getConfigVal(c.id, c.stgid, false) ? \"chkbox fa fa-check-square\" : \"chkbox fa fa-square\";\n            document.getElementById(`confval-${c.id}-${c.stgid}`).className = faclass;\n        }\n        else {\n            let value = getConfigVal(c.id, c.stgid, \"\");\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(`[id='confval-${c.id}-${c.stgid}']`).val(value);\n        }\n        let element = document.getElementById(`confval-${c.id}-${c.stgid}`);\n        if (c.type == \"button\") {\n            element.onclick = c.check;\n        }\n        else {\n            element.oninput = function () {\n                let t = this;\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(`#conferr-${c.id}-${c.stgid}`).html(c.check(c.type != \"checkbox\" ? t.value : t.className == \"chkbox fa fa-check-square\") || \"\");\n                if (c.type == \"textarea\")\n                    t.rows = t.value.split(\"\\n\").length;\n            };\n            element.oninput();\n        }\n    }\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\".chkbox\").on(\"click\", (e) => {\n        var _a;\n        e.target.className = \"chkbox fa fa-\" + (((_a = e.target.className) === null || _a === void 0 ? void 0 : _a.includes(\"check-square\")) ? \"check-\" : \"\") + \"square\";\n        e.target.oninput();\n        autoSave();\n    });\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\".loadertextconf\").on(\"blur\", autoSave);\n    _api_STDEVT__WEBPACK_IMPORTED_MODULE_1__.LoaderEvent.emit(\"ConfigPagePostRender\");\n}\nfunction createConfigItem(id, stgid, name, type, desc, check = (arg) => undefined, value) {\n    let CDT = (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.getWindowProperty)(\"CDT\"), rval = { id, type, stgid, name, desc, check, value };\n    CDT.push(rval);\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.setWindowProperty)(\"CDT\", CDT);\n    return rval;\n}\nfunction createMenu() {\n    (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.setWindowProperty)(\"getConfig\", function (id, sid) {\n        return getConfigVal(id, sid, undefined);\n    });\n    _domutils__WEBPACK_IMPORTED_MODULE_3__.DOMUtils.load(() => {\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"div.appl > div.tbn > ul\").prepend(\"<li><a id='manage_config' style='cursor:pointer;' \" +\n            \"href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=config'>模块选项中心</a></li>\");\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_3__.select)(\"#manage_config\").on(\"click\", (e) => {\n            if ((0,_codeload__WEBPACK_IMPORTED_MODULE_4__.isDirty)())\n                return;\n            e.preventDefault();\n            dumpConfigPage();\n            history.replaceState(null, null, \"https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=config\");\n        });\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ createMenu, dumpConfigPage, createConfigItem, getConfigVal, setConfigVal });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9jb25maWdwYWdlLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWNiYnMtbG9hZGVyLWNvcmUvLi9zcmMvbGlicy9jb25maWdwYWdlLnRzPzMyODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0V2luZG93UHJvcGVydHksXG4gIEdNR2V0VmFsdWUsXG4gIEdNU2V0VmFsdWUsXG4gIHNldFdpbmRvd1Byb3BlcnR5LFxufSBmcm9tIFwiLi91c2Z1bmNcIjtcbmltcG9ydCB7IExvYWRlckV2ZW50IH0gZnJvbSBcIi4uL2FwaS9TVERFVlRcIjtcbmltcG9ydCB7IEludGVybmFsQ29uZmlnIH0gZnJvbSBcIi4uL2FwaS9TVERBUElcIjtcbmltcG9ydCB7IHNob3dQb3BwZXIgfSBmcm9tIFwiLi4vY3JhZnRtY2Jicy9jcmFmdC11aVwiO1xuaW1wb3J0IHsgRE9NVXRpbHMsIHNlbGVjdCB9IGZyb20gXCIuL2RvbXV0aWxzXCI7XG5pbXBvcnQgeyBpc0RpcnR5IH0gZnJvbSBcIi4vY29kZWxvYWRcIjtcbmZ1bmN0aW9uIGR1bXBDb25maWdQYWdlKCkge1xuICBzZWxlY3QoXCJ0aXRsZVwiKS5odG1sKFwiTUNCQlMgTG9hZGVyIC0g6YWN572u6aG16Z2iXCIpO1xuICBzZWxlY3QoXCJkaXZbY2xhc3M9J2JtIGJ3MCddXCIpLmh0bWwoXG4gICAgXCI8c3BhbiBzdHlsZT0nZm9udC1zaXplOjEuNXJlbSc+6K6+572u5Lit5b+DPC9zcGFuPiZuYnNwOyZuYnNwO1wiICsgXG4gICAgXCI8YnV0dG9uIGlkPSdzYXZlY29uZmlnJyB0eXBlPSdidXR0b24nIGNsYXNzPSdwbiBwbmMnPlwiICtcbiAgICBcIjxzcGFuPuS/neWtmDwvc3Bhbj48L2J1dHRvbj4mbmJzcDs8c3BhbiBzdHlsZT0nY29sb3I6I2RmMzA3Zic+5oKo55qE6K6+572u5bqU5b2T5Lya6Ieq5Yqo5L+d5a2Y77yM5aaC5p6c5rKh5pyJ77yM5Y2V5Ye75q2k5oyJ6ZKu5p2l5L+d5a2Y44CCPC9zcGFuPiBcIiArIFxuICAgIFwiPGJyLz48ZGl2IGlkPSdjb25maWdfZGl2Jz48L2Rpdj5cIlxuICApO1xuICBzZWxlY3QoXCIjc2F2ZWNvbmZpZ1wiKS5vbihcImNsaWNrXCIsIGF1dG9TYXZlKTtcbiAgcmVuZGVyQWxsKCk7XG59XG5cbmZ1bmN0aW9uIGF1dG9TYXZlKCkge1xuICBmb3IgKGxldCBjIG9mIGdldFdpbmRvd1Byb3BlcnR5KFwiQ0RUXCIpIGFzIEludGVybmFsQ29uZmlnW10pXG4gICAgR01TZXRWYWx1ZShgY29uZmlnc3RvcmUtJHtjLmlkfS0ke2Muc3RnaWR9YCwgYy50eXBlID09PSBcImNoZWNrYm94XCIgP1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNvbmZ2YWwtJHtjLmlkfS0ke2Muc3RnaWR9YCkhLmNsYXNzTGlzdC5jb250YWlucyhcImZhLWNoZWNrLXNxdWFyZVwiKSA6XG4gICAgICBzZWxlY3QoYFtpZD0nY29uZnZhbC0ke2MuaWR9LSR7Yy5zdGdpZH0nXWApLnZhbCgpKTtcbiAgc2hvd1BvcHBlcihcIuiuvue9ruS/neWtmOaIkOWKn++8gVwiKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29uZmlnVmFsKGlkSW46IHN0cmluZywgc3RvcmFnZUlkSW46IHN0cmluZywgZGVmYXVsdFZhbHVlOiBhbnkpIHtcbiAgcmV0dXJuIEdNR2V0VmFsdWUoYGNvbmZpZ3N0b3JlLSR7aWRJbn0tJHtzdG9yYWdlSWRJbn1gLCBkZWZhdWx0VmFsdWUpO1xufVxuXG5mdW5jdGlvbiBzZXRDb25maWdWYWwoaWRJbjogc3RyaW5nLCBzdG9yYWdlSWRJbjogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gIEdNR2V0VmFsdWUoYGNvbmZpZ3N0b3JlLSR7aWRJbn0tJHtzdG9yYWdlSWRJbn1gLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckFsbCgpIHtcbiAgc2VsZWN0KFwiLmFcIikucmVtb3ZlQ2xhc3MoXCJhXCIpO1xuICBzZWxlY3QoXCIjbWFuYWdlX2NvbmZpZ1wiKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFcIik7XG4gIGlmIChMb2FkZXJFdmVudC5lbWl0Q2FuY2VsYWJsZShcIkNvbmZpZ1BhZ2VQcmVSZW5kZXJcIikpXG4gICAgcmV0dXJuO1xuICBmb3IgKGxldCBjIG9mIGdldFdpbmRvd1Byb3BlcnR5KFwiQ0RUXCIpIGFzIEludGVybmFsQ29uZmlnW10pIHtcbiAgICBsZXQgZWxlID1cbiAgICAgIGA8bGFiZWwgc3R5bGU9J2ZvbnQtc2l6ZToxNHB4JyBmb3I9J2NvbmZ2YWwtJHtjLmlkfS0ke2Muc3RnaWR9Jz5cbiAgICAgICAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxOHB4O2NvbG9yOiM1ZDIzOTEnPlxuICAgICAgICAgIDxiPiR7Yy5uYW1lfSA8L2I+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKCR7Yy5pZH06JHtjLnN0Z2lkfSlcbiAgICAgICAgPGJyLz5cbiAgICAgICAgPHNwYW4gc3R5bGU9J2NvbG9yOiNkZjMwN2YnPiR7Yy5kZXNjfTwvc3Bhbj5cbiAgICAgIDwvbGFiZWw+YDtcbiAgICBpZiAoYy50eXBlID09IFwiY2hlY2tib3hcIikge1xuICAgICAgZWxlID1cbiAgICAgICAgYDxzcGFuIHN0eWxlPSdmb250LXNpemU6MTRweCc+XG4gICAgICAgICAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxOHB4O2NvbG9yOiM1ZDIzOTEnPlxuICAgICAgICAgICAgPGkgaWQ9J2NvbmZ2YWwtJHtjLmlkfS0ke2Muc3RnaWR9JyBjbGFzcz0nY2hrYm94IGZhIGZhLWNoZWNrLXNxdWFyZSc+PC9pPlxuICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICA8Yj4ke2MubmFtZX08L2I+XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICgke2MuaWR9OiR7Yy5zdGdpZH0pXG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgICA8c3BhbiBzdHlsZT0nY29sb3I6I2RmMzA3Zic+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7JHtjLmRlc2N9PC9zcGFuPlxuICAgICAgICAgIDxkaXYgaWQ9J2NvbmZlcnItJHtjLmlkfS0ke2Muc3RnaWR9Jz48L2Rpdj48L3NwYW4+XG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgPC9zcGFuPmA7XG4gICAgfSBlbHNlIGlmIChjLnR5cGUgPT0gXCJ0ZXh0YXJlYVwiKSB7XG4gICAgICBlbGUgKz1cbiAgICAgICAgYDxici8+XG4gICAgICAgIDxkaXYgaWQ9J2NvbmZlcnItJHtjLmlkfS0ke2Muc3RnaWR9Jz48L2Rpdj5cbiAgICAgICAgPHRleHRhcmVhIGlkPSdjb25mdmFsLSR7Yy5pZH0tJHtjLnN0Z2lkfScgc3R5bGU9XCJ3aWR0aDogOTklO1wiIGNsYXNzPVwibG9hZGVydGV4dGNvbmZcIj48L3RleHRhcmVhPlxuICAgICAgICA8YnIvPmA7XG4gICAgfSBlbHNlIGlmIChjLnR5cGUgPT0gXCJidXR0b25cIikge1xuICAgICAgZWxlICs9XG4gICAgICAgIGA8YnIvPlxuICAgICAgICA8ZGl2IGlkPSdjb25mZXJyLSR7Yy5pZH0tJHtjLnN0Z2lkfSc+PC9kaXY+XG4gICAgICAgIDxidXR0b24gc3R5bGU9J2Zsb2F0OiByaWdodDsnIGNsYXNzPSdwbiBwbmMnIGlkPSdjb25mdmFsLSR7Yy5pZH0tJHtjLnN0Z2lkfSc+JHtjLnZhbHVlfTwvYnV0dG9uPlxuICAgICAgICA8YnIvPmBcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlICs9XG4gICAgICAgIGA8ZGl2IHN0eWxlPSdoZWlnaHQ6IDE3cHg7Jz5cbiAgICAgICAgICA8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J3B4IGxvYWRlcnRleHRjb25mJyBpZD0nY29uZnZhbC0ke2MuaWR9LSR7Yy5zdGdpZH0nLz5cbiAgICAgICAgICA8ZGl2IGlkPSdjb25mZXJyLSR7Yy5pZH0tJHtjLnN0Z2lkfSc+PC9kaXY+XG4gICAgICAgICAgPGJyLz5cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9XG4gICAgc2VsZWN0KFwiI2NvbmZpZ19kaXZcIikuYXBwZW5kKGVsZSk7XG4gICAgaWYgKGMudHlwZSA9PSBcImNoZWNrYm94XCIpIHtcbiAgICAgIGxldCBmYWNsYXNzID0gZ2V0Q29uZmlnVmFsKGMuaWQsIGMuc3RnaWQsIGZhbHNlKSA/IFwiY2hrYm94IGZhIGZhLWNoZWNrLXNxdWFyZVwiIDogXCJjaGtib3ggZmEgZmEtc3F1YXJlXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgY29uZnZhbC0ke2MuaWR9LSR7Yy5zdGdpZH1gKSEuY2xhc3NOYW1lID0gZmFjbGFzcztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHZhbHVlID0gZ2V0Q29uZmlnVmFsKGMuaWQsIGMuc3RnaWQsIFwiXCIpO1xuICAgICAgc2VsZWN0KGBbaWQ9J2NvbmZ2YWwtJHtjLmlkfS0ke2Muc3RnaWR9J11gKS52YWwodmFsdWUpO1xuICAgIH1cbiAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjb25mdmFsLSR7Yy5pZH0tJHtjLnN0Z2lkfWApIGFzIGFueTtcbiAgICBpZiAoYy50eXBlID09IFwiYnV0dG9uXCIpIHtcbiAgICAgIGVsZW1lbnQub25jbGljayA9IGMuY2hlY2s7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQub25pbnB1dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICBzZWxlY3QoYCNjb25mZXJyLSR7Yy5pZH0tJHtjLnN0Z2lkfWApLmh0bWwoXG4gICAgICAgICAgYy5jaGVjayhjLnR5cGUgIT0gXCJjaGVja2JveFwiID8gdC52YWx1ZSA6IHQuY2xhc3NOYW1lID09IFwiY2hrYm94IGZhIGZhLWNoZWNrLXNxdWFyZVwiKSB8fCBcIlwiXG4gICAgICAgICk7XG4gICAgICAgIGlmIChjLnR5cGUgPT0gXCJ0ZXh0YXJlYVwiKVxuICAgICAgICAgIHQucm93cyA9IHQudmFsdWUuc3BsaXQoXCJcXG5cIikubGVuZ3RoO1xuICAgICAgfTtcbiAgICAgIGVsZW1lbnQub25pbnB1dCgpO1xuICAgIH1cbiAgfVxuICBzZWxlY3QoXCIuY2hrYm94XCIpLm9uKFwiY2xpY2tcIiwgKGU6IGFueSkgPT4ge1xuICAgIGUudGFyZ2V0LmNsYXNzTmFtZSA9IFwiY2hrYm94IGZhIGZhLVwiICsgKGUudGFyZ2V0LmNsYXNzTmFtZT8uaW5jbHVkZXMoXCJjaGVjay1zcXVhcmVcIikgPyBcImNoZWNrLVwiIDogXCJcIikgKyBcInNxdWFyZVwiO1xuICAgIChlLnRhcmdldC5vbmlucHV0IGFzIGFueSkoKTtcbiAgICBhdXRvU2F2ZSgpO1xuICB9KTtcbiAgc2VsZWN0KFwiLmxvYWRlcnRleHRjb25mXCIpLm9uKFwiYmx1clwiLCBhdXRvU2F2ZSk7XG4gIExvYWRlckV2ZW50LmVtaXQoXCJDb25maWdQYWdlUG9zdFJlbmRlclwiKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNvbmZpZ0l0ZW0oXG4gIGlkOiBzdHJpbmcsXG4gIHN0Z2lkOiBzdHJpbmcsXG4gIG5hbWU6IHN0cmluZyxcbiAgdHlwZTogc3RyaW5nLFxuICBkZXNjOiBzdHJpbmcsXG4gIGNoZWNrOiAoYXJnOiBzdHJpbmcpID0+IHN0cmluZyB8IHVuZGVmaW5lZCA9IChhcmcpID0+IHVuZGVmaW5lZCxcbiAgdmFsdWU6IHN0cmluZ1xuKSB7XG4gIGxldCBDRFQgPSBnZXRXaW5kb3dQcm9wZXJ0eShcIkNEVFwiKSBhcyBJbnRlcm5hbENvbmZpZ1tdLCBydmFsID0geyBpZCwgdHlwZSwgc3RnaWQsIG5hbWUsIGRlc2MsIGNoZWNrLCB2YWx1ZSB9O1xuICBDRFQucHVzaChydmFsKTtcbiAgc2V0V2luZG93UHJvcGVydHkoXCJDRFRcIiwgQ0RUKTtcbiAgcmV0dXJuIHJ2YWw7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1lbnUoKTogdm9pZCB7XG4gIHNldFdpbmRvd1Byb3BlcnR5KFwiZ2V0Q29uZmlnXCIsIGZ1bmN0aW9uIChpZDogc3RyaW5nLCBzaWQ6IHN0cmluZykge1xuICAgIHJldHVybiBnZXRDb25maWdWYWwoaWQsIHNpZCwgdW5kZWZpbmVkKTtcbiAgfSk7XG5cbiAgRE9NVXRpbHMubG9hZCgoKSA9PiB7XG4gICAgc2VsZWN0KFwiZGl2LmFwcGwgPiBkaXYudGJuID4gdWxcIikucHJlcGVuZChcbiAgICAgIFwiPGxpPjxhIGlkPSdtYW5hZ2VfY29uZmlnJyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7JyBcIiArXG4gICAgICBcImhyZWY9J2h0dHBzOi8vd3d3Lm1jYmJzLm5ldC9ob21lLnBocD9tb2Q9c3BhY2VjcCZiYnNtb2Q9Y29uZmlnJz7mqKHlnZfpgInpobnkuK3lv4M8L2E+PC9saT5cIlxuICAgICk7XG4gICAgc2VsZWN0KFwiI21hbmFnZV9jb25maWdcIikub24oXCJjbGlja1wiLCAoZTogYW55KSA9PiB7XG4gICAgICBpZihpc0RpcnR5KCkpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGR1bXBDb25maWdQYWdlKCk7XG4gICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsISwgXCJodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPWNvbmZpZ1wiKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgY3JlYXRlTWVudSwgZHVtcENvbmZpZ1BhZ2UsIGNyZWF0ZUNvbmZpZ0l0ZW0sIGdldENvbmZpZ1ZhbCwgc2V0Q29uZmlnVmFsIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBTUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/libs/configpage.ts\n");

/***/ }),

/***/ "./src/libs/crossorigin.ts":
/*!*********************************!*\
  !*** ./src/libs/crossorigin.ts ***!
  \*********************************/
/*! namespace exports */
/*! export getCrossOriginData [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getCrossOriginData\": () => /* binding */ getCrossOriginData\n/* harmony export */ });\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n;\nfunction getCrossOriginData(url, onerror = () => { }, onsuccess = () => { }, type = \"plain\") {\n    return (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMXmlhttpRequest)({\n        method: \"GET\",\n        url: url,\n        timeout: 5000,\n        ontimeout: () => onerror(\"网络错误：连接超时\"),\n        onerror: () => onerror(\"网络错误：没有更多信息\"),\n        onload: (details) => {\n            if (details.status != 200) {\n                onerror(`错误：${details.status} ${details.statusText}`);\n            }\n            else {\n                if (type == \"json\") {\n                    try {\n                        onsuccess(JSON.parse(details.responseText));\n                    }\n                    catch (ex) {\n                        onerror(\"JSON解析错误\");\n                    }\n                }\n                else if (type == \"plain\") {\n                    onsuccess(details.responseText);\n                }\n            }\n        }\n    });\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9jcm9zc29yaWdpbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2xpYnMvY3Jvc3NvcmlnaW4udHM/OGIxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTVhtbGh0dHBSZXF1ZXN0IH0gZnJvbSBcIi4vdXNmdW5jXCI7XG5cbmZ1bmN0aW9uIGdldENyb3NzT3JpZ2luRGF0YShcbiAgdXJsOiBzdHJpbmcsXG4gIG9uZXJyb3I6IChtc2c6IHN0cmluZykgPT4gdm9pZCA9ICgpID0+IHt9LFxuICBvbnN1Y2Nlc3M6IChtc2c6IGFueSkgPT4gdm9pZCA9ICgpID0+IHt9LFxuICB0eXBlOiBzdHJpbmcgPSBcInBsYWluXCJcbikge1xuICByZXR1cm4gR01YbWxodHRwUmVxdWVzdCh7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHVybDogdXJsLFxuICAgIHRpbWVvdXQ6IDUwMDAsXG4gICAgb250aW1lb3V0OiAoKSA9PiBvbmVycm9yKFwi572R57uc6ZSZ6K+v77ya6L+e5o6l6LaF5pe2XCIpLFxuICAgIG9uZXJyb3I6ICgpID0+IG9uZXJyb3IoXCLnvZHnu5zplJnor6/vvJrmsqHmnInmm7TlpJrkv6Hmga9cIiksXG4gICAgb25sb2FkOiAoZGV0YWlsczogYW55KSA9PiB7XG4gICAgICBpZihkZXRhaWxzLnN0YXR1cyAhPSAyMDApIHtcbiAgICAgICAgb25lcnJvcihg6ZSZ6K+v77yaJHtkZXRhaWxzLnN0YXR1c30gJHtkZXRhaWxzLnN0YXR1c1RleHR9YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKHR5cGUgPT0gXCJqc29uXCIpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgb25zdWNjZXNzKEpTT04ucGFyc2UoZGV0YWlscy5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgb25lcnJvcihcIkpTT07op6PmnpDplJnor69cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSBcInBsYWluXCIpIHtcbiAgICAgICAgICBvbnN1Y2Nlc3MoZGV0YWlscy5yZXNwb25zZVRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydCB7IGdldENyb3NzT3JpZ2luRGF0YSB9OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/crossorigin.ts\n");

/***/ }),

/***/ "./src/libs/domutils.ts":
/*!******************************!*\
  !*** ./src/libs/domutils.ts ***!
  \******************************/
/*! namespace exports */
/*! export DOMUtils [provided] [no usage info] [missing usage info prevents renaming] */
/*! export select [provided] [no usage info] [missing usage info prevents renaming] */
/*! export trim [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DOMUtils\": () => /* binding */ DOMUtils,\n/* harmony export */   \"select\": () => /* binding */ select,\n/* harmony export */   \"trim\": () => /* binding */ trim\n/* harmony export */ });\nlet cbs = [];\nwindow.addEventListener(\"load\", () => {\n    for (let cb of cbs)\n        cb();\n    cbs = null;\n});\nclass DOMUtils {\n    constructor(nodeList) {\n        this.elements = [];\n        for (let x of nodeList)\n            this.elements.push(x);\n    }\n    static select(selector) {\n        return typeof selector == \"string\" ? new DOMUtils(document.querySelectorAll(selector)) : new DOMUtils([selector]);\n    }\n    static ban(html) {\n        let span = document.createElement(\"span\");\n        span.innerHTML = html;\n        let flit = (ele) => {\n            var _a;\n            if ([\"SCRIPT\", \"APPLET\", \"OBJECT\", \"STYLE\", \"LINK\"].includes(ele.tagName)) {\n                ele.remove();\n                span.className = \"banned-by-bbs-loader\";\n                return;\n            }\n            for (let i of ele.getAttributeNames()) {\n                if (i.startsWith(\"on\")) {\n                    ele.removeAttribute(i);\n                    span.className = \"banned-by-bbs-loader\";\n                }\n            }\n            if (ele instanceof HTMLLinkElement && ((_a = ele.href) === null || _a === void 0 ? void 0 : _a.startsWith(\"javascript\"))) {\n                ele.href = \"\";\n                span.className = \"banned-by-bbs-loader\";\n            }\n            for (let i of ele.children)\n                flit(i);\n        };\n        flit(span);\n        return span.outerHTML;\n    }\n    static load(cb) {\n        if (cbs) {\n            cbs.push(cb);\n        }\n        else {\n            setTimeout(cb, 0);\n        }\n        return DOMUtils;\n    }\n    each(func) {\n        this.elements.forEach(func);\n        return this;\n    }\n    remove() {\n        this.each(e => e.remove());\n        return this;\n    }\n    html(html) {\n        var _a;\n        return typeof html == \"string\" ? this.each(e => e.innerHTML = html) : (_a = this.elements[0]) === null || _a === void 0 ? void 0 : _a.innerHTML;\n    }\n    hasClass(name) {\n        var _a;\n        return (_a = this.elements[0]) === null || _a === void 0 ? void 0 : _a.classList.contains(name);\n    }\n    removeClass(name) {\n        return this.each(v => v.classList.remove(name));\n    }\n    addClass(name) {\n        return this.each(v => v.classList.add(name));\n    }\n    css(k, value) {\n        var _a;\n        return typeof value == \"string\" ? this.each(v => v.style[k] = value) : (_a = this.elements[0]) === null || _a === void 0 ? void 0 : _a.style[k];\n    }\n    val(value) {\n        var _a;\n        return typeof value == \"string\" ? this.each(v => v.value = value) : (_a = this.elements[0]) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    on(ev, cb) {\n        return this.each(v => v.addEventListener(ev, cb));\n    }\n    append(value) {\n        return this.each(v => {\n            if (typeof value == \"string\") {\n                let span = document.createElement('span');\n                span.innerHTML = value;\n                while (span.childNodes[0])\n                    v.append(span.childNodes[0]);\n            }\n            else {\n                v.append(value);\n            }\n        });\n    }\n    prepend(value) {\n        return this.each(v => {\n            if (typeof value == \"string\") {\n                let span = document.createElement('span');\n                span.innerHTML = value;\n                while (span.childNodes[span.childNodes.length - 1])\n                    v.prepend(span.childNodes[span.childNodes.length - 1]);\n            }\n            else {\n                v.prepend(value);\n            }\n        });\n    }\n    after(value) {\n        return this.each(v => {\n            if (typeof value == \"string\") {\n                let span = document.createElement('span');\n                span.innerHTML = value;\n                while (span.childNodes[span.childNodes.length - 1])\n                    v.after(span.childNodes[span.childNodes.length - 1]);\n            }\n            else {\n                v.after(value);\n            }\n        });\n    }\n    parent() {\n        let collect = [];\n        this.each(v => {\n            if (v.parentElement)\n                collect.push(v.parentElement);\n        });\n        return new DOMUtils(collect);\n    }\n    hide() {\n        return this.css(\"display\", \"none\");\n    }\n    show() {\n        return this.css(\"display\", \"\");\n    }\n    attr(k, value) {\n        var _a;\n        return typeof value == \"string\" ? this.each(v => v.setAttribute(k, value)) : (_a = this.elements[0]) === null || _a === void 0 ? void 0 : _a.getAttribute(k);\n    }\n    data(k, value) {\n        return this.attr(\"data-\" + k, value);\n    }\n    foreach(cb) {\n        for (let i in this.elements)\n            cb(i, this.elements[i]);\n        return this;\n    }\n}\nfunction select(selector) {\n    return DOMUtils.select(selector);\n}\nfunction trim(str) {\n    return str ? str.trim() : \"\";\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9kb211dGlscy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2xpYnMvZG9tdXRpbHMudHM/ZTdmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY2JzOiBhbnkgPSBbXTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgZm9yKGxldCBjYiBvZiBjYnMpXG4gICAgY2IoKTtcbiAgY2JzID0gbnVsbDtcbn0pXG5cbmNsYXNzIERPTVV0aWxzIHtcbiAgcHVibGljIGVsZW1lbnRzOiBhbnlbXTtcbiAgY29uc3RydWN0b3Iobm9kZUxpc3Q6IE5vZGVMaXN0IHwgSFRNTENvbGxlY3Rpb24gfCBBcnJheTxFbGVtZW50Pikge1xuICAgIHRoaXMuZWxlbWVudHMgPSBbXTtcbiAgICBmb3IgKGxldCB4IG9mIG5vZGVMaXN0KVxuICAgICAgdGhpcy5lbGVtZW50cy5wdXNoKHgpO1xuICB9XG5cbiAgc3RhdGljIHNlbGVjdChzZWxlY3Rvcjogc3RyaW5nIHwgRWxlbWVudCkge1xuICAgIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT0gXCJzdHJpbmdcIiA/IG5ldyBET01VdGlscyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSkgOiBuZXcgRE9NVXRpbHMoW3NlbGVjdG9yXSk7XG4gIH1cblxuICBzdGF0aWMgYmFuKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBzcGFuLmlubmVySFRNTCA9IGh0bWw7XG4gICAgbGV0IGZsaXQgPSAoZWxlOiBFbGVtZW50KSA9PiB7XG4gICAgICBpZihbXCJTQ1JJUFRcIiwgXCJBUFBMRVRcIiwgXCJPQkpFQ1RcIiwgXCJTVFlMRVwiLCBcIkxJTktcIl0uaW5jbHVkZXMoZWxlLnRhZ05hbWUpKSB7XG4gICAgICAgIGVsZS5yZW1vdmUoKTtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBcImJhbm5lZC1ieS1iYnMtbG9hZGVyXCI7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvcihsZXQgaSBvZiBlbGUuZ2V0QXR0cmlidXRlTmFtZXMoKSkge1xuICAgICAgICBpZihpLnN0YXJ0c1dpdGgoXCJvblwiKSl7XG4gICAgICAgICAgZWxlLnJlbW92ZUF0dHJpYnV0ZShpKTtcbiAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IFwiYmFubmVkLWJ5LWJicy1sb2FkZXJcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYoZWxlIGluc3RhbmNlb2YgSFRNTExpbmtFbGVtZW50ICYmIGVsZS5ocmVmPy5zdGFydHNXaXRoKFwiamF2YXNjcmlwdFwiKSkgeyAvLyDpmLJqYXZhc2NyaXB0Onh4eOmTvuaOpVxuICAgICAgICBlbGUuaHJlZiA9IFwiXCI7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gXCJiYW5uZWQtYnktYmJzLWxvYWRlclwiO1xuICAgICAgfVxuICAgICAgZm9yKGxldCBpIG9mIGVsZS5jaGlsZHJlbilcbiAgICAgICAgZmxpdChpKTtcbiAgICB9XG4gICAgZmxpdChzcGFuKTtcbiAgICByZXR1cm4gc3Bhbi5vdXRlckhUTUw7IC8vIOi/memHjOS9v+eUqG91dGVySFRNTOaYr+S4uuS6huS/neeVmWNsYXNzXG4gIH1cblxuICBzdGF0aWMgbG9hZChjYjogKCkgPT4gdm9pZCkge1xuICAgIGlmKGNicykge1xuICAgICAgY2JzLnB1c2goY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KGNiLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIERPTVV0aWxzO1xuICB9XG5cbiAgZWFjaChmdW5jOiAodjogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKGZ1bmMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMuZWFjaChlID0+IGUucmVtb3ZlKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaHRtbChodG1sPzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBodG1sID09IFwic3RyaW5nXCIgPyB0aGlzLmVhY2goZSA9PiBlLmlubmVySFRNTCA9IGh0bWwpIDogdGhpcy5lbGVtZW50c1swXT8uaW5uZXJIVE1MO1xuICB9XG5cbiAgaGFzQ2xhc3MobmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHNbMF0/LmNsYXNzTGlzdC5jb250YWlucyhuYW1lKTtcbiAgfVxuXG4gIHJlbW92ZUNsYXNzKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmVhY2godiA9PiB2LmNsYXNzTGlzdC5yZW1vdmUobmFtZSkpO1xuICB9XG5cbiAgYWRkQ2xhc3MobmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaCh2ID0+IHYuY2xhc3NMaXN0LmFkZChuYW1lKSk7XG4gIH1cblxuICBjc3Moazogc3RyaW5nLCB2YWx1ZT86IHN0cmluZykge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIiA/IHRoaXMuZWFjaCh2ID0+IHYuc3R5bGVba10gPSB2YWx1ZSkgOiB0aGlzLmVsZW1lbnRzWzBdPy5zdHlsZVtrXTtcbiAgfVxuXG4gIHZhbCh2YWx1ZT86IHN0cmluZykge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIiA/IHRoaXMuZWFjaCh2ID0+IHYudmFsdWUgPSB2YWx1ZSkgOiB0aGlzLmVsZW1lbnRzWzBdPy52YWx1ZTtcbiAgfVxuXG4gIG9uKGV2OiBzdHJpbmcsIGNiOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKHYgPT4gdi5hZGRFdmVudExpc3RlbmVyKGV2LCBjYikpO1xuICB9XG5cbiAgYXBwZW5kKHZhbHVlOiBzdHJpbmcgfCBIVE1MRWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLmVhY2godiA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgbGV0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHNwYW4uaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgIHdoaWxlIChzcGFuLmNoaWxkTm9kZXNbMF0pXG4gICAgICAgICAgdi5hcHBlbmQoc3Bhbi5jaGlsZE5vZGVzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHYuYXBwZW5kKHZhbHVlKVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJlcGVuZCh2YWx1ZTogc3RyaW5nIHwgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKHYgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICB3aGlsZSAoc3Bhbi5jaGlsZE5vZGVzW3NwYW4uY2hpbGROb2Rlcy5sZW5ndGggLSAxXSlcbiAgICAgICAgICB2LnByZXBlbmQoc3Bhbi5jaGlsZE5vZGVzW3NwYW4uY2hpbGROb2Rlcy5sZW5ndGggLSAxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2LnByZXBlbmQodmFsdWUpXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhZnRlcih2YWx1ZTogc3RyaW5nIHwgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5lYWNoKHYgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICB3aGlsZSAoc3Bhbi5jaGlsZE5vZGVzW3NwYW4uY2hpbGROb2Rlcy5sZW5ndGggLSAxXSlcbiAgICAgICAgICB2LmFmdGVyKHNwYW4uY2hpbGROb2Rlc1tzcGFuLmNoaWxkTm9kZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdi5hZnRlcih2YWx1ZSlcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHBhcmVudCgpIHtcbiAgICBsZXQgY29sbGVjdDogYW55ID0gW107XG4gICAgdGhpcy5lYWNoKHYgPT4ge1xuICAgICAgaWYgKHYucGFyZW50RWxlbWVudClcbiAgICAgICAgY29sbGVjdC5wdXNoKHYucGFyZW50RWxlbWVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBET01VdGlscyhjb2xsZWN0KTtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gIH1cblxuICBzaG93KCkge1xuICAgIHJldHVybiB0aGlzLmNzcyhcImRpc3BsYXlcIiwgXCJcIik7XG4gIH1cblxuICBhdHRyKGs6IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09IFwic3RyaW5nXCIgPyB0aGlzLmVhY2godiA9PiB2LnNldEF0dHJpYnV0ZShrLCB2YWx1ZSkpIDogdGhpcy5lbGVtZW50c1swXT8uZ2V0QXR0cmlidXRlKGspO1xuICB9XG5cbiAgZGF0YShrOiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuYXR0cihcImRhdGEtXCIgKyBrLCB2YWx1ZSk7XG4gIH1cblxuICBmb3JlYWNoKGNiOiAoaTogbnVtYmVyLCB2OiBhbnkpID0+IHZvaWQpIHtcbiAgICBmb3IobGV0IGkgaW4gdGhpcy5lbGVtZW50cylcbiAgICAgIGNiKGkgYXMgdW5rbm93biBhcyBudW1iZXIsIHRoaXMuZWxlbWVudHNbaV0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNlbGVjdChzZWxlY3Rvcjogc3RyaW5nIHwgRWxlbWVudCkge1xuICByZXR1cm4gRE9NVXRpbHMuc2VsZWN0KHNlbGVjdG9yKTtcbn1cblxuZnVuY3Rpb24gdHJpbShzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyID8gc3RyLnRyaW0oKSA6IFwiXCI7XG59XG5cbmV4cG9ydCB7IERPTVV0aWxzLCBzZWxlY3QsIHRyaW0gfTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBRUE7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOztBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/libs/domutils.ts\n");

/***/ }),

/***/ "./src/libs/encrypt.ts":
/*!*****************************!*\
  !*** ./src/libs/encrypt.ts ***!
  \*****************************/
/*! namespace exports */
/*! export getAPIToken [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getAPIToken\": () => /* binding */ getAPIToken\n/* harmony export */ });\nlet API_TOKEN = Math.floor(Math.random() * 1048576 * 1048576 * 1048576).toString(16);\nfunction getAPIToken() {\n    return API_TOKEN;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9lbmNyeXB0LnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWNiYnMtbG9hZGVyLWNvcmUvLi9zcmMvbGlicy9lbmNyeXB0LnRzPzQyYzEiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IEFQSV9UT0tFTiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwNDg1NzYgKiAxMDQ4NTc2ICogMTA0ODU3NikudG9TdHJpbmcoMTYpO1xuZnVuY3Rpb24gZ2V0QVBJVG9rZW4oKSB7XG4gIHJldHVybiBBUElfVE9LRU47XG59XG5cbmV4cG9ydCB7IGdldEFQSVRva2VuIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/encrypt.ts\n");

/***/ }),

/***/ "./src/libs/manager.ts":
/*!*****************************!*\
  !*** ./src/libs/manager.ts ***!
  \*****************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _api_STDAPI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/STDAPI */ \"./src/api/STDAPI.ts\");\n/* harmony import */ var _codeload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./codeload */ \"./src/libs/codeload.ts\");\n/* harmony import */ var _static__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./static */ \"./src/libs/static.ts\");\n/* harmony import */ var _updator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./updator */ \"./src/libs/updator.ts\");\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../craftmcbbs/craft-ui */ \"./src/craftmcbbs/craft-ui.js\");\n/* harmony import */ var _crossorigin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./crossorigin */ \"./src/libs/crossorigin.ts\");\n/* harmony import */ var _configpage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./configpage */ \"./src/libs/configpage.ts\");\n/* harmony import */ var _domutils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./domutils */ \"./src/libs/domutils.ts\");\n;\n\n\n\n\n\n\n\n\nconst activeChecking = new Map();\nfunction createManageHtml(meta, isCore, earlyLoad, color) {\n    return `<li id='${meta.id}'>\n    <div style='display:inline;'>\n      <img src='${meta.icon || \"\"}' width='50' height='50' style=\"vertical-align:middle;float:left;\"/>\n      <div style=\"height: 8em\">\n        &nbsp;&nbsp;\n        <span style='font-size:18px;color:${color}'>\n          <strong>${meta.name || \"Nameless\"}</strong>\n        </span>\n        &nbsp;&nbsp;&nbsp;\n        <span id='vtag-${meta.id}' style='font-size:12px;color:#150029;'>\n          ${meta.id || \"loader.nameless\"}@${(meta.version || \"1.0.0\") +\n        (isCore ? \"&nbsp;<span style='color:#ff0000'><b>[核心模组]</b></span>\" : \"\") +\n        (earlyLoad ? \"&nbsp;<span style='color:#0000ff'><b>[早期加载]</b></span>\" : \"\")}\n          <span style='color:#df307f;${(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.getTmpDisabled)().includes(meta.id) ? \"\" : \"display: none;\"}'>\n            [依赖关系原因停用]\n          </span>\n        </span>\n        <br/>\n          &nbsp;&nbsp;\n        <span style='font-size:16px;color:#df307f;'>${meta.author || \"Someone\"}</span>\n        <br/>\n        &nbsp;&nbsp;\n        <span style='font-size:12px'>${meta.description}</span>\n        <div style=\"float: right;\">\n          <button type='button' class='pn pnc remove' onclick='window.notifyUninstall(\"${meta.id}\")'>\n            <strong>删除模块</strong>\n          </button>\n          &nbsp;&nbsp;\n          <button type='button' class='pn pnc onoff' onclick='window.notifyOnOff(\"${meta.id}\")'>\n            <strong>${(0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"loader.all\", {})[meta.id] ? \"禁用\" : \"启用\"}</strong>\n          </button>\n          <button type='button' class='pn pnc showsrc' data-mlsource='${meta.id}'>\n            <strong>查看源代码</strong>\n          </button>\n        </div>\n      </div>\n    </div>\n  </li>`;\n}\nfunction createBtn() {\n    _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.load(() => {\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"ul.user_info_menu_btn\").append(\"<li><a href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager'>MCBBS 模块管理</a></li>\");\n    });\n}\nfunction createMenu() {\n    if (window.location.href.startsWith(\"https://www.mcbbs.net/home.php?mod=spacecp\")) {\n        _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.load(() => {\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"div.appl > div.tbn > ul\").prepend(\"<li><a id='loader_manager' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager'\" +\n                \"style='cursor:pointer;'>模块管理</a></li>\");\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)('#loader_manager').on('click', (e) => {\n                if ((0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDirty)())\n                    return;\n                e.preventDefault();\n                dumpManager();\n                history.replaceState(null, null, \"https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager\");\n            });\n        });\n        _configpage__WEBPACK_IMPORTED_MODULE_7__.default.createMenu();\n    }\n}\nfunction onInstall(st) {\n    activeChecking.delete(st.get(\"id\"));\n    (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.resortDependency)();\n    dumpManager();\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_base64\").val((0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(`code-${st.get(\"id\")}`, \"\"));\n    (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showDialogFull)({\n        msg: `${_domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(st.get(\"name\") || st.get(\"id\"))}已成功安装在您的 MCBBS 上。\n      <br/>  \n      以下是有关本次安装的详情：\n      <br/>  \n      &nbsp;&nbsp;软件包类型：Mod\n      <br/>\n      &nbsp;&nbsp;软件包 ID：${_domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(st.get(\"id\"))}\n      <br/>\n      &nbsp;作者：${_domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(st.get(\"author\") || \"未知\")}\n      <br/>\n      &nbsp;&nbsp版本：${_domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.ban(st.get(\"version\") || \"\")}`,\n        title: \"安装简报\",\n        mode: \"right\",\n    });\n    (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showPopper)(\"成功安装了模块\");\n}\nfunction onFailure(st) {\n    (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showAlert)(st, \"安装失败\", () => { });\n}\nfunction dumpManager() {\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"title\").html(\"MCBBS Loader - 管理页面\");\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".a\").removeClass(\"a\");\n    setTimeout(() => (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#loader_manager\").parent().addClass(\"a\"), 50);\n    let emsg = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.getDependencyError)().replace(/\\n/g, \"<br>\");\n    _domutils__WEBPACK_IMPORTED_MODULE_8__.DOMUtils.load(() => {\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"div[class='bm bw0']\").css(\"user-select\", \"none\");\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"div[class='bm bw0']\").html(`<span style='font-size:1.5rem'>模块管理&nbsp;&nbsp;&nbsp;版本&nbsp;${(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.getAPIVersion)()}\n        <span style=\"font-size: 0.8em;color:red\" >${!(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDependencySolved)() ? \"<br>依赖关系未解决\" : \"\"}</span>\n        <span style=\"font-size: 0.8em;color: brown\" >${(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDirty)() ? \"<br>当前的设置需要刷新才能生效\" : \"\"}</span>\n      </span>\n      <br/>\n      <hr/>\n      <span style='${!(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDependencySolved)() ? \"\" : \"display:none;\"}font-size:1rem;'>错误</span>\n      <div id='deperr' style='overflow:auto;color:#ff0000;${!(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDependencySolved)() ? \"\" : \"display:none;\"}'>\n        ${emsg}\n      </div>\n      <hr style='${!(0,_codeload__WEBPACK_IMPORTED_MODULE_1__.isDependencySolved)() ? \"\" : \"display:none;\"}'/>` +\n            _static__WEBPACK_IMPORTED_MODULE_2__.HTML_MANAGER_FOOTER);\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#use_mloader\").on(\"click\", () => (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").val(\"MCBBS-Loader:仓库名:模块 ID:main\"));\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#use_cv\").on(\"click\", () => (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").val(\"CaveNightingale:CaveNightingale-MCBBS-Modules:模块 ID:master\"));\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#use_mext\").on(\"click\", () => (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").val(\"MCBBS-Loader:Integration-Motion:模块 ID:main\"));\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").on(\"click\", () => {\n            if ((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\") == \"false\") {\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\", \"true\");\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_base64\").show();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").hide();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".srcc\").hide();\n            }\n            else {\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\", \"false\");\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_base64\").hide();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").show();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".srcc\").show();\n            }\n        });\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.setWindowProperty)(\"notifyUninstall\", (id) => {\n            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.deleteModule)(id, () => {\n                (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.resortDependency)();\n                dumpManager();\n                (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showPopper)(\"成功移除了模块\");\n            });\n        });\n        (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.setWindowProperty)(\"notifyOnOff\", (id) => {\n            let all = (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"loader.all\", {});\n            all[id] = !all[id];\n            (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMSetValue)(\"loader.all\", all);\n            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.markDirty)();\n            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.resortDependency)();\n            dumpManager();\n        });\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install\").on(\"click\", () => {\n            var _a;\n            let src = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\") == \"true\" ? \"#install_base64\" : \"#install_uno\";\n            let str = ((_a = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(src).val()) === null || _a === void 0 ? void 0 : _a.toString()) || \"\";\n            try {\n                let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(atob(str));\n                if (typeof st != \"string\") {\n                    onInstall(st);\n                }\n                else {\n                    let isUrlRegex = /^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g;\n                    if (isUrlRegex.test(str)) {\n                        (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showPopper)(\"正在获取数据……\");\n                        try {\n                            (0,_crossorigin__WEBPACK_IMPORTED_MODULE_6__.getCrossOriginData)(str, onFailure, (data) => {\n                                let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(data);\n                                if (typeof st != \"string\")\n                                    onInstall(st);\n                                else\n                                    onFailure(st);\n                            });\n                        }\n                        catch (_b) {\n                            let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(str);\n                            if (typeof st != \"string\")\n                                onInstall(st);\n                            else\n                                (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(str), onInstall, onFailure);\n                        }\n                    }\n                    else {\n                        let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(str);\n                        if (typeof st != \"string\")\n                            onInstall(st);\n                        else\n                            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(str), onInstall, onFailure);\n                    }\n                }\n            }\n            catch (_c) {\n                let isUrlRegex = /^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g;\n                if (isUrlRegex.test(str)) {\n                    (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showPopper)(\"正在获取数据……\");\n                    try {\n                        (0,_crossorigin__WEBPACK_IMPORTED_MODULE_6__.getCrossOriginData)(str, onFailure, (data) => {\n                            let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(data);\n                            if (typeof st != \"string\")\n                                onInstall(st);\n                            else\n                                onFailure(st);\n                        });\n                    }\n                    catch (_d) {\n                        let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(str);\n                        if (typeof st != \"string\")\n                            onInstall(st);\n                        else\n                            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(str), onInstall, onFailure);\n                    }\n                }\n                else {\n                    let st = (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.addModule)(str);\n                    if (typeof st != \"string\")\n                        onInstall(st);\n                    else\n                        (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(str), onInstall, () => onFailure(`无效 ID 或网络错误，所有安装途径均失败`));\n                }\n            }\n        });\n        let all_modules = (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"loader.all\", {});\n        for (let m of Object.entries(all_modules)) {\n            let meta = (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"meta-\" + m[0], { id: \"impossible\" });\n            let ele = createManageHtml(meta, meta.permissions.contains(\"loader:core\"), meta.permissions.contains(\"loader:earlyload\"), \"#5d2391\");\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#all_modules\").append(ele);\n        }\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".showsrc\").on(\"click\", (e) => {\n            if ((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\") == \"false\") {\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#debugmode\").attr(\"debug\", \"true\");\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_base64\").show();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_uno\").hide();\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".srcc\").hide();\n            }\n            let id = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).data(\"mlsource\") || (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).parent().data(\"mlsource\");\n            if (!id)\n                return;\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#install_base64\").val((0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(`code-${id}`, \"\"));\n        });\n        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\"#all_modules > li\").foreach((_i, e) => {\n            let id = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e).attr(\"id\") || \"loader.impossible\";\n            let meta = (0,_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(`meta-${id}`);\n            if (activeChecking.get(id) != meta.version) {\n                activeChecking.set(id, meta.version);\n                (0,_updator__WEBPACK_IMPORTED_MODULE_3__.checkUpdate)(meta, (state, ov, nv) => {\n                    if (activeChecking.get(id) != meta.version)\n                        return;\n                    activeChecking.delete(id);\n                    let gtxt;\n                    let shouldUpdate = false;\n                    switch (state) {\n                        case \"latest-api-too-early\":\n                            gtxt = `<span style='color:#f16d2e'><b>[已过期]</b></span>`;\n                            break;\n                        case \"latest-no-update-url\":\n                        case \"latest-no-version\":\n                            gtxt = `<span style='color:#636363'><b>[本地]</b></span>`;\n                            break;\n                        case \"latest-version-equal-or-earlier\":\n                            gtxt = `<span style='color:#df307f'><b>[最新]</b></span>`;\n                            break;\n                        default:\n                            if (!state.startsWith(\"latest\")) {\n                                gtxt = `<span style='color:#ffaec8'><b>[有可用更新]</b></span>`;\n                                shouldUpdate = true;\n                            }\n                    }\n                    let oh = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html();\n                    oh = `${oh}${shouldUpdate ? \"&nbsp;->&nbsp;\" + nv : \"\"}&nbsp;${gtxt}`;\n                    (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html(oh);\n                    if (shouldUpdate)\n                        (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).parent().append(`<button type='button' style='float:right' class='pn pnc update' data-mlurl='${state}'>\n                <strong>更新模块</strong>\n              </button>`);\n                    (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(\".update\").on(\"click\", (e) => {\n                        let url = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).data(\"mlurl\") || (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).parent().data(\"mlurl\");\n                        if (!url)\n                            return;\n                        if ((0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).data(\"mlurl\"))\n                            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).remove();\n                        else\n                            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(e.target).parent().remove();\n                        (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.markDirty)();\n                        (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.installFromUrl)(url, () => {\n                            dumpManager();\n                            let oh = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html();\n                            oh = oh.replace(`<span style=\"color:#ffaec8\"><b>[有可用更新]</b></span>`, `<span style='color:#df307f'><b>[已更新]</b></span>`);\n                            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html(oh);\n                        }, () => {\n                            let oh = (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html();\n                            oh = oh.replace(`<span style=\"color:#ffaec8\"><b>[有可用更新]</b></span>`, `<span style='color:#ec1c24'><b>[更新失败]</b></span>`);\n                            (0,_domutils__WEBPACK_IMPORTED_MODULE_8__.select)(`[id='vtag-${meta.id}']`).html(oh);\n                        }, _codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(meta.gid));\n                        (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_5__.showPopper)(\"已尝试更新，更新效果在更新完成后刷新页面才会显示。\");\n                    });\n                });\n            }\n        });\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ createBtn, createMenu, dumpManager, onInstall, onFailure });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9tYW5hZ2VyLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWNiYnMtbG9hZGVyLWNvcmUvLi9zcmMvbGlicy9tYW5hZ2VyLnRzPzhhM2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QVBJVmVyc2lvbiB9IGZyb20gXCIuLi9hcGkvU1REQVBJXCI7XG5pbXBvcnQge1xuICBhZGRNb2R1bGUsXG4gIGRlbGV0ZU1vZHVsZSxcbiAgZ2V0RGVwZW5kZW5jeUVycm9yLFxuICBnZXRUbXBEaXNhYmxlZCxcbiAgR0lEVVJMLFxuICBpbnN0YWxsRnJvbUdJRCxcbiAgaW5zdGFsbEZyb21VcmwsXG4gIGlzRGVwZW5kZW5jeVNvbHZlZCxcbiAgaXNEaXJ0eSxcbiAgbWFya0RpcnR5LFxuICByZXNvcnREZXBlbmRlbmN5LFxufSBmcm9tIFwiLi9jb2RlbG9hZFwiO1xuaW1wb3J0IHsgSFRNTF9NQU5BR0VSX0ZPT1RFUiB9IGZyb20gXCIuL3N0YXRpY1wiO1xuaW1wb3J0IHsgY2hlY2tVcGRhdGUgfSBmcm9tIFwiLi91cGRhdG9yXCI7XG5pbXBvcnQgeyBHTUdldFZhbHVlLCBHTVNldFZhbHVlLCBzZXRXaW5kb3dQcm9wZXJ0eSB9IGZyb20gXCIuL3VzZnVuY1wiO1xuaW1wb3J0IHsgc2hvd0FsZXJ0LCBzaG93RGlhbG9nRnVsbCwgc2hvd1BvcHBlciB9IGZyb20gXCIuLi9jcmFmdG1jYmJzL2NyYWZ0LXVpXCI7XG5pbXBvcnQgeyBnZXRDcm9zc09yaWdpbkRhdGEgfSBmcm9tIFwiLi9jcm9zc29yaWdpblwiO1xuaW1wb3J0IGNvbmZpZ3BhZ2UgZnJvbSBcIi4vY29uZmlncGFnZVwiO1xuaW1wb3J0IHsgRE9NVXRpbHMsIHNlbGVjdCB9IGZyb20gXCIuL2RvbXV0aWxzXCI7XG5cbmNvbnN0IGFjdGl2ZUNoZWNraW5nOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gY3JlYXRlTWFuYWdlSHRtbChtZXRhOiBhbnksIGlzQ29yZTogYm9vbGVhbiwgZWFybHlMb2FkOiBib29sZWFuLCBjb2xvcjogc3RyaW5nKSB7XG4gIHJldHVybiBgPGxpIGlkPScke21ldGEuaWR9Jz5cbiAgICA8ZGl2IHN0eWxlPSdkaXNwbGF5OmlubGluZTsnPlxuICAgICAgPGltZyBzcmM9JyR7bWV0YS5pY29uIHx8IFwiXCJ9JyB3aWR0aD0nNTAnIGhlaWdodD0nNTAnIHN0eWxlPVwidmVydGljYWwtYWxpZ246bWlkZGxlO2Zsb2F0OmxlZnQ7XCIvPlxuICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogOGVtXCI+XG4gICAgICAgICZuYnNwOyZuYnNwO1xuICAgICAgICA8c3BhbiBzdHlsZT0nZm9udC1zaXplOjE4cHg7Y29sb3I6JHtjb2xvcn0nPlxuICAgICAgICAgIDxzdHJvbmc+JHttZXRhLm5hbWUgfHwgXCJOYW1lbGVzc1wifTwvc3Ryb25nPlxuICAgICAgICA8L3NwYW4+XG4gICAgICAgICZuYnNwOyZuYnNwOyZuYnNwO1xuICAgICAgICA8c3BhbiBpZD0ndnRhZy0ke21ldGEuaWR9JyBzdHlsZT0nZm9udC1zaXplOjEycHg7Y29sb3I6IzE1MDAyOTsnPlxuICAgICAgICAgICR7bWV0YS5pZCB8fCBcImxvYWRlci5uYW1lbGVzc1wifUAkeyhtZXRhLnZlcnNpb24gfHwgXCIxLjAuMFwiKSArXG4gICAgKGlzQ29yZSA/IFwiJm5ic3A7PHNwYW4gc3R5bGU9J2NvbG9yOiNmZjAwMDAnPjxiPlvmoLjlv4PmqKHnu4RdPC9iPjwvc3Bhbj5cIiA6IFwiXCIpICtcbiAgICAoZWFybHlMb2FkID8gXCImbmJzcDs8c3BhbiBzdHlsZT0nY29sb3I6IzAwMDBmZic+PGI+W+aXqeacn+WKoOi9vV08L2I+PC9zcGFuPlwiIDogXCJcIil9XG4gICAgICAgICAgPHNwYW4gc3R5bGU9J2NvbG9yOiNkZjMwN2Y7JHtnZXRUbXBEaXNhYmxlZCgpLmluY2x1ZGVzKG1ldGEuaWQpID8gXCJcIiA6IFwiZGlzcGxheTogbm9uZTtcIn0nPlxuICAgICAgICAgICAgW+S+nei1luWFs+ezu+WOn+WboOWBnOeUqF1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGJyLz5cbiAgICAgICAgICAmbmJzcDsmbmJzcDtcbiAgICAgICAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxNnB4O2NvbG9yOiNkZjMwN2Y7Jz4ke21ldGEuYXV0aG9yIHx8IFwiU29tZW9uZVwifTwvc3Bhbj5cbiAgICAgICAgPGJyLz5cbiAgICAgICAgJm5ic3A7Jm5ic3A7XG4gICAgICAgIDxzcGFuIHN0eWxlPSdmb250LXNpemU6MTJweCc+JHttZXRhLmRlc2NyaXB0aW9ufTwvc3Bhbj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImZsb2F0OiByaWdodDtcIj5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3BuIHBuYyByZW1vdmUnIG9uY2xpY2s9J3dpbmRvdy5ub3RpZnlVbmluc3RhbGwoXCIke21ldGEuaWR9XCIpJz5cbiAgICAgICAgICAgIDxzdHJvbmc+5Yig6Zmk5qih5Z2XPC9zdHJvbmc+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgJm5ic3A7Jm5ic3A7XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdwbiBwbmMgb25vZmYnIG9uY2xpY2s9J3dpbmRvdy5ub3RpZnlPbk9mZihcIiR7bWV0YS5pZH1cIiknPlxuICAgICAgICAgICAgPHN0cm9uZz4ke0dNR2V0VmFsdWUoXCJsb2FkZXIuYWxsXCIsIHt9KVttZXRhLmlkXSA/IFwi56aB55SoXCIgOiBcIuWQr+eUqFwifTwvc3Ryb25nPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ncG4gcG5jIHNob3dzcmMnIGRhdGEtbWxzb3VyY2U9JyR7bWV0YS5pZH0nPlxuICAgICAgICAgICAgPHN0cm9uZz7mn6XnnIvmupDku6PnoIE8L3N0cm9uZz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9saT5gO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCdG4oKTogdm9pZCB7XG4gIERPTVV0aWxzLmxvYWQoKCkgPT4ge1xuICAgIHNlbGVjdChcInVsLnVzZXJfaW5mb19tZW51X2J0blwiKS5hcHBlbmQoXG4gICAgICBcIjxsaT48YSBocmVmPSdodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPW1hbmFnZXInPk1DQkJTIOaooeWdl+euoeeQhjwvYT48L2xpPlwiXG4gICAgKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1lbnUoKTogdm9pZCB7XG4gIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5zdGFydHNXaXRoKFwiaHR0cHM6Ly93d3cubWNiYnMubmV0L2hvbWUucGhwP21vZD1zcGFjZWNwXCIpKSB7XG4gICAgRE9NVXRpbHMubG9hZCgoKSA9PiB7XG4gICAgICBzZWxlY3QoXCJkaXYuYXBwbCA+IGRpdi50Ym4gPiB1bFwiKS5wcmVwZW5kKFxuICAgICAgICBcIjxsaT48YSBpZD0nbG9hZGVyX21hbmFnZXInIGhyZWY9J2h0dHBzOi8vd3d3Lm1jYmJzLm5ldC9ob21lLnBocD9tb2Q9c3BhY2VjcCZiYnNtb2Q9bWFuYWdlcidcIiArXG4gICAgICAgIFwic3R5bGU9J2N1cnNvcjpwb2ludGVyOyc+5qih5Z2X566h55CGPC9hPjwvbGk+XCJcbiAgICAgICk7XG4gICAgICBzZWxlY3QoJyNsb2FkZXJfbWFuYWdlcicpLm9uKCdjbGljaycsIChlOiBhbnkpID0+IHtcbiAgICAgICAgaWYoaXNEaXJ0eSgpKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBkdW1wTWFuYWdlcigpO1xuICAgICAgICAvLyBudWxs5ZCO6Z2i5YqgIeaYr+S4uuS6huiuqee8luivkeWZqOmXreWYtFxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBudWxsISwgXCJodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPW1hbmFnZXJcIik7XG4gICAgICB9KVxuICAgIH0pO1xuICAgIGNvbmZpZ3BhZ2UuY3JlYXRlTWVudSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uSW5zdGFsbChzdDogTWFwPHN0cmluZywgc3RyaW5nPikge1xuICBhY3RpdmVDaGVja2luZy5kZWxldGUoc3QuZ2V0KFwiaWRcIikhKTtcbiAgcmVzb3J0RGVwZW5kZW5jeSgpO1xuICBkdW1wTWFuYWdlcigpO1xuICBzZWxlY3QoXCIjaW5zdGFsbF9iYXNlNjRcIikudmFsKEdNR2V0VmFsdWUoYGNvZGUtJHtzdC5nZXQoXCJpZFwiKX1gLCBcIlwiKSk7XG4gIHNob3dEaWFsb2dGdWxsKHtcbiAgICBtc2c6XG4gICAgICBgJHtET01VdGlscy5iYW4oc3QuZ2V0KFwibmFtZVwiKSB8fCBzdC5nZXQoXCJpZFwiKSEpfeW3suaIkOWKn+WuieijheWcqOaCqOeahCBNQ0JCUyDkuIrjgIJcbiAgICAgIDxici8+ICBcbiAgICAgIOS7peS4i+aYr+acieWFs+acrOasoeWuieijheeahOivpuaDhe+8mlxuICAgICAgPGJyLz4gIFxuICAgICAgJm5ic3A7Jm5ic3A76L2v5Lu25YyF57G75Z6L77yaTW9kXG4gICAgICA8YnIvPlxuICAgICAgJm5ic3A7Jm5ic3A76L2v5Lu25YyFIElE77yaJHtET01VdGlscy5iYW4oc3QuZ2V0KFwiaWRcIikhKX1cbiAgICAgIDxici8+XG4gICAgICAmbmJzcDvkvZzogIXvvJoke0RPTVV0aWxzLmJhbihzdC5nZXQoXCJhdXRob3JcIikgfHwgXCLmnKrnn6VcIil9XG4gICAgICA8YnIvPlxuICAgICAgJm5ic3A7Jm5ic3DniYjmnKzvvJoke0RPTVV0aWxzLmJhbihzdC5nZXQoXCJ2ZXJzaW9uXCIpIHx8IFwiXCIpfWAsXG4gICAgdGl0bGU6IFwi5a6J6KOF566A5oqlXCIsXG4gICAgbW9kZTogXCJyaWdodFwiLFxuICB9KTtcbiAgc2hvd1BvcHBlcihcIuaIkOWKn+WuieijheS6huaooeWdl1wiKTtcbn1cblxuLy8g5a6J6KOF5aSx6LSl5pe255qE5Yqo5L2cXG5mdW5jdGlvbiBvbkZhaWx1cmUoc3Q6IHN0cmluZykge1xuICBzaG93QWxlcnQoc3QsIFwi5a6J6KOF5aSx6LSlXCIsICgpID0+IHsgfSk7XG59XG5cbmZ1bmN0aW9uIGR1bXBNYW5hZ2VyKCkge1xuICBzZWxlY3QoXCJ0aXRsZVwiKS5odG1sKFwiTUNCQlMgTG9hZGVyIC0g566h55CG6aG16Z2iXCIpO1xuICBzZWxlY3QoXCIuYVwiKS5yZW1vdmVDbGFzcyhcImFcIik7XG4gIHNldFRpbWVvdXQoKCkgPT4gc2VsZWN0KFwiI2xvYWRlcl9tYW5hZ2VyXCIpLnBhcmVudCgpLmFkZENsYXNzKFwiYVwiKSwgNTApO1xuICBsZXQgZW1zZyA9IGdldERlcGVuZGVuY3lFcnJvcigpLnJlcGxhY2UoL1xcbi9nLCBcIjxicj5cIik7XG4gIERPTVV0aWxzLmxvYWQoKCkgPT4ge1xuICAgIHNlbGVjdChcImRpdltjbGFzcz0nYm0gYncwJ11cIikuY3NzKFwidXNlci1zZWxlY3RcIiwgXCJub25lXCIpO1xuICAgIHNlbGVjdChcImRpdltjbGFzcz0nYm0gYncwJ11cIikuaHRtbChcbiAgICAgIGA8c3BhbiBzdHlsZT0nZm9udC1zaXplOjEuNXJlbSc+5qih5Z2X566h55CGJm5ic3A7Jm5ic3A7Jm5ic3A754mI5pysJm5ic3A7JHtnZXRBUElWZXJzaW9uKCl9XG4gICAgICAgIDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAwLjhlbTtjb2xvcjpyZWRcIiA+JHshaXNEZXBlbmRlbmN5U29sdmVkKCkgPyBcIjxicj7kvp3otZblhbPns7vmnKrop6PlhrNcIiA6IFwiXCJ9PC9zcGFuPlxuICAgICAgICA8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogMC44ZW07Y29sb3I6IGJyb3duXCIgPiR7aXNEaXJ0eSgpID8gXCI8YnI+5b2T5YmN55qE6K6+572u6ZyA6KaB5Yi35paw5omN6IO955Sf5pWIXCIgOiBcIlwifTwvc3Bhbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxici8+XG4gICAgICA8aHIvPlxuICAgICAgPHNwYW4gc3R5bGU9JyR7IWlzRGVwZW5kZW5jeVNvbHZlZCgpID8gXCJcIiA6IFwiZGlzcGxheTpub25lO1wifWZvbnQtc2l6ZToxcmVtOyc+6ZSZ6K+vPC9zcGFuPlxuICAgICAgPGRpdiBpZD0nZGVwZXJyJyBzdHlsZT0nb3ZlcmZsb3c6YXV0bztjb2xvcjojZmYwMDAwOyR7IWlzRGVwZW5kZW5jeVNvbHZlZCgpID8gXCJcIiA6IFwiZGlzcGxheTpub25lO1wifSc+XG4gICAgICAgICR7ZW1zZ31cbiAgICAgIDwvZGl2PlxuICAgICAgPGhyIHN0eWxlPSckeyFpc0RlcGVuZGVuY3lTb2x2ZWQoKSA/IFwiXCIgOiBcImRpc3BsYXk6bm9uZTtcIn0nLz5gICtcbiAgICAgIEhUTUxfTUFOQUdFUl9GT09URVJcbiAgICApO1xuICAgIHNlbGVjdChcIiN1c2VfbWxvYWRlclwiKS5vbihcImNsaWNrXCIsICgpID0+IHNlbGVjdChcIiNpbnN0YWxsX3Vub1wiKS52YWwoXCJNQ0JCUy1Mb2FkZXI65LuT5bqT5ZCNOuaooeWdlyBJRDptYWluXCIpKTtcbiAgICBzZWxlY3QoXCIjdXNlX2N2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHNlbGVjdChcIiNpbnN0YWxsX3Vub1wiKS52YWwoXCJDYXZlTmlnaHRpbmdhbGU6Q2F2ZU5pZ2h0aW5nYWxlLU1DQkJTLU1vZHVsZXM65qih5Z2XIElEOm1hc3RlclwiKSk7XG4gICAgc2VsZWN0KFwiI3VzZV9tZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gc2VsZWN0KFwiI2luc3RhbGxfdW5vXCIpLnZhbChcIk1DQkJTLUxvYWRlcjpJbnRlZ3JhdGlvbi1Nb3Rpb2465qih5Z2XIElEOm1haW5cIikpO1xuXG4gICAgc2VsZWN0KFwiI2RlYnVnbW9kZVwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChzZWxlY3QoXCIjZGVidWdtb2RlXCIpLmF0dHIoXCJkZWJ1Z1wiKSA9PSBcImZhbHNlXCIpIHtcbiAgICAgICAgc2VsZWN0KFwiI2RlYnVnbW9kZVwiKS5hdHRyKFwiZGVidWdcIiwgXCJ0cnVlXCIpO1xuICAgICAgICBzZWxlY3QoXCIjaW5zdGFsbF9iYXNlNjRcIikuc2hvdygpO1xuICAgICAgICBzZWxlY3QoXCIjaW5zdGFsbF91bm9cIikuaGlkZSgpO1xuICAgICAgICBzZWxlY3QoXCIuc3JjY1wiKS5oaWRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3QoXCIjZGVidWdtb2RlXCIpLmF0dHIoXCJkZWJ1Z1wiLCBcImZhbHNlXCIpO1xuICAgICAgICBzZWxlY3QoXCIjaW5zdGFsbF9iYXNlNjRcIikuaGlkZSgpO1xuICAgICAgICBzZWxlY3QoXCIjaW5zdGFsbF91bm9cIikuc2hvdygpO1xuICAgICAgICBzZWxlY3QoXCIuc3JjY1wiKS5zaG93KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzZXRXaW5kb3dQcm9wZXJ0eShcIm5vdGlmeVVuaW5zdGFsbFwiLCAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgZGVsZXRlTW9kdWxlKGlkLCAoKSA9PiB7XG4gICAgICAgIHJlc29ydERlcGVuZGVuY3koKTtcbiAgICAgICAgZHVtcE1hbmFnZXIoKTtcbiAgICAgICAgc2hvd1BvcHBlcihcIuaIkOWKn+enu+mZpOS6huaooeWdl1wiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHNldFdpbmRvd1Byb3BlcnR5KFwibm90aWZ5T25PZmZcIiwgKGlkOiBzdHJpbmcpID0+IHtcbiAgICAgIGxldCBhbGwgPSBHTUdldFZhbHVlKFwibG9hZGVyLmFsbFwiLCB7fSk7XG4gICAgICBhbGxbaWRdID0gIWFsbFtpZF07XG4gICAgICBHTVNldFZhbHVlKFwibG9hZGVyLmFsbFwiLCBhbGwpO1xuICAgICAgbWFya0RpcnR5KCk7XG4gICAgICByZXNvcnREZXBlbmRlbmN5KCk7XG4gICAgICBkdW1wTWFuYWdlcigpO1xuICAgIH0pO1xuICAgIHNlbGVjdChcIiNpbnN0YWxsXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbGV0IHNyYyA9IHNlbGVjdChcIiNkZWJ1Z21vZGVcIikuYXR0cihcImRlYnVnXCIpID09IFwidHJ1ZVwiID8gXCIjaW5zdGFsbF9iYXNlNjRcIiA6IFwiI2luc3RhbGxfdW5vXCI7XG4gICAgICBsZXQgc3RyID0gc2VsZWN0KHNyYykudmFsKCk/LnRvU3RyaW5nKCkgfHwgXCJcIjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IHN0ID0gYWRkTW9kdWxlKGF0b2Ioc3RyKSk7XG4gICAgICAgIGlmICh0eXBlb2Ygc3QgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIG9uSW5zdGFsbChzdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGlzVXJsUmVnZXggPSAvXigoZmlsZXxodHRwc3xodHRwfGZ0cHxydHNwfG1tcyk/OlxcL1xcLylbXlxcc10rL2c7XG4gICAgICAgICAgaWYgKGlzVXJsUmVnZXgudGVzdChzdHIpKSB7XG4gICAgICAgICAgICBzaG93UG9wcGVyKFwi5q2j5Zyo6I635Y+W5pWw5o2u4oCm4oCmXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZ2V0Q3Jvc3NPcmlnaW5EYXRhKHN0ciwgb25GYWlsdXJlLCAoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHN0ID0gYWRkTW9kdWxlKGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3QgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICAgIG9uSW5zdGFsbChzdCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgb25GYWlsdXJlKHN0KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgbGV0IHN0ID0gYWRkTW9kdWxlKHN0cik7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3QgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBvbkluc3RhbGwoc3QpO1xuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgaW5zdGFsbEZyb21HSUQoR0lEVVJMLmZyb21TdHJpbmcoc3RyKSwgb25JbnN0YWxsLCBvbkZhaWx1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgc3QgPSBhZGRNb2R1bGUoc3RyKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3QgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgb25JbnN0YWxsKHN0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgaW5zdGFsbEZyb21HSUQoR0lEVVJMLmZyb21TdHJpbmcoc3RyKSwgb25JbnN0YWxsLCBvbkZhaWx1cmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIGxldCBpc1VybFJlZ2V4ID0gL14oKGZpbGV8aHR0cHN8aHR0cHxmdHB8cnRzcHxtbXMpPzpcXC9cXC8pW15cXHNdKy9nO1xuICAgICAgICBpZiAoaXNVcmxSZWdleC50ZXN0KHN0cikpIHtcbiAgICAgICAgICBzaG93UG9wcGVyKFwi5q2j5Zyo6I635Y+W5pWw5o2u4oCm4oCmXCIpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBnZXRDcm9zc09yaWdpbkRhdGEoc3RyLCBvbkZhaWx1cmUsIChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgbGV0IHN0ID0gYWRkTW9kdWxlKGRhdGEpO1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0ICE9IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgb25JbnN0YWxsKHN0KTtcbiAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9uRmFpbHVyZShzdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIGxldCBzdCA9IGFkZE1vZHVsZShzdHIpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdCAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICBvbkluc3RhbGwoc3QpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICBpbnN0YWxsRnJvbUdJRChHSURVUkwuZnJvbVN0cmluZyhzdHIpLCBvbkluc3RhbGwsIG9uRmFpbHVyZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBzdCA9IGFkZE1vZHVsZShzdHIpO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3QgIT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIG9uSW5zdGFsbChzdCk7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgaW5zdGFsbEZyb21HSUQoR0lEVVJMLmZyb21TdHJpbmcoc3RyKSwgb25JbnN0YWxsLCAoKSA9PiBvbkZhaWx1cmUoYOaXoOaViCBJRCDmiJbnvZHnu5zplJnor6/vvIzmiYDmnInlronoo4XpgJTlvoTlnYflpLHotKVgKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgYWxsX21vZHVsZXMgPSBHTUdldFZhbHVlKFwibG9hZGVyLmFsbFwiLCB7fSk7XG4gICAgZm9yIChsZXQgbSBvZiBPYmplY3QuZW50cmllcyhhbGxfbW9kdWxlcykpIHtcbiAgICAgIGxldCBtZXRhID0gR01HZXRWYWx1ZShcIm1ldGEtXCIgKyBtWzBdLCB7IGlkOiBcImltcG9zc2libGVcIiB9KTtcbiAgICAgIGxldCBlbGUgPSBjcmVhdGVNYW5hZ2VIdG1sKG1ldGEsIG1ldGEucGVybWlzc2lvbnMuY29udGFpbnMoXCJsb2FkZXI6Y29yZVwiKSxcbiAgICAgICAgbWV0YS5wZXJtaXNzaW9ucy5jb250YWlucyhcImxvYWRlcjplYXJseWxvYWRcIiksIFwiIzVkMjM5MVwiKTtcbiAgICAgIHNlbGVjdChcIiNhbGxfbW9kdWxlc1wiKS5hcHBlbmQoZWxlKTtcbiAgICB9XG4gICAgc2VsZWN0KFwiLnNob3dzcmNcIikub24oXCJjbGlja1wiLCAoZTogeyB0YXJnZXQ6IHN0cmluZzsgfSkgPT4ge1xuICAgICAgaWYgKHNlbGVjdChcIiNkZWJ1Z21vZGVcIikuYXR0cihcImRlYnVnXCIpID09IFwiZmFsc2VcIikge1xuICAgICAgICBzZWxlY3QoXCIjZGVidWdtb2RlXCIpLmF0dHIoXCJkZWJ1Z1wiLCBcInRydWVcIik7XG4gICAgICAgIHNlbGVjdChcIiNpbnN0YWxsX2Jhc2U2NFwiKS5zaG93KCk7XG4gICAgICAgIHNlbGVjdChcIiNpbnN0YWxsX3Vub1wiKS5oaWRlKCk7XG4gICAgICAgIHNlbGVjdChcIi5zcmNjXCIpLmhpZGUoKTtcbiAgICAgIH1cbiAgICAgIGxldCBpZCA9IHNlbGVjdChlLnRhcmdldCkuZGF0YShcIm1sc291cmNlXCIpIHx8IHNlbGVjdChlLnRhcmdldCkucGFyZW50KCkuZGF0YShcIm1sc291cmNlXCIpO1xuICAgICAgaWYgKCFpZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgc2VsZWN0KFwiI2luc3RhbGxfYmFzZTY0XCIpLnZhbChHTUdldFZhbHVlKGBjb2RlLSR7aWR9YCwgXCJcIikpO1xuICAgIH0pO1xuICAgIHNlbGVjdChcIiNhbGxfbW9kdWxlcyA+IGxpXCIpLmZvcmVhY2goKF9pLCBlKSA9PiB7XG4gICAgICBsZXQgaWQgPSBzZWxlY3QoZSkuYXR0cihcImlkXCIpIHx8IFwibG9hZGVyLmltcG9zc2libGVcIjtcbiAgICAgIGxldCBtZXRhOiBhbnkgPSBHTUdldFZhbHVlKGBtZXRhLSR7aWR9YCk7XG5cbiAgICAgIGlmIChhY3RpdmVDaGVja2luZy5nZXQoaWQpICE9IG1ldGEudmVyc2lvbikge1xuICAgICAgICBhY3RpdmVDaGVja2luZy5zZXQoaWQsIG1ldGEudmVyc2lvbik7XG4gICAgICAgIGNoZWNrVXBkYXRlKG1ldGEsIChzdGF0ZSwgb3YsIG52KSA9PiB7XG4gICAgICAgICAgaWYgKGFjdGl2ZUNoZWNraW5nLmdldChpZCkgIT0gbWV0YS52ZXJzaW9uKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIGFjdGl2ZUNoZWNraW5nLmRlbGV0ZShpZCk7XG4gICAgICAgICAgbGV0IGd0eHQ7XG4gICAgICAgICAgbGV0IHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJsYXRlc3QtYXBpLXRvby1lYXJseVwiOlxuICAgICAgICAgICAgICBndHh0ID0gYDxzcGFuIHN0eWxlPSdjb2xvcjojZjE2ZDJlJz48Yj5b5bey6L+H5pyfXTwvYj48L3NwYW4+YDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibGF0ZXN0LW5vLXVwZGF0ZS11cmxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJsYXRlc3Qtbm8tdmVyc2lvblwiOlxuICAgICAgICAgICAgICBndHh0ID0gYDxzcGFuIHN0eWxlPSdjb2xvcjojNjM2MzYzJz48Yj5b5pys5ZywXTwvYj48L3NwYW4+YDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibGF0ZXN0LXZlcnNpb24tZXF1YWwtb3ItZWFybGllclwiOlxuICAgICAgICAgICAgICBndHh0ID0gYDxzcGFuIHN0eWxlPSdjb2xvcjojZGYzMDdmJz48Yj5b5pyA5pawXTwvYj48L3NwYW4+YDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBpZiAoIXN0YXRlLnN0YXJ0c1dpdGgoXCJsYXRlc3RcIikpIHtcbiAgICAgICAgICAgICAgICBndHh0ID0gYDxzcGFuIHN0eWxlPSdjb2xvcjojZmZhZWM4Jz48Yj5b5pyJ5Y+v55So5pu05pawXTwvYj48L3NwYW4+YDtcbiAgICAgICAgICAgICAgICBzaG91bGRVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBvaCA9IHNlbGVjdChgW2lkPSd2dGFnLSR7bWV0YS5pZH0nXWApLmh0bWwoKTtcblxuICAgICAgICAgIG9oID0gYCR7b2h9JHtzaG91bGRVcGRhdGUgPyBcIiZuYnNwOy0+Jm5ic3A7XCIgKyBudiA6IFwiXCJ9Jm5ic3A7JHtndHh0fWA7XG5cbiAgICAgICAgICBzZWxlY3QoYFtpZD0ndnRhZy0ke21ldGEuaWR9J11gKS5odG1sKG9oKTtcbiAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlKVxuICAgICAgICAgICAgc2VsZWN0KGBbaWQ9J3Z0YWctJHttZXRhLmlkfSddYCkucGFyZW50KCkuYXBwZW5kKFxuICAgICAgICAgICAgICBgPGJ1dHRvbiB0eXBlPSdidXR0b24nIHN0eWxlPSdmbG9hdDpyaWdodCcgY2xhc3M9J3BuIHBuYyB1cGRhdGUnIGRhdGEtbWx1cmw9JyR7c3RhdGV9Jz5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPuabtOaWsOaooeWdlzwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIHNlbGVjdChcIi51cGRhdGVcIikub24oXCJjbGlja1wiLCAoZTogeyB0YXJnZXQ6IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgbGV0IHVybCA9IHNlbGVjdChlLnRhcmdldCkuZGF0YShcIm1sdXJsXCIpIHx8IHNlbGVjdChlLnRhcmdldCkucGFyZW50KCkuZGF0YShcIm1sdXJsXCIpO1xuICAgICAgICAgICAgaWYgKCF1cmwpXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChzZWxlY3QoZS50YXJnZXQpLmRhdGEoXCJtbHVybFwiKSlcbiAgICAgICAgICAgICAgc2VsZWN0KGUudGFyZ2V0KS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgc2VsZWN0KGUudGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIG1hcmtEaXJ0eSgpO1xuICAgICAgICAgICAgaW5zdGFsbEZyb21VcmwoXG4gICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGR1bXBNYW5hZ2VyKCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgb2ggPSBzZWxlY3QoYFtpZD0ndnRhZy0ke21ldGEuaWR9J11gKS5odG1sKCk7XG5cbiAgICAgICAgICAgICAgICBvaCA9IG9oLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICBgPHNwYW4gc3R5bGU9XCJjb2xvcjojZmZhZWM4XCI+PGI+W+acieWPr+eUqOabtOaWsF08L2I+PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICBgPHNwYW4gc3R5bGU9J2NvbG9yOiNkZjMwN2YnPjxiPlvlt7Lmm7TmlrBdPC9iPjwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBzZWxlY3QoYFtpZD0ndnRhZy0ke21ldGEuaWR9J11gKS5odG1sKG9oKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBvaCA9IHNlbGVjdChgW2lkPSd2dGFnLSR7bWV0YS5pZH0nXWApLmh0bWwoKTtcbiAgICAgICAgICAgICAgICBvaCA9IG9oLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICBgPHNwYW4gc3R5bGU9XCJjb2xvcjojZmZhZWM4XCI+PGI+W+acieWPr+eUqOabtOaWsF08L2I+PC9zcGFuPmAsXG4gICAgICAgICAgICAgICAgICBgPHNwYW4gc3R5bGU9J2NvbG9yOiNlYzFjMjQnPjxiPlvmm7TmlrDlpLHotKVdPC9iPjwvc3Bhbj5gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBzZWxlY3QoYFtpZD0ndnRhZy0ke21ldGEuaWR9J11gKS5odG1sKG9oKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgR0lEVVJMLmZyb21TdHJpbmcobWV0YS5naWQpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc2hvd1BvcHBlcihcIuW3suWwneivleabtOaWsO+8jOabtOaWsOaViOaenOWcqOabtOaWsOWujOaIkOWQjuWIt+aWsOmhtemdouaJjeS8muaYvuekuuOAglwiKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGNyZWF0ZUJ0biwgY3JlYXRlTWVudSwgZHVtcE1hbmFnZXIsIG9uSW5zdGFsbCwgb25GYWlsdXJlIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BOzs7QUFHQTs7QUFFQTs7OztBQUlBO0FBQ0E7O0FBRUE7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBT0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTs7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/manager.ts\n");

/***/ }),

/***/ "./src/libs/permissions.ts":
/*!*********************************!*\
  !*** ./src/libs/permissions.ts ***!
  \*********************************/
/*! namespace exports */
/*! export hasPermission [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"hasPermission\": () => /* binding */ hasPermission\n/* harmony export */ });\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n;\nconst cachedPermission = {};\nfunction cachePermission(id) {\n    if (cachedPermission[id])\n        return cachedPermission[id];\n    let permissions = (cachedPermission[id] = {});\n    let meta = (0,_usfunc__WEBPACK_IMPORTED_MODULE_0__.GMGetValue)(\"meta-\" + id, {});\n    if (meta.permissions)\n        for (let perm of meta.permissions.split(\",\"))\n            permissions[perm.trim()] = true;\n    return permissions;\n}\nfunction hasPermission(id, perm) {\n    return !!cachePermission(id)[perm.trim()];\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9wZXJtaXNzaW9ucy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2xpYnMvcGVybWlzc2lvbnMudHM/OGQzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHTUdldFZhbHVlIH0gZnJvbSBcIi4vdXNmdW5jXCI7XG5jb25zdCBjYWNoZWRQZXJtaXNzaW9uOiBhbnkgPSB7fTtcbmZ1bmN0aW9uIGNhY2hlUGVybWlzc2lvbihpZDogc3RyaW5nKSB7XG4gIGlmIChjYWNoZWRQZXJtaXNzaW9uW2lkXSlcbiAgICByZXR1cm4gY2FjaGVkUGVybWlzc2lvbltpZF07XG4gIGxldCBwZXJtaXNzaW9uczogYW55ID0gKGNhY2hlZFBlcm1pc3Npb25baWRdID0ge30pO1xuICBsZXQgbWV0YSA9IEdNR2V0VmFsdWUoXCJtZXRhLVwiICsgaWQsIHt9KTtcbiAgaWYgKG1ldGEucGVybWlzc2lvbnMpXG4gICAgZm9yIChsZXQgcGVybSBvZiBtZXRhLnBlcm1pc3Npb25zLnNwbGl0KFwiLFwiKSlcbiAgICAgIHBlcm1pc3Npb25zW3Blcm0udHJpbSgpXSA9IHRydWU7XG4gIHJldHVybiBwZXJtaXNzaW9ucztcbn1cblxuZnVuY3Rpb24gaGFzUGVybWlzc2lvbihpZDogc3RyaW5nLCBwZXJtOiBzdHJpbmcpIHtcbiAgcmV0dXJuICEhY2FjaGVQZXJtaXNzaW9uKGlkKVtwZXJtLnRyaW0oKV07XG59XG5cbmV4cG9ydCB7IGhhc1Blcm1pc3Npb24gfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/libs/permissions.ts\n");

/***/ }),

/***/ "./src/libs/static.ts":
/*!****************************!*\
  !*** ./src/libs/static.ts ***!
  \****************************/
/*! namespace exports */
/*! export COMMON_CSS [provided] [no usage info] [missing usage info prevents renaming] */
/*! export HTML_MANAGER_FOOTER [provided] [no usage info] [missing usage info prevents renaming] */
/*! export HTML_VIEWREPO_BODY [provided] [no usage info] [missing usage info prevents renaming] */
/*! export IMG_MCBBS [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IMG_MCBBS\": () => /* binding */ IMG_MCBBS,\n/* harmony export */   \"HTML_MANAGER_FOOTER\": () => /* binding */ HTML_MANAGER_FOOTER,\n/* harmony export */   \"HTML_VIEWREPO_BODY\": () => /* binding */ HTML_VIEWREPO_BODY,\n/* harmony export */   \"COMMON_CSS\": () => /* binding */ COMMON_CSS\n/* harmony export */ });\nconst IMG_MCBBS = \"https://attachment.mcbbs.net/data/myattachment/forum/202104/30/181947s2ofgj3spsfj1pss.png\";\nconst HTML_MANAGER_FOOTER = `<span style='font-size:1rem'>已安装的模块</span>\n  <br/>\n  <div style='overflow:auto;'>\n    <ul id='all_modules'></ul>\n  </div>\n  <hr/>\n  <span style='font-size:1rem'>安装新模块</span>\n  <button debug='false' type='button' id='debugmode' class='pn pnc'>\n    <strong>调试模式</strong>\n  </button>\n  <br/>\n  <textarea style=\"display:none;font-family:'Fira Code','Courier New',monospace;background-color:#fbf2db;width:90%;height:150px;overflow:auto;word-break:break-all;resize:vertical;\" placeholder='BASE64 编码，URL 或 JavaScript 代码……' id='install_base64'></textarea>\n  <br/>\n  <input style='width:90%;font-family:\"Fira Code\",\"Courier New\",monospace;' type='text' class='px' id='install_uno' placeholder='使用 GID 安装……'/>\n  <br/>\n  <br/>\n  <button class='pn pnc' type='button' id='install'>\n    <strong>安装</strong>\n  </button>\n  <br/>\n  <br/>\n  <br/>\n  <button class='pn pnc srcc' type='button' id='use_cv'>\n    <strong>快速使用 洞穴夜莺 源（CaveNightingale）</strong>\n  </button>\n  <span class='srcc'>\n    洞穴夜莺的软件源中包含许多轻松使用模块，\n    <a id='preview_cv' style='color:#df307f'href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#CaveNightingale%3ACaveNightingale-MCBBS-Modules%3Amanifest%3Amaster' target='_blank'>\n      预览该软件源\n    </a>\n    。\n  </span>\n  <br/>\n  <br/>\n  <button class='pn pnc srcc' type='button' id='use_mext'>\n    <strong>快速使用 MExt 整合运动 源（MExt-IM）</strong>\n  </button>\n  <span class='srcc'>\n    MExt 整合运动的软件源中包括了许多适合老用户的 MExt 模块，\n    <a id='preview_mext' style='color:#df307f' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#MCBBS-Loader%3AIntegration-Motion%3Amanifest%3Amain' target='_blank'>\n      预览该软件源\n    </a>。\n  </span>\n  <br/>\n</span>`;\nconst HTML_VIEWREPO_BODY = `&nbsp;&nbsp;\n  <input class=\"px\" id=\"viewsrc\" type=\"text\" style=\"width: 50%\" placeholder=\"输入新的软件源地址来加载预览\"/>\n  &nbsp;\n  <button type=\"button\" id=\"loadview\" class=\"pn pnc\">\n    <strong>加载预览</strong>\n  </button>\n  <br/>\n  <hr/>\n  <span style='font-size:1rem'>该软件源中的模块</span>\n  <span style='float: right;'>\n    <a href='javascript:;' style='color: #524229;' id='select-all-btn'>反选</a>\n    <a href='javascript:;' style='color: #524229;' id='apply-changes-btn'>应用</a>\n  </span>\n  <br/>\n  <div style='overflow:auto;'>\n    <ul id='all_modules'></ul>\n  </div>\n  <hr/>`;\nconst COMMON_CSS = `#_popbg {\n  user-select: none;\n  cursor: default;\n  width: 100%;\n  height: 50px;\n  background-color: #02020275;\n  position: fixed;\n  bottom: -50px;\n  text-align: center;\n  color: #ffffff;\n}\n\ninput.loadertextconf {\n  background-color: white;\n  float: right;\n  width:50%;\n}`;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy9zdGF0aWMudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tY2Jicy1sb2FkZXItY29yZS8uL3NyYy9saWJzL3N0YXRpYy50cz84NmQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOacrOaWh+S7tueUqOS6jumbhuS4jueoi+W6j+mAu+i+keWFs+ezu+S4jeWvhuWIh+eahOmdmeaAgeWGheWuue+8jOS+i+WmguWbvueJh+OAgemVv+autUhUTUzmlofmnKxcbmNvbnN0IElNR19NQ0JCUyA9IFwiaHR0cHM6Ly9hdHRhY2htZW50Lm1jYmJzLm5ldC9kYXRhL215YXR0YWNobWVudC9mb3J1bS8yMDIxMDQvMzAvMTgxOTQ3czJvZmdqM3Nwc2ZqMXBzcy5wbmdcIjtcblxuY29uc3QgSFRNTF9NQU5BR0VSX0ZPT1RFUiA9IFxuICBgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxcmVtJz7lt7Llronoo4XnmoTmqKHlnZc8L3NwYW4+XG4gIDxici8+XG4gIDxkaXYgc3R5bGU9J292ZXJmbG93OmF1dG87Jz5cbiAgICA8dWwgaWQ9J2FsbF9tb2R1bGVzJz48L3VsPlxuICA8L2Rpdj5cbiAgPGhyLz5cbiAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxcmVtJz7lronoo4XmlrDmqKHlnZc8L3NwYW4+XG4gIDxidXR0b24gZGVidWc9J2ZhbHNlJyB0eXBlPSdidXR0b24nIGlkPSdkZWJ1Z21vZGUnIGNsYXNzPSdwbiBwbmMnPlxuICAgIDxzdHJvbmc+6LCD6K+V5qih5byPPC9zdHJvbmc+XG4gIDwvYnV0dG9uPlxuICA8YnIvPlxuICA8dGV4dGFyZWEgc3R5bGU9XCJkaXNwbGF5Om5vbmU7Zm9udC1mYW1pbHk6J0ZpcmEgQ29kZScsJ0NvdXJpZXIgTmV3Jyxtb25vc3BhY2U7YmFja2dyb3VuZC1jb2xvcjojZmJmMmRiO3dpZHRoOjkwJTtoZWlnaHQ6MTUwcHg7b3ZlcmZsb3c6YXV0bzt3b3JkLWJyZWFrOmJyZWFrLWFsbDtyZXNpemU6dmVydGljYWw7XCIgcGxhY2Vob2xkZXI9J0JBU0U2NCDnvJbnoIHvvIxVUkwg5oiWIEphdmFTY3JpcHQg5Luj56CB4oCm4oCmJyBpZD0naW5zdGFsbF9iYXNlNjQnPjwvdGV4dGFyZWE+XG4gIDxici8+XG4gIDxpbnB1dCBzdHlsZT0nd2lkdGg6OTAlO2ZvbnQtZmFtaWx5OlwiRmlyYSBDb2RlXCIsXCJDb3VyaWVyIE5ld1wiLG1vbm9zcGFjZTsnIHR5cGU9J3RleHQnIGNsYXNzPSdweCcgaWQ9J2luc3RhbGxfdW5vJyBwbGFjZWhvbGRlcj0n5L2/55SoIEdJRCDlronoo4XigKbigKYnLz5cbiAgPGJyLz5cbiAgPGJyLz5cbiAgPGJ1dHRvbiBjbGFzcz0ncG4gcG5jJyB0eXBlPSdidXR0b24nIGlkPSdpbnN0YWxsJz5cbiAgICA8c3Ryb25nPuWuieijhTwvc3Ryb25nPlxuICA8L2J1dHRvbj5cbiAgPGJyLz5cbiAgPGJyLz5cbiAgPGJyLz5cbiAgPGJ1dHRvbiBjbGFzcz0ncG4gcG5jIHNyY2MnIHR5cGU9J2J1dHRvbicgaWQ9J3VzZV9jdic+XG4gICAgPHN0cm9uZz7lv6vpgJ/kvb/nlKgg5rSe56m05aSc6I66IOa6kO+8iENhdmVOaWdodGluZ2FsZe+8iTwvc3Ryb25nPlxuICA8L2J1dHRvbj5cbiAgPHNwYW4gY2xhc3M9J3NyY2MnPlxuICAgIOa0nueptOWknOiOuueahOi9r+S7tua6kOS4reWMheWQq+iuuOWkmui9u+advuS9v+eUqOaooeWdl++8jFxuICAgIDxhIGlkPSdwcmV2aWV3X2N2JyBzdHlsZT0nY29sb3I6I2RmMzA3ZidocmVmPSdodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPXJlcG9wcmV2aWV3I0NhdmVOaWdodGluZ2FsZSUzQUNhdmVOaWdodGluZ2FsZS1NQ0JCUy1Nb2R1bGVzJTNBbWFuaWZlc3QlM0FtYXN0ZXInIHRhcmdldD0nX2JsYW5rJz5cbiAgICAgIOmihOiniOivpei9r+S7tua6kFxuICAgIDwvYT5cbiAgICDjgIJcbiAgPC9zcGFuPlxuICA8YnIvPlxuICA8YnIvPlxuICA8YnV0dG9uIGNsYXNzPSdwbiBwbmMgc3JjYycgdHlwZT0nYnV0dG9uJyBpZD0ndXNlX21leHQnPlxuICAgIDxzdHJvbmc+5b+r6YCf5L2/55SoIE1FeHQg5pW05ZCI6L+Q5YqoIOa6kO+8iE1FeHQtSU3vvIk8L3N0cm9uZz5cbiAgPC9idXR0b24+XG4gIDxzcGFuIGNsYXNzPSdzcmNjJz5cbiAgICBNRXh0IOaVtOWQiOi/kOWKqOeahOi9r+S7tua6kOS4reWMheaLrOS6huiuuOWkmumAguWQiOiAgeeUqOaIt+eahCBNRXh0IOaooeWdl++8jFxuICAgIDxhIGlkPSdwcmV2aWV3X21leHQnIHN0eWxlPSdjb2xvcjojZGYzMDdmJyBocmVmPSdodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPXJlcG9wcmV2aWV3I01DQkJTLUxvYWRlciUzQUludGVncmF0aW9uLU1vdGlvbiUzQW1hbmlmZXN0JTNBbWFpbicgdGFyZ2V0PSdfYmxhbmsnPlxuICAgICAg6aKE6KeI6K+l6L2v5Lu25rqQXG4gICAgPC9hPuOAglxuICA8L3NwYW4+XG4gIDxici8+XG48L3NwYW4+YDtcblxuY29uc3QgSFRNTF9WSUVXUkVQT19CT0RZID1cbiAgYCZuYnNwOyZuYnNwO1xuICA8aW5wdXQgY2xhc3M9XCJweFwiIGlkPVwidmlld3NyY1wiIHR5cGU9XCJ0ZXh0XCIgc3R5bGU9XCJ3aWR0aDogNTAlXCIgcGxhY2Vob2xkZXI9XCLovpPlhaXmlrDnmoTova/ku7bmupDlnLDlnYDmnaXliqDovb3pooTop4hcIi8+XG4gICZuYnNwO1xuICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBpZD1cImxvYWR2aWV3XCIgY2xhc3M9XCJwbiBwbmNcIj5cbiAgICA8c3Ryb25nPuWKoOi9vemihOiniDwvc3Ryb25nPlxuICA8L2J1dHRvbj5cbiAgPGJyLz5cbiAgPGhyLz5cbiAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxcmVtJz7or6Xova/ku7bmupDkuK3nmoTmqKHlnZc8L3NwYW4+XG4gIDxzcGFuIHN0eWxlPSdmbG9hdDogcmlnaHQ7Jz5cbiAgICA8YSBocmVmPSdqYXZhc2NyaXB0OjsnIHN0eWxlPSdjb2xvcjogIzUyNDIyOTsnIGlkPSdzZWxlY3QtYWxsLWJ0bic+5Y+N6YCJPC9hPlxuICAgIDxhIGhyZWY9J2phdmFzY3JpcHQ6Oycgc3R5bGU9J2NvbG9yOiAjNTI0MjI5OycgaWQ9J2FwcGx5LWNoYW5nZXMtYnRuJz7lupTnlKg8L2E+XG4gIDwvc3Bhbj5cbiAgPGJyLz5cbiAgPGRpdiBzdHlsZT0nb3ZlcmZsb3c6YXV0bzsnPlxuICAgIDx1bCBpZD0nYWxsX21vZHVsZXMnPjwvdWw+XG4gIDwvZGl2PlxuICA8aHIvPmA7XG5cbmNvbnN0IENPTU1PTl9DU1MgPSBcbmAjX3BvcGJnIHtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogNTBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAyMDIwMjc1O1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogLTUwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgY29sb3I6ICNmZmZmZmY7XG59XG5cbmlucHV0LmxvYWRlcnRleHRjb25mIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gIGZsb2F0OiByaWdodDtcbiAgd2lkdGg6NTAlO1xufWA7XG5leHBvcnQgeyBJTUdfTUNCQlMsIEhUTUxfTUFOQUdFUl9GT09URVIsIEhUTUxfVklFV1JFUE9fQk9EWSwgQ09NTU9OX0NTUyB9OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/libs/static.ts\n");

/***/ }),

/***/ "./src/libs/updator.ts":
/*!*****************************!*\
  !*** ./src/libs/updator.ts ***!
  \*****************************/
/*! namespace exports */
/*! export checkUpdate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cmpVersion [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"checkUpdate\": () => /* binding */ checkUpdate,\n/* harmony export */   \"cmpVersion\": () => /* binding */ cmpVersion\n/* harmony export */ });\n/* harmony import */ var _api_STDAPI__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/STDAPI */ \"./src/api/STDAPI.ts\");\n/* harmony import */ var _codeload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./codeload */ \"./src/libs/codeload.ts\");\n/* harmony import */ var _crossorigin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./crossorigin */ \"./src/libs/crossorigin.ts\");\n;\n\n\nfunction checkUpdate(meta, callback) {\n    let id = meta.id || \"loader.nameless\";\n    let isUrlRegex = /^((file|https|http|ftp|rtsp|mms)?:\\/\\/)[^\\s]+/g;\n    if (meta.updateURL || meta.gid) {\n        let url = meta.updateURL ? isUrlRegex.test(meta.updateURL) ?\n            meta.updateURL : _codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(meta.updateURL, _codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(meta.gid)).getAsURL() :\n            _codeload__WEBPACK_IMPORTED_MODULE_1__.GIDURL.fromString(meta.gid).getAsURL();\n        (0,_crossorigin__WEBPACK_IMPORTED_MODULE_2__.getCrossOriginData)(url, () => callback(\"latest-network-err\"), data => {\n            let dataMap = new Map();\n            (0,_codeload__WEBPACK_IMPORTED_MODULE_1__.parseMeta)(data, dataMap);\n            if (dataMap.get(\"id\") != id) {\n                callback(\"latest-diff-id\");\n            }\n            else {\n                if (typeof dataMap.get(\"version\") == \"string\") {\n                    let nversion = dataMap.get(\"version\") || \"1.0.0\";\n                    let oversion = meta.version || \"1.0.0\";\n                    if (cmpVersion(nversion, oversion)) {\n                        let napiv = dataMap.get(\"apiVersion\");\n                        if (typeof napiv == \"string\" && napiv != String((0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.getAPIVersion)()))\n                            callback(\"latest-api-too-early\");\n                        else\n                            callback(meta.updateURL, oversion, nversion);\n                    }\n                    else {\n                        callback(\"latest-version-equal-or-earlier\");\n                    }\n                }\n                else {\n                    callback(\"latest-no-version\");\n                }\n            }\n        });\n    }\n    else {\n        callback(\"latest-no-update-url\");\n    }\n}\nfunction cmpVersion(nv, ov) {\n    let nvl = nv.split(\".\");\n    let ovl = ov.split(\".\");\n    if (nvl.length == 1)\n        return parseInt(nvl[0]) > parseInt(ovl[0] || \"0\");\n    for (let i = 0; i < nvl.length; i++)\n        if (parseInt(nvl[i]) > parseInt(ovl[i] || \"0\"))\n            return true;\n        else if (parseInt(nvl[i]) < parseInt(ovl[i] || \"0\"))\n            return false;\n    return false;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy91cGRhdG9yLnRzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWNiYnMtbG9hZGVyLWNvcmUvLi9zcmMvbGlicy91cGRhdG9yLnRzPzY5N2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QVBJVmVyc2lvbiB9IGZyb20gXCIuLi9hcGkvU1REQVBJXCI7XHJcbmltcG9ydCB7IHBhcnNlTWV0YSwgR0lEVVJMIH0gZnJvbSBcIi4vY29kZWxvYWRcIjtcclxuaW1wb3J0IHsgZ2V0Q3Jvc3NPcmlnaW5EYXRhIH0gZnJvbSBcIi4vY3Jvc3NvcmlnaW5cIjtcclxuZnVuY3Rpb24gY2hlY2tVcGRhdGUoXHJcbiAgbWV0YTogYW55LFxyXG4gIGNhbGxiYWNrOiAoc3RhdGU6IHN0cmluZywgb3Y/OiBzdHJpbmcsIG52Pzogc3RyaW5nKSA9PiB2b2lkXHJcbik6IHZvaWQge1xyXG4gIGxldCBpZCA9IG1ldGEuaWQgfHwgXCJsb2FkZXIubmFtZWxlc3NcIjtcclxuXHJcbiAgbGV0IGlzVXJsUmVnZXggPSAvXigoZmlsZXxodHRwc3xodHRwfGZ0cHxydHNwfG1tcyk/OlxcL1xcLylbXlxcc10rL2c7XHJcbiAgaWYgKG1ldGEudXBkYXRlVVJMIHx8IG1ldGEuZ2lkKSB7XHJcbiAgICBsZXQgdXJsID0gbWV0YS51cGRhdGVVUkwgPyBpc1VybFJlZ2V4LnRlc3QobWV0YS51cGRhdGVVUkwpID9cclxuICAgICAgbWV0YS51cGRhdGVVUkwgOiBHSURVUkwuZnJvbVN0cmluZyhtZXRhLnVwZGF0ZVVSTCwgR0lEVVJMLmZyb21TdHJpbmcobWV0YS5naWQpKS5nZXRBc1VSTCgpIDpcclxuICAgICAgR0lEVVJMLmZyb21TdHJpbmcobWV0YS5naWQpLmdldEFzVVJMKCk7XHJcbiAgICBnZXRDcm9zc09yaWdpbkRhdGEodXJsLCAoKSA9PiBjYWxsYmFjayhcImxhdGVzdC1uZXR3b3JrLWVyclwiKSwgZGF0YSA9PiB7XHJcbiAgICAgIGxldCBkYXRhTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcclxuICAgICAgcGFyc2VNZXRhKGRhdGEsIGRhdGFNYXApO1xyXG4gICAgICBpZiAoZGF0YU1hcC5nZXQoXCJpZFwiKSAhPSBpZCkge1xyXG4gICAgICAgIGNhbGxiYWNrKFwibGF0ZXN0LWRpZmYtaWRcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhTWFwLmdldChcInZlcnNpb25cIikgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgbGV0IG52ZXJzaW9uID0gZGF0YU1hcC5nZXQoXCJ2ZXJzaW9uXCIpIHx8IFwiMS4wLjBcIjtcclxuICAgICAgICAgIGxldCBvdmVyc2lvbiA9IG1ldGEudmVyc2lvbiB8fCBcIjEuMC4wXCI7XHJcbiAgICAgICAgICBpZiAoY21wVmVyc2lvbihudmVyc2lvbiwgb3ZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgIGxldCBuYXBpdiA9IGRhdGFNYXAuZ2V0KFwiYXBpVmVyc2lvblwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBuYXBpdiA9PSBcInN0cmluZ1wiICYmIG5hcGl2ICE9IFN0cmluZyhnZXRBUElWZXJzaW9uKCkpKVxyXG4gICAgICAgICAgICAgIGNhbGxiYWNrKFwibGF0ZXN0LWFwaS10b28tZWFybHlcIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICBjYWxsYmFjayhtZXRhLnVwZGF0ZVVSTCwgb3ZlcnNpb24sIG52ZXJzaW9uKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKFwibGF0ZXN0LXZlcnNpb24tZXF1YWwtb3ItZWFybGllclwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2FsbGJhY2soXCJsYXRlc3Qtbm8tdmVyc2lvblwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjYWxsYmFjayhcImxhdGVzdC1uby11cGRhdGUtdXJsXCIpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBjbXBWZXJzaW9uKG52OiBzdHJpbmcsIG92OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICBsZXQgbnZsID0gbnYuc3BsaXQoXCIuXCIpO1xyXG4gIGxldCBvdmwgPSBvdi5zcGxpdChcIi5cIik7XHJcbiAgaWYgKG52bC5sZW5ndGggPT0gMSlcclxuICAgIHJldHVybiBwYXJzZUludChudmxbMF0pID4gcGFyc2VJbnQob3ZsWzBdIHx8IFwiMFwiKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IG52bC5sZW5ndGg7IGkrKylcclxuICAgIGlmIChwYXJzZUludChudmxbaV0pID4gcGFyc2VJbnQob3ZsW2ldIHx8IFwiMFwiKSlcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBlbHNlIGlmIChwYXJzZUludChudmxbaV0pIDwgcGFyc2VJbnQob3ZsW2ldIHx8IFwiMFwiKSlcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5leHBvcnQgeyBjaGVja1VwZGF0ZSwgY21wVmVyc2lvbiB9O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/libs/updator.ts\n");

/***/ }),

/***/ "./src/libs/viewrepo.ts":
/*!******************************!*\
  !*** ./src/libs/viewrepo.ts ***!
  \******************************/
/*! namespace exports */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_exports__, __webpack_require__.r, __webpack_require__.d, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => __WEBPACK_DEFAULT_EXPORT__\n/* harmony export */ });\n/* harmony import */ var _codeload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./codeload */ \"./src/libs/codeload.ts\");\n/* harmony import */ var _manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./manager */ \"./src/libs/manager.ts\");\n/* harmony import */ var _usfunc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../craftmcbbs/craft-ui */ \"./src/craftmcbbs/craft-ui.js\");\n/* harmony import */ var _static__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./static */ \"./src/libs/static.ts\");\n/* harmony import */ var _crossorigin__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./crossorigin */ \"./src/libs/crossorigin.ts\");\n/* harmony import */ var _domutils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./domutils */ \"./src/libs/domutils.ts\");\n;\n\n\n\n\n\n\nfunction getManifest(repo, cb) {\n    (0,_crossorigin__WEBPACK_IMPORTED_MODULE_5__.getCrossOriginData)(repo.getAsURL(\".json\"), msg => (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#all_modules\").html(\"无法显示该软件源的预览。<br/>\" + msg), cb, \"json\");\n}\nfunction dumpPreview(repo) {\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"title\").html(\"MCBBS Loader - 软件源\");\n    let gid = _codeload__WEBPACK_IMPORTED_MODULE_0__.GIDURL.fromString(repo);\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\".a\").removeClass(\"a\");\n    let toApply = new Set();\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"div[class='bm bw0']\").css(\"user-select\", \"none\").html(`<span style='font-size:1.0rem'>正在预览软件源 ${repo}</span>` + _static__WEBPACK_IMPORTED_MODULE_4__.HTML_VIEWREPO_BODY);\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#viewsrc\").val(repo);\n    (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#loadview\").on(\"click\", () => {\n        open(\"https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#\" +\n            encodeURIComponent(_codeload__WEBPACK_IMPORTED_MODULE_0__.GIDURL.fromString((0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#viewsrc\").val(), gid).asString()), \"_self\");\n        dumpPreview(_codeload__WEBPACK_IMPORTED_MODULE_0__.GIDURL.fromString((0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#viewsrc\").val(), gid).asString());\n    });\n    getManifest(gid, (data) => {\n        if (typeof data != \"object\") {\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#all_modules\").html(\"无法显示该软件源的预览。<br/>无效的JSON\");\n        }\n        else {\n            for (let [m, x] of Object.entries(data)) {\n                let meta = data[m];\n                meta.id = meta.id || \"impossible\";\n                meta.name = meta.name || \"Nameless\";\n                meta.author = meta.author || \"Someone\";\n                meta.description = meta.description || \"No description provided.\";\n                meta.permissions = meta.permissions || \"\";\n                let isCore = meta.permissions.includes(\"loader:core\");\n                let earlyLoad = meta.permissions.includes(\"loader:earlyload\");\n                let isInstalled = (0,_usfunc__WEBPACK_IMPORTED_MODULE_2__.GMGetValue)(`meta-${meta.id}`) != undefined;\n                let color = isInstalled ? \"#575757\" : \"#5d2391\";\n                let installText = isInstalled ? \"&nbsp;<span style='color:#575757'><b>[已安装]</b></span>\" : \"\";\n                let ele = `<li id='${meta.id}'>\n          <div style='display:inline;'>\n            <img src='${meta.icon || _static__WEBPACK_IMPORTED_MODULE_4__.IMG_MCBBS}' width='50' height='50' style=\"vertical-align:middle;float:left;\"/>\n            <div style=\"height: 8em\">\n              &nbsp;&nbsp;\n              <span style='font-size:18px;color:${color}'>\n                <strong>${meta.name || \"Nameless\"}</strong>\n              </span>\n              &nbsp;&nbsp;&nbsp;\n              <span id='vtag-${meta.id}' style='font-size:12px;color:#150029;'>\n                ${meta.id}@${(meta.version || \"1.0.0\") +\n                    (isCore ? \"&nbsp;<span style='color:#ff0000'><b>[核心模块]</b></span>\" : \"\") +\n                    (earlyLoad ? \"&nbsp;<span style='color:#0000ff'><b>[早期加载]</b></span>\" : \"\") +\n                    installText}\n              </span>\n              <br/>\n              &nbsp;&nbsp;\n              <span style='font-size:16px;color:#df307f;'>\n                ${meta.author || \"Someone\"}\n              </span>\n              <br/>\n              &nbsp;&nbsp;\n              <span style='font-size:12px'>\n                ${meta.description}\n              </span>\n              <input type='checkbox' class='fast-install-chk' style='float: right;' gtar='${meta.gid}'/>\n              <button class='pn pnc insremote' style='float:right;' data-gtar='${meta.gid}'>\n                <strong>安装/更新</strong>\n              </button>\n            </div>\n          </div>\n        </li>`;\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#all_modules\").append(ele);\n            }\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\".insremote\").on(\"click\", (e) => {\n                let ele = e.target.getAttribute(\"data-gtar\") != undefined ? e.target : e.target.parentElement;\n                (0,_codeload__WEBPACK_IMPORTED_MODULE_0__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_0__.GIDURL.fromString(ele.getAttribute(\"data-gtar\"), gid), st => _manager__WEBPACK_IMPORTED_MODULE_1__.default.onInstall(st), r => _manager__WEBPACK_IMPORTED_MODULE_1__.default.onFailure(r));\n            });\n            let working = false;\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\".fast-install-chk\").on(\"click\", (e) => {\n                if (working)\n                    e.preventDefault();\n                else if (e.target.checked)\n                    toApply.add(e.target.getAttribute(\"data-gtar\"));\n                else\n                    toApply.delete(e.target.getAttribute(\"data-gtar\"));\n            });\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#apply-changes-btn\").on(\"click\", () => {\n                if (!toApply.size)\n                    return;\n                if (working)\n                    return;\n                working = true;\n                let succeed = [], fail = [], update = () => {\n                    (0,_codeload__WEBPACK_IMPORTED_MODULE_0__.resortDependency)();\n                    if (succeed.length + fail.length == toApply.size) {\n                        let msg = `成功安装了 ${succeed.length} 个模块:`;\n                        for (let x of succeed)\n                            msg += `<br>&nbsp;&nbsp;&nbsp;&nbsp;${x.get(\"name\")}`;\n                        if (fail.length) {\n                            msg += `<br>未能安装 ${fail.length} 个模块:`;\n                            for (let [id, err] of fail)\n                                msg += `<br>&nbsp;&nbsp;&nbsp;&nbsp;${id}&nbsp;&nbsp;&nbsp;&nbsp${err}`;\n                            (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_3__.showAlert)(msg, \"安装失败\", () => _manager__WEBPACK_IMPORTED_MODULE_1__.default.dumpManager());\n                        }\n                        (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_3__.showSuccess)(msg, \"安装成功\", () => _manager__WEBPACK_IMPORTED_MODULE_1__.default.dumpManager());\n                        working = false;\n                    }\n                };\n                toApply.forEach(v => {\n                    (0,_codeload__WEBPACK_IMPORTED_MODULE_0__.installFromGID)(_codeload__WEBPACK_IMPORTED_MODULE_0__.GIDURL.fromString(v, gid), st => {\n                        succeed.push(st);\n                        update();\n                    }, r => {\n                        fail.push([v, r]);\n                        update();\n                    });\n                });\n                (0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_3__.showPopper)(\"安装中，请稍后\");\n            });\n            (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\"#select-all-btn\").on(\"click\", (e) => {\n                if (working)\n                    return;\n                (0,_domutils__WEBPACK_IMPORTED_MODULE_6__.select)(\".fast-install-chk\").each(v => v.click());\n            });\n        }\n    });\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ dumpPreview });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlicy92aWV3cmVwby50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL2xpYnMvdmlld3JlcG8udHM/ZWFjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHSURVUkwsIGluc3RhbGxGcm9tR0lELCByZXNvcnREZXBlbmRlbmN5IH0gZnJvbSBcIi4vY29kZWxvYWRcIjtcbmltcG9ydCBtYW5hZ2VyIGZyb20gXCIuL21hbmFnZXJcIjtcbmltcG9ydCB7IEdNR2V0VmFsdWUgfSBmcm9tIFwiLi91c2Z1bmNcIjtcbmltcG9ydCB7IHNob3dBbGVydCwgc2hvd1BvcHBlciwgc2hvd1N1Y2Nlc3MgfSBmcm9tIFwiLi4vY3JhZnRtY2Jicy9jcmFmdC11aVwiO1xuaW1wb3J0IHsgSFRNTF9WSUVXUkVQT19CT0RZLCBJTUdfTUNCQlMgfSBmcm9tIFwiLi9zdGF0aWNcIjtcbmltcG9ydCB7IGdldENyb3NzT3JpZ2luRGF0YSB9IGZyb20gXCIuL2Nyb3Nzb3JpZ2luXCI7XG5pbXBvcnQgeyBzZWxlY3QsIERPTVV0aWxzIH0gZnJvbSBcIi4vZG9tdXRpbHNcIjtcbmZ1bmN0aW9uIGdldE1hbmlmZXN0KHJlcG86IEdJRFVSTCwgY2I6IChkYXRhOiBhbnkpID0+IHZvaWQpIHtcbiAgZ2V0Q3Jvc3NPcmlnaW5EYXRhKHJlcG8uZ2V0QXNVUkwoXCIuanNvblwiKSwgbXNnID0+IHNlbGVjdChcIiNhbGxfbW9kdWxlc1wiKS5odG1sKFwi5peg5rOV5pi+56S66K+l6L2v5Lu25rqQ55qE6aKE6KeI44CCPGJyLz5cIiArIG1zZyksIGNiLCBcImpzb25cIik7XG59XG5cbmZ1bmN0aW9uIGR1bXBQcmV2aWV3KHJlcG86IHN0cmluZykge1xuICBzZWxlY3QoXCJ0aXRsZVwiKS5odG1sKFwiTUNCQlMgTG9hZGVyIC0g6L2v5Lu25rqQXCIpO1xuICBsZXQgZ2lkID0gR0lEVVJMLmZyb21TdHJpbmcocmVwbyk7XG4gIHNlbGVjdChcIi5hXCIpLnJlbW92ZUNsYXNzKFwiYVwiKTtcbiAgbGV0IHRvQXBwbHk6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBzZWxlY3QoXCJkaXZbY2xhc3M9J2JtIGJ3MCddXCIpLmNzcyhcInVzZXItc2VsZWN0XCIsIFwibm9uZVwiKS5odG1sKFxuICAgIGA8c3BhbiBzdHlsZT0nZm9udC1zaXplOjEuMHJlbSc+5q2j5Zyo6aKE6KeI6L2v5Lu25rqQICR7cmVwb308L3NwYW4+YCArIEhUTUxfVklFV1JFUE9fQk9EWVxuICApO1xuICBzZWxlY3QoXCIjdmlld3NyY1wiKS52YWwocmVwbyk7XG4gIHNlbGVjdChcIiNsb2Fkdmlld1wiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuKFxuICAgICAgXCJodHRwczovL3d3dy5tY2Jicy5uZXQvaG9tZS5waHA/bW9kPXNwYWNlY3AmYmJzbW9kPXJlcG9wcmV2aWV3I1wiICtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KEdJRFVSTC5mcm9tU3RyaW5nKHNlbGVjdChcIiN2aWV3c3JjXCIpLnZhbCgpIGFzIHN0cmluZywgZ2lkKS5hc1N0cmluZygpKSxcbiAgICAgIFwiX3NlbGZcIlxuICAgICk7XG4gICAgZHVtcFByZXZpZXcoR0lEVVJMLmZyb21TdHJpbmcoc2VsZWN0KFwiI3ZpZXdzcmNcIikudmFsKCkgYXMgc3RyaW5nLCBnaWQpLmFzU3RyaW5nKCkpO1xuICB9KTtcbiAgZ2V0TWFuaWZlc3QoZ2lkLCAoZGF0YSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZGF0YSAhPSBcIm9iamVjdFwiKSB7XG4gICAgICBzZWxlY3QoXCIjYWxsX21vZHVsZXNcIikuaHRtbChcIuaXoOazleaYvuekuuivpei9r+S7tua6kOeahOmihOiniOOAgjxici8+5peg5pWI55qESlNPTlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgW20sIHhdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgICAgIGxldCBtZXRhID0gZGF0YVttXTtcbiAgICAgICAgbWV0YS5pZCA9IG1ldGEuaWQgfHwgXCJpbXBvc3NpYmxlXCI7XG4gICAgICAgIG1ldGEubmFtZSA9IG1ldGEubmFtZSB8fCBcIk5hbWVsZXNzXCI7XG4gICAgICAgIG1ldGEuYXV0aG9yID0gbWV0YS5hdXRob3IgfHwgXCJTb21lb25lXCI7XG4gICAgICAgIG1ldGEuZGVzY3JpcHRpb24gPSBtZXRhLmRlc2NyaXB0aW9uIHx8IFwiTm8gZGVzY3JpcHRpb24gcHJvdmlkZWQuXCI7XG4gICAgICAgIG1ldGEucGVybWlzc2lvbnMgPSBtZXRhLnBlcm1pc3Npb25zIHx8IFwiXCI7XG4gICAgICAgIGxldCBpc0NvcmUgPSBtZXRhLnBlcm1pc3Npb25zLmluY2x1ZGVzKFwibG9hZGVyOmNvcmVcIik7XG4gICAgICAgIGxldCBlYXJseUxvYWQgPSBtZXRhLnBlcm1pc3Npb25zLmluY2x1ZGVzKFwibG9hZGVyOmVhcmx5bG9hZFwiKTtcbiAgICAgICAgbGV0IGlzSW5zdGFsbGVkOiBib29sZWFuID0gR01HZXRWYWx1ZShgbWV0YS0ke21ldGEuaWR9YCkgIT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgY29sb3IgPSBpc0luc3RhbGxlZCA/IFwiIzU3NTc1N1wiIDogXCIjNWQyMzkxXCI7XG4gICAgICAgIGxldCBpbnN0YWxsVGV4dCA9IGlzSW5zdGFsbGVkID8gXCImbmJzcDs8c3BhbiBzdHlsZT0nY29sb3I6IzU3NTc1Nyc+PGI+W+W3suWuieijhV08L2I+PC9zcGFuPlwiIDogXCJcIjtcbiAgICAgICAgbGV0IGVsZSA9XG4gICAgICAgICAgYDxsaSBpZD0nJHttZXRhLmlkfSc+XG4gICAgICAgICAgPGRpdiBzdHlsZT0nZGlzcGxheTppbmxpbmU7Jz5cbiAgICAgICAgICAgIDxpbWcgc3JjPScke21ldGEuaWNvbiB8fCBJTUdfTUNCQlN9JyB3aWR0aD0nNTAnIGhlaWdodD0nNTAnIHN0eWxlPVwidmVydGljYWwtYWxpZ246bWlkZGxlO2Zsb2F0OmxlZnQ7XCIvPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogOGVtXCI+XG4gICAgICAgICAgICAgICZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0nZm9udC1zaXplOjE4cHg7Y29sb3I6JHtjb2xvcn0nPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHttZXRhLm5hbWUgfHwgXCJOYW1lbGVzc1wifTwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICZuYnNwOyZuYnNwOyZuYnNwO1xuICAgICAgICAgICAgICA8c3BhbiBpZD0ndnRhZy0ke21ldGEuaWR9JyBzdHlsZT0nZm9udC1zaXplOjEycHg7Y29sb3I6IzE1MDAyOTsnPlxuICAgICAgICAgICAgICAgICR7bWV0YS5pZH1AJHsobWV0YS52ZXJzaW9uIHx8IFwiMS4wLjBcIikgK1xuICAgICAgICAgICAgICAgIChpc0NvcmUgPyBcIiZuYnNwOzxzcGFuIHN0eWxlPSdjb2xvcjojZmYwMDAwJz48Yj5b5qC45b+D5qih5Z2XXTwvYj48L3NwYW4+XCI6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAoZWFybHlMb2FkID8gXCImbmJzcDs8c3BhbiBzdHlsZT0nY29sb3I6IzAwMDBmZic+PGI+W+aXqeacn+WKoOi9vV08L2I+PC9zcGFuPlwiOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgaW5zdGFsbFRleHR9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7XG4gICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSdmb250LXNpemU6MTZweDtjb2xvcjojZGYzMDdmOyc+XG4gICAgICAgICAgICAgICAgJHttZXRhLmF1dGhvciB8fCBcIlNvbWVvbmVcIn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAmbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxMnB4Jz5cbiAgICAgICAgICAgICAgICAke21ldGEuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J2NoZWNrYm94JyBjbGFzcz0nZmFzdC1pbnN0YWxsLWNoaycgc3R5bGU9J2Zsb2F0OiByaWdodDsnIGd0YXI9JyR7bWV0YS5naWR9Jy8+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9J3BuIHBuYyBpbnNyZW1vdGUnIHN0eWxlPSdmbG9hdDpyaWdodDsnIGRhdGEtZ3Rhcj0nJHttZXRhLmdpZH0nPlxuICAgICAgICAgICAgICAgIDxzdHJvbmc+5a6J6KOFL+abtOaWsDwvc3Ryb25nPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPmA7XG4gICAgICAgIHNlbGVjdChcIiNhbGxfbW9kdWxlc1wiKS5hcHBlbmQoZWxlKTtcbiAgICAgIH1cbiAgICAgIHNlbGVjdChcIi5pbnNyZW1vdGVcIikub24oXCJjbGlja1wiLCAoZTogYW55KSA9PiB7XG4gICAgICAgIGxldCBlbGUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWd0YXJcIikgIT0gdW5kZWZpbmVkID8gZS50YXJnZXQgOiBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBpbnN0YWxsRnJvbUdJRChHSURVUkwuZnJvbVN0cmluZyhlbGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1ndGFyXCIpLCBnaWQpLFxuICAgICAgICAgICAgc3QgPT4gbWFuYWdlci5vbkluc3RhbGwoc3QpLCByID0+IG1hbmFnZXIub25GYWlsdXJlKHIpKTtcbiAgICAgIH0pO1xuICAgICAgbGV0IHdvcmtpbmcgPSBmYWxzZTtcbiAgICAgIHNlbGVjdChcIi5mYXN0LWluc3RhbGwtY2hrXCIpLm9uKFwiY2xpY2tcIiwgKGU6IGFueSkgPT4ge1xuICAgICAgICBpZiAod29ya2luZylcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNoZWNrZWQpXG4gICAgICAgICAgdG9BcHBseS5hZGQoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1ndGFyXCIpKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRvQXBwbHkuZGVsZXRlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtZ3RhclwiKSk7XG4gICAgICB9KTtcbiAgICAgIHNlbGVjdChcIiNhcHBseS1jaGFuZ2VzLWJ0blwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKCF0b0FwcGx5LnNpemUpIHJldHVybjtcbiAgICAgICAgaWYgKHdvcmtpbmcpIHJldHVybjtcbiAgICAgICAgd29ya2luZyA9IHRydWU7XG4gICAgICAgIGxldCBzdWNjZWVkOiBhbnkgPSBbXSxcbiAgICAgICAgICBmYWlsOiBhbnkgPSBbXSxcbiAgICAgICAgICB1cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvcnREZXBlbmRlbmN5KCk7XG4gICAgICAgICAgICBpZiAoc3VjY2VlZC5sZW5ndGggKyBmYWlsLmxlbmd0aCA9PSB0b0FwcGx5LnNpemUpIHtcbiAgICAgICAgICAgICAgbGV0IG1zZyA9IGDmiJDlip/lronoo4XkuoYgJHtzdWNjZWVkLmxlbmd0aH0g5Liq5qih5Z2XOmA7XG4gICAgICAgICAgICAgIGZvciAobGV0IHggb2Ygc3VjY2VlZClcbiAgICAgICAgICAgICAgICBtc2cgKz0gYDxicj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDske3guZ2V0KFwibmFtZVwiKX1gO1xuICAgICAgICAgICAgICBpZiAoZmFpbC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBtc2cgKz0gYDxicj7mnKrog73lronoo4UgJHtmYWlsLmxlbmd0aH0g5Liq5qih5Z2XOmA7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgW2lkLCBlcnJdIG9mIGZhaWwpXG4gICAgICAgICAgICAgICAgICBtc2cgKz0gYDxicj4mbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDske2lkfSZuYnNwOyZuYnNwOyZuYnNwOyZuYnNwJHtlcnJ9YDtcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQobXNnLCBcIuWuieijheWksei0pVwiLCAoKSA9PiBtYW5hZ2VyLmR1bXBNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNob3dTdWNjZXNzKG1zZywgXCLlronoo4XmiJDlip9cIiwgKCkgPT4gbWFuYWdlci5kdW1wTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgd29ya2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIHRvQXBwbHkuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICBpbnN0YWxsRnJvbUdJRChcbiAgICAgICAgICAgIEdJRFVSTC5mcm9tU3RyaW5nKHYsIGdpZCksXG4gICAgICAgICAgICBzdCA9PiB7XG4gICAgICAgICAgICAgIHN1Y2NlZWQucHVzaChzdCk7XG4gICAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHIgPT4ge1xuICAgICAgICAgICAgICBmYWlsLnB1c2goW3YsIHJdKTtcbiAgICAgICAgICAgICAgdXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNob3dQb3BwZXIoXCLlronoo4XkuK3vvIzor7fnqI3lkI5cIik7XG4gICAgICB9KTtcbiAgICAgIHNlbGVjdChcIiNzZWxlY3QtYWxsLWJ0blwiKS5vbihcImNsaWNrXCIsIChlOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHdvcmtpbmcpIHJldHVybjtcbiAgICAgICAgc2VsZWN0KFwiLmZhc3QtaW5zdGFsbC1jaGtcIikuZWFjaCh2ID0+IHYuY2xpY2soKSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGR1bXBQcmV2aWV3IH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0E7OztBQUdBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7Ozs7O0FBS0E7O0FBRUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/libs/viewrepo.ts\n");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! namespace exports */
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__, __webpack_require__.r, __webpack_exports__, __webpack_require__.* */
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _libs_codeload__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./libs/codeload */ \"./src/libs/codeload.ts\");\n/* harmony import */ var _libs_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./libs/manager */ \"./src/libs/manager.ts\");\n/* harmony import */ var _libs_configpage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./libs/configpage */ \"./src/libs/configpage.ts\");\n/* harmony import */ var _libs_updator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./libs/updator */ \"./src/libs/updator.ts\");\n/* harmony import */ var _libs_usfunc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./libs/usfunc */ \"./src/libs/usfunc.js\");\n/* harmony import */ var _libs_native__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./libs/native */ \"./src/libs/native.js\");\n/* harmony import */ var _api_STDAPI__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./api/STDAPI */ \"./src/api/STDAPI.ts\");\n/* harmony import */ var _api_NTEVT__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./api/NTEVT */ \"./src/api/NTEVT.js\");\n/* harmony import */ var _libs_encrypt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./libs/encrypt */ \"./src/libs/encrypt.ts\");\n/* harmony import */ var _libs_viewrepo__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./libs/viewrepo */ \"./src/libs/viewrepo.ts\");\n/* harmony import */ var _libs_static__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./libs/static */ \"./src/libs/static.ts\");\n/* harmony import */ var _api_STDEVT__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./api/STDEVT */ \"./src/api/STDEVT.js\");\n/* harmony import */ var _libs_domutils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./libs/domutils */ \"./src/libs/domutils.ts\");\n;\n\n\n\n\n\n\n\n\n\n\n\n\nmain();\nfunction fixMuteScreen() {\n    if ((0,_libs_domutils__WEBPACK_IMPORTED_MODULE_12__.select)(\"#ct\").hasClass(\"wp cl w\")) {\n        (0,_libs_domutils__WEBPACK_IMPORTED_MODULE_12__.select)(\"#ct\").remove();\n        (0,_libs_domutils__WEBPACK_IMPORTED_MODULE_12__.select)(\"#wp\").html(`<div id=\"pt\" class=\"bm cl\">\n    <div class=\"z\">\n    <a href=\"./\" class=\"nvhm\" title=\"首页\">Minecraft(我的世界)中文论坛</a> <em>›</em>\n    <a href=\"home.php?mod=spacecp\">设置</a> <em>›</em>个人资料\n    </div>\n    </div><div id=\"ct\" class=\"ct2_a wp cl\">\n    <div class=\"mn\">\n    <div class=\"bm bw0\" style=\"user-select: none;\"></div>\n    </div>\n    <div class=\"appl\"><div class=\"tbn\">\n    <h2 class=\"mt bbda\">设置</h2>\n    <ul>`);\n    }\n}\nfunction main() {\n    (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.setWindowProperty)(\"__onExtraScriptLoaded\", (cb) => cb());\n    _libs_domutils__WEBPACK_IMPORTED_MODULE_12__.DOMUtils.load(_api_NTEVT__WEBPACK_IMPORTED_MODULE_7__.loadNTEVT).load(_api_STDEVT__WEBPACK_IMPORTED_MODULE_11__.loadEvents).load(() => {\n        (0,_libs_domutils__WEBPACK_IMPORTED_MODULE_12__.select)(\"head\").append(`<link type='text/css' rel='stylesheet'\n          href='https://cdn.staticfile.org/font-awesome/5.15.1/css/all.min.css'/>`).append(`<link type='text/css' rel='stylesheet'\n          href='https://cdn.staticfile.org/font-awesome/5.15.1/css/v4-shims.min.css'/>`).append(`<style id=\"mcbbs-loader-common-css\">${_libs_static__WEBPACK_IMPORTED_MODULE_10__.COMMON_CSS}</style>`);\n        (0,_libs_domutils__WEBPACK_IMPORTED_MODULE_12__.select)(\"#debuginfo\").after(`<br/><span>With MCBBS Loader Version ${(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_6__.getAPIVersion)()}.<br/>MCBBS Loader 是独立的项目，与我的世界中文论坛没有从属关系</span>`);\n    });\n    (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMLog)(`[MCBBS Loader] 加载器和 API 版本： Min-${(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_6__.getAPIVersion)()}`);\n    (0,_libs_native__WEBPACK_IMPORTED_MODULE_5__.setLockedProperty)((0,_libs_native__WEBPACK_IMPORTED_MODULE_5__.getUnsafeWindow)(), \"forkAPI_\" + (0,_libs_encrypt__WEBPACK_IMPORTED_MODULE_8__.getAPIToken)(), _api_STDAPI__WEBPACK_IMPORTED_MODULE_6__.forkAPI);\n    (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.setWindowProperty)(\"CDT\", []);\n    let all = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"loader.all\", {});\n    for (let [id, enabled] of Object.entries(all))\n        if (enabled && (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"meta-\" + id, {}).permissions.indexOf(\"loader:earlyload\") != -1)\n            try {\n                eval(`(() => {let MCBBS = null; ${(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"code-\" + id)}})()`);\n            }\n            catch (ex) {\n                console.error(ex);\n            }\n    _libs_domutils__WEBPACK_IMPORTED_MODULE_12__.DOMUtils.load(() => {\n        let sortedList = (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"loader.sortedModuleList\") || (0,_libs_codeload__WEBPACK_IMPORTED_MODULE_0__.resortDependency)();\n        for (let id of sortedList) {\n            (0,_libs_codeload__WEBPACK_IMPORTED_MODULE_0__.mountCode)(id, (0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"code-\" + id));\n            (id => {\n                (0,_libs_updator__WEBPACK_IMPORTED_MODULE_3__.checkUpdate)((0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_4__.GMGetValue)(\"meta-\" + id, \"\"), (state, ov, nv) => {\n                    if (!state.startsWith(\"latest\"))\n                        console.log(`[MCBBS Loader] 有更新可用，模块 ${id} 具有新版本 ${nv}，当前安装的版本为 ${ov}。`);\n                });\n            })(id);\n        }\n        _libs_manager__WEBPACK_IMPORTED_MODULE_1__.default.createBtn();\n        _libs_manager__WEBPACK_IMPORTED_MODULE_1__.default.createMenu();\n        let url = String(window.location.search);\n        if (/bbsmod=repopreview/i.test(url)) {\n            fixMuteScreen();\n            let sharp = window.location.hash.indexOf(\"#\");\n            _libs_viewrepo__WEBPACK_IMPORTED_MODULE_9__.default.dumpPreview(sharp != -1 ? decodeURIComponent(window.location.hash.substring(1)) : \"MCBBS-Loader/examplemod@main\");\n        }\n        else if (/bbsmod=manager/i.test(url)) {\n            fixMuteScreen();\n            _libs_manager__WEBPACK_IMPORTED_MODULE_1__.default.dumpManager();\n        }\n        else if (/bbsmod=config/i.test(url)) {\n            fixMuteScreen();\n            setTimeout(() => _libs_configpage__WEBPACK_IMPORTED_MODULE_2__.default.dumpConfigPage(), 0);\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL21jYmJzLWxvYWRlci1jb3JlLy4vc3JjL21haW4udHM/Y2Q0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXREZXBlbmRlbmN5RXJyb3IsXG4gIG1vdW50Q29kZSxcbiAgcmVzb3J0RGVwZW5kZW5jeSxcbn0gZnJvbSBcIi4vbGlicy9jb2RlbG9hZFwiO1xuaW1wb3J0IG1hbmFnZXIgZnJvbSBcIi4vbGlicy9tYW5hZ2VyXCI7XG5pbXBvcnQgY29uZmlncGFnZSBmcm9tIFwiLi9saWJzL2NvbmZpZ3BhZ2VcIjtcbmltcG9ydCB7IGNoZWNrVXBkYXRlIH0gZnJvbSBcIi4vbGlicy91cGRhdG9yXCI7XG5pbXBvcnQge1xuICBHTUdldFZhbHVlLFxuICBHTUxvZyxcbiAgc2V0V2luZG93UHJvcGVydHksXG59IGZyb20gXCIuL2xpYnMvdXNmdW5jXCI7XG5pbXBvcnQgeyBnZXRVbnNhZmVXaW5kb3csIHNldExvY2tlZFByb3BlcnR5IH0gZnJvbSBcIi4vbGlicy9uYXRpdmVcIjtcbmltcG9ydCB7IGZvcmtBUEksIGdldEFQSVZlcnNpb24gfSBmcm9tIFwiLi9hcGkvU1REQVBJXCI7XG5pbXBvcnQgeyBsb2FkTlRFVlQgfSBmcm9tIFwiLi9hcGkvTlRFVlRcIjtcbmltcG9ydCB7IGdldEFQSVRva2VuIH0gZnJvbSBcIi4vbGlicy9lbmNyeXB0XCI7XG5pbXBvcnQgdmlld3JlcG8gZnJvbSBcIi4vbGlicy92aWV3cmVwb1wiO1xuaW1wb3J0IHsgQ09NTU9OX0NTUyB9IGZyb20gXCIuL2xpYnMvc3RhdGljXCI7XG5pbXBvcnQgeyBsb2FkRXZlbnRzIH0gZnJvbSBcIi4vYXBpL1NUREVWVFwiO1xuaW1wb3J0IHsgRE9NVXRpbHMsIHNlbGVjdCB9IGZyb20gXCIuL2xpYnMvZG9tdXRpbHNcIlxubWFpbigpO1xuLy8gdmVyaWZ5KCgpID0+IHt9KTtcbmZ1bmN0aW9uIGZpeE11dGVTY3JlZW4oKSB7XG4gIGlmIChzZWxlY3QoXCIjY3RcIikuaGFzQ2xhc3MoXCJ3cCBjbCB3XCIpKSB7Ly8g56aB6KiA55So5oi35peg5rOV5omT5byA6K6+572u55WM6Z2i77yM6L+Z6YeM5piv5a+555So5oi35piv5ZCm6KKr56aB6KiA55qE5Yik5patXG4gICAgc2VsZWN0KFwiI2N0XCIpLnJlbW92ZSgpO1xuICAgIHNlbGVjdChcIiN3cFwiKS5odG1sKGA8ZGl2IGlkPVwicHRcIiBjbGFzcz1cImJtIGNsXCI+XG4gICAgPGRpdiBjbGFzcz1cInpcIj5cbiAgICA8YSBocmVmPVwiLi9cIiBjbGFzcz1cIm52aG1cIiB0aXRsZT1cIummlumhtVwiPk1pbmVjcmFmdCjmiJHnmoTkuJbnlYwp5Lit5paH6K665Z2bPC9hPiA8ZW0+4oC6PC9lbT5cbiAgICA8YSBocmVmPVwiaG9tZS5waHA/bW9kPXNwYWNlY3BcIj7orr7nva48L2E+IDxlbT7igLo8L2VtPuS4quS6uui1hOaWmVxuICAgIDwvZGl2PlxuICAgIDwvZGl2PjxkaXYgaWQ9XCJjdFwiIGNsYXNzPVwiY3QyX2Egd3AgY2xcIj5cbiAgICA8ZGl2IGNsYXNzPVwibW5cIj5cbiAgICA8ZGl2IGNsYXNzPVwiYm0gYncwXCIgc3R5bGU9XCJ1c2VyLXNlbGVjdDogbm9uZTtcIj48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiYXBwbFwiPjxkaXYgY2xhc3M9XCJ0Ym5cIj5cbiAgICA8aDIgY2xhc3M9XCJtdCBiYmRhXCI+6K6+572uPC9oMj5cbiAgICA8dWw+YCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgc2V0V2luZG93UHJvcGVydHkoXCJfX29uRXh0cmFTY3JpcHRMb2FkZWRcIiwgKGNiOiAoKSA9PiBhbnkpID0+IGNiKCkpO1xuICBET01VdGlscy5sb2FkKGxvYWROVEVWVCkubG9hZChsb2FkRXZlbnRzKS5sb2FkKCgpID0+IHtcbiAgICBzZWxlY3QoXCJoZWFkXCIpLmFwcGVuZChcbiAgICAgIGA8bGluayB0eXBlPSd0ZXh0L2NzcycgcmVsPSdzdHlsZXNoZWV0J1xuICAgICAgICAgIGhyZWY9J2h0dHBzOi8vY2RuLnN0YXRpY2ZpbGUub3JnL2ZvbnQtYXdlc29tZS81LjE1LjEvY3NzL2FsbC5taW4uY3NzJy8+YFxuICAgICkuYXBwZW5kKFxuICAgICAgYDxsaW5rIHR5cGU9J3RleHQvY3NzJyByZWw9J3N0eWxlc2hlZXQnXG4gICAgICAgICAgaHJlZj0naHR0cHM6Ly9jZG4uc3RhdGljZmlsZS5vcmcvZm9udC1hd2Vzb21lLzUuMTUuMS9jc3MvdjQtc2hpbXMubWluLmNzcycvPmBcbiAgICApLmFwcGVuZChgPHN0eWxlIGlkPVwibWNiYnMtbG9hZGVyLWNvbW1vbi1jc3NcIj4ke0NPTU1PTl9DU1N9PC9zdHlsZT5gKTtcbiAgICBzZWxlY3QoXCIjZGVidWdpbmZvXCIpLmFmdGVyKFxuICAgICAgYDxici8+PHNwYW4+V2l0aCBNQ0JCUyBMb2FkZXIgVmVyc2lvbiAke2dldEFQSVZlcnNpb24oKX0uPGJyLz5NQ0JCUyBMb2FkZXIg5piv54us56uL55qE6aG555uu77yM5LiO5oiR55qE5LiW55WM5Lit5paH6K665Z2b5rKh5pyJ5LuO5bGe5YWz57O7PC9zcGFuPmBcbiAgICApO1xuICB9KTtcblxuICBHTUxvZyhgW01DQkJTIExvYWRlcl0g5Yqg6L295Zmo5ZKMIEFQSSDniYjmnKzvvJogTWluLSR7Z2V0QVBJVmVyc2lvbigpfWApO1xuXG4gIHNldExvY2tlZFByb3BlcnR5KGdldFVuc2FmZVdpbmRvdygpLCBcImZvcmtBUElfXCIgKyBnZXRBUElUb2tlbigpLCBmb3JrQVBJKTtcbiAgc2V0V2luZG93UHJvcGVydHkoXCJDRFRcIiwgW10pO1xuICBsZXQgYWxsID0gR01HZXRWYWx1ZShcImxvYWRlci5hbGxcIiwge30pO1xuICBmb3IgKGxldCBbaWQsIGVuYWJsZWRdIG9mIE9iamVjdC5lbnRyaWVzKGFsbCkpXG4gICAgaWYgKGVuYWJsZWQgJiYgR01HZXRWYWx1ZShcIm1ldGEtXCIgKyBpZCwge30pLnBlcm1pc3Npb25zLmluZGV4T2YoXCJsb2FkZXI6ZWFybHlsb2FkXCIpICE9IC0xKVxuICAgICAgdHJ5IHtcbiAgICAgICAgZXZhbChgKCgpID0+IHtsZXQgTUNCQlMgPSBudWxsOyAke0dNR2V0VmFsdWUoXCJjb2RlLVwiICsgaWQpfX0pKClgKTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXgpOy8vIOS4jeimgeaug+WPiuWFtuS7lumDqOWIhlxuICAgICAgfVxuICBET01VdGlscy5sb2FkKCgpID0+IHtcbiAgICAvLyDnlKjmiLflj6/og73mmK/ku47ogIHniYjmnKzljYfnuqfkuIrmnaXnmoTvvIzlm6DmraTpnIDopoHnq4vljbPooaXlhajmjpLluo/lpb3nmoTkvp3otZbkv6Hmga9cbiAgICBsZXQgc29ydGVkTGlzdCA9IEdNR2V0VmFsdWUoXCJsb2FkZXIuc29ydGVkTW9kdWxlTGlzdFwiKSB8fCByZXNvcnREZXBlbmRlbmN5KCk7XG4gICAgZm9yIChsZXQgaWQgb2Ygc29ydGVkTGlzdCkge1xuICAgICAgbW91bnRDb2RlKGlkLCBHTUdldFZhbHVlKFwiY29kZS1cIiArIGlkKSk7XG4gICAgICAoaWQgPT4ge1xuICAgICAgICBjaGVja1VwZGF0ZShHTUdldFZhbHVlKFwibWV0YS1cIiArIGlkLCBcIlwiKSwgKHN0YXRlLCBvdiwgbnYpID0+IHtcbiAgICAgICAgICBpZiAoIXN0YXRlLnN0YXJ0c1dpdGgoXCJsYXRlc3RcIikpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgW01DQkJTIExvYWRlcl0g5pyJ5pu05paw5Y+v55So77yM5qih5Z2XICR7aWR9IOWFt+acieaWsOeJiOacrCAke252fe+8jOW9k+WJjeWuieijheeahOeJiOacrOS4uiAke292feOAgmApO1xuICAgICAgICB9KTtcbiAgICAgIH0pKGlkKTtcbiAgICB9XG4gICAgLy8g6L+Z5qC35Y+v5Lul5Zyo566h55CG55WM6Z2i5pi+56S65L6d6LWW5YWz57O75piv5ZCm5ruh6LazXG4gICAgbWFuYWdlci5jcmVhdGVCdG4oKTtcbiAgICBtYW5hZ2VyLmNyZWF0ZU1lbnUoKTtcbiAgICBsZXQgdXJsID0gU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgIGlmICgvYmJzbW9kPXJlcG9wcmV2aWV3L2kudGVzdCh1cmwpKSB7XG4gICAgICBmaXhNdXRlU2NyZWVuKCk7XG4gICAgICBsZXQgc2hhcnAgPSB3aW5kb3cubG9jYXRpb24uaGFzaC5pbmRleE9mKFwiI1wiKTtcbiAgICAgIHZpZXdyZXBvLmR1bXBQcmV2aWV3KHNoYXJwICE9IC0xID8gZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSkgOiBcIk1DQkJTLUxvYWRlci9leGFtcGxlbW9kQG1haW5cIik7XG4gICAgfSBlbHNlIGlmICgvYmJzbW9kPW1hbmFnZXIvaS50ZXN0KHVybCkpIHtcbiAgICAgIGZpeE11dGVTY3JlZW4oKTtcbiAgICAgIG1hbmFnZXIuZHVtcE1hbmFnZXIoKTtcbiAgICB9IGVsc2UgaWYgKC9iYnNtb2Q9Y29uZmlnL2kudGVzdCh1cmwpKSB7XG4gICAgICBmaXhNdXRlU2NyZWVuKCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IGNvbmZpZ3BhZ2UuZHVtcENvbmZpZ1BhZ2UoKSwgMCk7Ly8g6L+Z6YeM5b+F6aG76KaBdGltZW91dO+8jOWboOS4uuimgeetieaooeWdl+azqOWGjGNvbmZpZ1xuICAgIH1cbiAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUVBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/main.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/main.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;