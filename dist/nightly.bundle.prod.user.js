// ==UserScript==
// @name         MCBBS Loader
// @namespace    https://mcbbs-loader.xuogroup.top
// @version      1.2.0
// @description  Load custom modules into MCBBS!
// @author       mcbbs-loader
// @match        https://www.mcbbs.net/*
// @run-at       document-start
// @updateURL    https://cdn.jsdelivr.net/gh/MCBBS-Loader/MCBBS-Loader-Core@main/dist/nightly.bundle.prod.user.js
// @grant        unsafeWindow
// @grant        GM_addStyle
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_log
// @grant        GM_getResourceText
// @grant        GM_getResourceURL
// @grant        GM_download
// @grant        GM_notification
// @grant        GM_setClipboard
// @grant        GM_xmlhttpRequest
// @connect      gitee.com
// @connect      github.com
// @connect      cdn.jsdelivr.net
// @connect      mcbbs.net
// @connect      *
// ==/UserScript==

(()=>{"use strict";var __webpack_modules__={644:(e,t,n)=>{n.d(t,{u:()=>c,Y:()=>b});var s=n(204);const r={};var a=n(321),o=n(152),i=n(517),l=n(827),d=n(160),_=n(601);const p=(0,a.rj)();function c(e){return new f(e)}function u(e){if(!e)throw new Error("Assertion failed!")}(0,s.o9)("loader.all",{}),(0,s.oE)("MIDT",{});class A{constructor(e){this.internalConfig=Object.freeze(e)}get(e){return i.Z.getConfigVal(this.internalConfig.id,this.internalConfig.storageId,e)}set(e){i.Z.setConfigVal(this.internalConfig.id,this.internalConfig.storageId,e)}}class g{static acquireCommon(){return(0,s.vo)("VERHASH")?new g:null}showOfflineWindow(e,t,n){(0,d.NE)(e,t,n)}loadExtra(e,t){(0,s.vo)("$F")("__onExtraScriptLoaded",[t],e)}}class f{constructor(e){this.local={},this.LoaderEvent=l.a,this.getAPIVersion=b,this.download=p.GM_download,this.export_=e=>{!function(e,t){(0,s.oE)("module-export-"+e,t),function(e){for(var t in(0,s.vo)("MIDT"))if(t==e){(0,s.vo)("MIDT")[t]((0,s.vo)("module-export-"+e));var n=(0,s.vo)("MIDT");delete n[t],(0,s.oE)("MIDT",n)}}(e)}(this.id,e)},this.import_=m,this.GM_download=p.GM_download,this.GM_setValue=this.storeData,this.GM_getValue=this.getData,this.sysNotification=p.GM_notification,this.GIDURL=o.C5,this.id=e;let t=(0,s.o9)("loader.all").gid;this.gid=t?Object.freeze(o.C5.fromString(t)):o.C5.NIL,function(e,t){return!!function(e){if(r[e])return r[e];let t=r[e]={},n=(0,s.o9)("meta-"+e,{});if(n.permissions)for(let e of n.permissions.split(","))t[e.trim()]=!0;return t}(e)[t.trim()]}(e,"loader:core")?(this.eval=o.AS,this.GM=(0,a.rj)()):(this.eval=void 0,this.GM=void 0)}get $(){return(0,s.vo)("jq")}storeData(e,t){var n,r;n=this.id+"-"+e,r=t,(0,s.s4)("data-"+n,r)}createConfig(e,t,n,s,r=(e=>{}),a=""){return u("string"==typeof e),u("string"==typeof t),u("string"==typeof n),u("string"==typeof s),u("function"==typeof r),u("string"==typeof a),new A(i.Z.createConfigItem(this.id,e,t,n,s,r,a))}getConfigVal(e,t){return u("string"==typeof e),i.Z.getConfigVal(this.id,e,t)}setConfigVal(e,t){u("string"==typeof e),i.Z.setConfigVal(this.id,e,t)}getData(e,t){return u("string"==typeof e),n=this.id+"-"+e,r=t,(0,s.o9)("data-"+n,r);var n,r}mountJS(e,t=(()=>{}),n=(e=>{})){u("string"==typeof e||e instanceof o.C5),"string"!=typeof e||/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g.test(e)||(e=o.C5.fromString(e)),e!=o.C5.NIL&&""!=e||n("无效地址"),e instanceof o.C5&&(e=e.asString()),(0,_.e)(e,n,(e=>{let n=document.createElement("script");n.text=e,n.onload=t,document.head.appendChild(n)}),"plain")}mountCSS(e,t=(()=>{}),n=(e=>{})){u("string"==typeof e||e instanceof o.C5),"string"!=typeof e||/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g.test(e)||(e=o.C5.fromString(e)),e!=o.C5.NIL&&""!=e||n("无效地址"),e instanceof o.C5&&(e=e.asString()),(0,_.e)(e,n,(e=>{let n=document.createElement("style");n.innerHTML=e,n.onload=t,document.head.appendChild(n)}),"plain")}popInfo(e){u("string"==typeof e),(0,d.s$)(e)}isModRunning(e){return u("string"==typeof e),(0,s.o9)("loader.sortedModuleList").indexOf(e)>=0}crossOriginRequest(e){return(0,s.h0)(e)}aquireCommon(){return g.acquireCommon()}}function b(){return 2}function m(e,t){if((0,s.vo)("module-export-"+e))t((0,s.vo)("module-export-"+e));else{var n=(0,s.vo)("MIDT")[e];(0,s.vo)("MIDT")[e]=n?e=>{n(e),t(e)}:t}return(0,s.o9)("loader.sortedModuleList").indexOf(e)>=0}},152:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C5:()=>GIDURL,WM:()=>addModule,uk:()=>mountCode,wZ:()=>deleteModule,qA:()=>installFromUrl,jw:()=>parseMeta,eT:()=>isDirty,no:()=>markDirty,AS:()=>coreModEval,t3:()=>resortDependency,BR:()=>getTmpDisabled,ul:()=>getDependencyError,m4:()=>isDependencySolved,GK:()=>installFromGID});var _api_STDAPI__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(644),_encrypt__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(585),_native__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(321),_usfunc__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(204),_manager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(313),_static__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(455),_crossorigin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(601),_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(160),_domutils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(23);class GIDURL{constructor(e,t,n,s,r,a=GIDURL.NIL){this.service="~"==e?a.service:e,this.version="~"==t?a.version:t,this.repo="~"==n?a.repo:n,this.file="~"==s?a.file:s,this.provider="~"==r?a.provider:r}static fromString(e,t=GIDURL.NIL){let n=e.split(":");switch(n.length){case 1:return new GIDURL("github","",e,e,"MCBBS-Loader",t);case 2:return new GIDURL("github","",n[1],n[1],n[0],t);case 3:return new GIDURL("github","",n[1],n[2],n[0],t);case 4:return new GIDURL("github",n[3],n[1],n[2],n[0],t);case 5:return new GIDURL(n[0],n[4],n[2],n[3],n[1],t);default:return GIDURL.NIL}}getAsURL(e=".js"){return"github"==this.service?`https://cdn.jsdelivr.net/gh/${this.provider}/${this.repo}${this.version?"@":""}${this.version}/${this.file}${e}`:"gitee"==this.service?`https://gitee.com/${this.provider}/${this.repo}/raw/${this.version}/${this.file}${e}`:""}asString(){return[this.service,this.provider,this.repo,this.file,this.version].join(":")}}GIDURL.NIL=new GIDURL("","","","","",null);const STRING_API_VERSION=String((0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.Y)());let dirty=!1,globalDependencyError=null,globalTmpDisabled=null;function getTmpDisabled(){return null==globalTmpDisabled?globalTmpDisabled=(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.tmpDisabled",[]):globalTmpDisabled}function getDependencyError(){return null==globalDependencyError?globalDependencyError=(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.dependencyError",""):globalDependencyError}function isDependencySolved(){return!getDependencyError().length}function resortDependency(){return resortDependencyInternal((0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.all",{}),"",[])}function resortDependencyInternal(e,t,n){const s={};let r=(e,t)=>(t.beforeHead=s,t.afterHead=s,t.id=e,t),a=new Map,o=[],i=[],l=new Set;for(let[t,n]of Object.entries(e))n&&a.set(t,r(t,JSON.parse((0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("depend-"+t,"{}")))),((0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("meta-"+t,{}).apiVersion||(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.Y)())!=(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_0__.Y)()&&deleteModule(t,(()=>{console.log("[MCBBS Loader] 由于 API 版本不兼容，移除了 ID 为 "+t+" 的脚本。\n如有需要，你可以重新安装。"),(0,_craftmcbbs_craft_ui__WEBPACK_IMPORTED_MODULE_4__.JV)("[MCBBS Loader] 由于 API 版本不兼容，移除了 ID 为 "+t+" 的脚本。\n如有需要，你可以重新安装。")}));let d=(e,t)=>{let n={before:e,after:t,beforeNext:e.beforeHead,afterNext:t.afterHead,beforePrev:s,afterPrev:s};n.beforeNext.beforePrev=n.afterNext.afterPrev=n,t.afterHead=e.beforeHead=n};for(a.forEach(((e,n)=>{let s=e.depend;s instanceof Array&&s.forEach((e=>{a.get(e)||(t+=`${n}依赖${e}，但是后者未安装或未启用。\n`,l.add(n))}));let r=e.before;r instanceof Array&&r.forEach((t=>{let n=a.get(t);n&&d(e,n)}));let o=e.after;o instanceof Array&&o.forEach((t=>{let n=a.get(t);n&&d(n,e)}))})),a.forEach((e=>{e.afterHead===s&&o.push(e)}));o.length;){let e=o.pop();for(i.push(e.id);s!=e.beforeHead;)(_=e.beforeHead).afterNext.afterPrev=_.afterPrev,_.beforeNext.beforePrev=_.beforePrev,_.afterPrev.afterNext=_.afterNext,_.beforePrev.beforeNext=_.beforeNext,_===_.after.afterHead&&(_.after.afterHead=_.afterNext),_===_.before.beforeHead&&(_.before.beforeHead=_.beforeNext),s===_.after.afterHead&&o.push(_.after)}var _;a.forEach((e=>{if(e.beforeHead!=s){l.add(e.id),t+=e.id+"要求在";let n=e.beforeHead;for(;n!=s;)t+=n.after.id+(n.beforeNext===s?"":","),n=n.beforeNext;t+="之前加载，然而此要求无法满足。\n"}}));let p=[];return l.forEach((t=>{p.push(t),delete e[t]})),p.length?(t+="已临时停用"+p.toString()+"\n",resortDependencyInternal(e,t,n.concat(p))):(globalTmpDisabled=n,globalDependencyError=t,(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("loader.sortedModuleList",i),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("loader.dependencyError",t),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("loader.tmpDisabled",n),i)}function verifyId(e){return/^[0-9|a-z|A-Z|\.|_]+$/.test(e)}function addModule(e,t=GIDURL.NIL){let n=e.trim();if(!/\/\*( )*MCBBS[ -]*Module/.test(n))return"这不是一个模块";let s=new Map;parseMeta(n,s);let r,a,o,i=e=>{let t=[];for(let n of e){let e=n.trim();e.length&&t.push(e)}return t},l=s.get("depend")||"",d=s.get("id");if(void 0===d)return"未提供 id 数据值";if(!verifyId(d))return"不合要求的 id";let _=[],p={};for(let e of l.split(",")){let t=e.trim();if(t.length)if(t.includes("->")){let e=/^([0-9|a-z|A-Z|\.|_]+) -> ([0-9|a-z|A-Z|\.|_|:|/|%|@|-]+)$/.exec(t);if(!e||3!=e.length)return"依赖地址编写格式错误";_.push(e[1]),p[e[1]]||(p[e[1]]=[]),p[e[1]].push(e[2])}else _.push(t)}l=_.join(",");let c={id:d,permissions:s.get("permissions")||"",name:s.get("name")||s.get("id"),author:s.get("author")||"Someone",icon:s.get("icon")||_static__WEBPACK_IMPORTED_MODULE_7__.QD,depend:l,before:r=s.get("before")||"",after:a=s.get("after")||"",description:s.get("description")||"No description provided.",updateURL:s.get("updateURL"),apiVersion:o=s.get("apiVersion"),version:s.get("version"),gid:t!=GIDURL.NIL?t.asString():s.get("gid")};if((o||STRING_API_VERSION)!=STRING_API_VERSION)return"不支持的 API 版本："+o;if(regMeta(d,c)){(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("code-"+d,n),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("depend-"+d,JSON.stringify({depend:_,before:i(r.split(",")),after:i(a.split(","))})),markDirty();let e=(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.all",{});for(let n of _)if(null==e[n]){let e=()=>{if(p[n]&&!p[n].pending&&p[n].length){p[n].pending=!0;let s=p[n].shift();/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g.test(s)?installFromUrl(s,(e=>{_manager__WEBPACK_IMPORTED_MODULE_2__.Z.onInstall(e),p[n].pending=!1}),(t=>{_manager__WEBPACK_IMPORTED_MODULE_2__.Z.onFailure(t),p[n].pending=!1,e()})):installFromGID(GIDURL.fromString(s,t),(e=>{_manager__WEBPACK_IMPORTED_MODULE_2__.Z.onInstall(e),p[n].pending=!1}),(t=>{_manager__WEBPACK_IMPORTED_MODULE_2__.Z.onFailure(t),p[n].pending=!1,e()}))}};e()}return s}return"未知错误"}function parseMeta(e,t){let n=(e.match(/(?<=\/\*( )*MCBBS[ -]*Module)[\s\S]*?(?=\*\/)/)||[])[0]||"";n=n.replace(/\\\n/g,"");let s=n.split("\n"),r=/.+?\=.*/,a=/.+?(?=\=)/,o=/(?<=\=).*/;for(let e of s)if(r.test((0,_domutils__WEBPACK_IMPORTED_MODULE_5__.fy)(e))){let n=((0,_domutils__WEBPACK_IMPORTED_MODULE_5__.fy)(e).match(a)||[])[0]||"",s=((0,_domutils__WEBPACK_IMPORTED_MODULE_5__.fy)(e).match(o)||[])[0]||"";t.set((0,_domutils__WEBPACK_IMPORTED_MODULE_5__.fy)(n),(0,_domutils__WEBPACK_IMPORTED_MODULE_5__.fy)(s))}}function regMeta(e,t){(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("meta-"+e,t);let n=(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.all",{});try{return(0,_native__WEBPACK_IMPORTED_MODULE_8__.Hn)(n,e,!0),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("loader.all",n),!0}catch(e){return!1}}function mountCode(e,t){_domutils__WEBPACK_IMPORTED_MODULE_5__.lP.load((()=>{(0,_domutils__WEBPACK_IMPORTED_MODULE_5__.Ys)("body").append(`<script id='code-${e}' onload='this.remove();'>\n        (function(){\n          let MCBBS = Object.freeze(window.forkAPI_${(0,_encrypt__WEBPACK_IMPORTED_MODULE_1__.M)()}("${e}"));\n          ${t}\n        })();\n      <\/script>`)}))}function unmountCode(e){_domutils__WEBPACK_IMPORTED_MODULE_5__.lP.load((()=>{(0,_domutils__WEBPACK_IMPORTED_MODULE_5__.Ys)("#code-"+e).remove()}))}function deleteModule(e,t){(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.LB)("meta-"+e),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.LB)("code-"+e),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.LB)("depend-"+e);let n=(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.o9)("loader.all",{});(0,_native__WEBPACK_IMPORTED_MODULE_8__.Hn)(n,e,void 0),(0,_usfunc__WEBPACK_IMPORTED_MODULE_6__.s4)("loader.all",n),markDirty(),t()}function installFromGID(e,t,n){installFromUrl(e.getAsURL(),t,n,e)}function installFromUrl(e,t=(()=>{}),n=(()=>{}),s=GIDURL.NIL){(0,_crossorigin__WEBPACK_IMPORTED_MODULE_3__.e)(e,(()=>n("安装失败，网络请求失败")),(e=>{let r=addModule(e,s);"string"==typeof r?n(r):t(r),resortDependency()}))}function isDirty(){return dirty}function markDirty(){dirty=!0}function coreModEval(code){return new Promise(((resolve,reject)=>{try{eval(code),resolve(0)}catch(e){reject(e)}}))}},517:(e,t,n)=>{n.d(t,{Z:()=>_});var s=n(204),r=n(827),a=n(160),o=n(23);function i(){(0,o.Ys)("title").html("MCBBS Loader - 配置页面"),(0,o.Ys)("div[class='bm bw0']").html("<span style='font-size:1.5rem'>设置中心</span>&nbsp;&nbsp;<button id='saveconfig' type='button' class='pn pnc'><span>保存</span></button>&nbsp;<span style='color:#df307f'>您的设置应当会自动保存，如果没有，单击此按钮来保存。</span> <br/><div id='config_div'></div>"),(0,o.Ys)("#saveconfig").on("click",l),function(){if((0,o.Ys)(".a").removeClass("a"),(0,o.Ys)("#manage_config").parent().addClass("a"),!r.a.emitCancelable("ConfigPagePreRender")){for(let e of(0,s.vo)("CDT")){let t=`<label style='font-size:14px' for='confval-${e.id}-${e.stgid}'>\n        <span style='font-size:18px;color:#5d2391'>\n          <b>${e.name} </b>\n        </span>\n        (${e.id}:${e.stgid})\n        <br/>\n        <span style='color:#df307f'>${e.desc}</span>\n      </label>`;if("checkbox"==e.type?t=`<span style='font-size:14px'>\n          <span style='font-size:18px;color:#5d2391'>\n            <i id='confval-${e.id}-${e.stgid}' class='chkbox fa fa-check-square'></i>\n            &nbsp;\n            <b>${e.name}</b>\n          </span>\n          (${e.id}:${e.stgid})\n          <br/>\n          <span style='color:#df307f'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${e.desc}</span>\n          <div id='conferr-${e.id}-${e.stgid}'></div></span>\n          <br/>\n        </span>`:"textarea"==e.type?t+=`<br/>\n        <div id='conferr-${e.id}-${e.stgid}'></div>\n        <textarea id='confval-${e.id}-${e.stgid}' style="width: 99%;" class="loadertextconf"></textarea>\n        <br/>`:"button"==e.type?t+=`<br/>\n        <div id='conferr-${e.id}-${e.stgid}'></div>\n        <button style='float: right;' class='pn pnc' id='confval-${e.id}-${e.stgid}'>${e.value}</button>\n        <br/>`:t+=`<div style='height: 17px;'>\n          <input type='text' class='px loadertextconf' id='confval-${e.id}-${e.stgid}'/>\n          <div id='conferr-${e.id}-${e.stgid}'></div>\n          <br/>\n        </div>`,(0,o.Ys)("#config_div").append(t),"checkbox"==e.type){let t=d(e.id,e.stgid,!1)?"chkbox fa fa-check-square":"chkbox fa fa-square";document.getElementById(`confval-${e.id}-${e.stgid}`).className=t}else{let t=d(e.id,e.stgid,"");(0,o.Ys)(`[id='confval-${e.id}-${e.stgid}']`).val(t)}let n=document.getElementById(`confval-${e.id}-${e.stgid}`);"button"==e.type?n.onclick=e.check:(n.oninput=function(){let t=this;(0,o.Ys)(`#conferr-${e.id}-${e.stgid}`).html(e.check("checkbox"!=e.type?t.value:"chkbox fa fa-check-square"==t.className)||""),"textarea"==e.type&&(t.rows=t.value.split("\n").length)},n.oninput())}(0,o.Ys)(".chkbox").on("click",(e=>{var t;e.target.className="chkbox fa fa-"+((null===(t=e.target.className)||void 0===t?void 0:t.includes("check-square"))?"check-":"")+"square",e.target.oninput(),l()})),(0,o.Ys)(".loadertextconf").on("blur",l),r.a.emit("ConfigPagePostRender")}}()}function l(){for(let e of(0,s.vo)("CDT"))(0,s.s4)(`configstore-${e.id}-${e.stgid}`,"checkbox"===e.type?document.getElementById(`confval-${e.id}-${e.stgid}`).classList.contains("fa-check-square"):(0,o.Ys)(`[id='confval-${e.id}-${e.stgid}']`).val());(0,a.JV)("设置保存成功！")}function d(e,t,n){return(0,s.o9)(`configstore-${e}-${t}`,n)}const _={createMenu:function(){(0,s.oE)("getConfig",(function(e,t){return d(e,t,void 0)})),o.lP.load((()=>{(0,o.Ys)("div.appl > div.tbn > ul").prepend("<li><a id='manage_config' style='cursor:pointer;' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=config'>模块选项中心</a></li>"),(0,o.Ys)("#manage_config").on("click",(e=>{e.preventDefault(),i(),history.replaceState(null,null,"https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=config")}))}))},dumpConfigPage:i,createConfigItem:function(e,t,n,r,a,o=(e=>{}),i){let l=(0,s.vo)("CDT"),d={id:e,type:r,stgid:t,name:n,desc:a,check:o,value:i};return l.push(d),(0,s.oE)("CDT",l),d},getConfigVal:d,setConfigVal:function(e,t,n){(0,s.o9)(`configstore-${e}-${t}`,n)}}},601:(e,t,n)=>{n.d(t,{e:()=>r});var s=n(204);function r(e,t=(()=>{}),n=(()=>{}),r="plain"){return(0,s.h0)({method:"GET",url:e,timeout:5e3,ontimeout:()=>t("网络错误：连接超时"),onerror:()=>t("网络错误：没有更多信息"),onload:e=>{if(200!=e.status)t(`错误：${e.status} ${e.statusText}`);else if("json"==r)try{n(JSON.parse(e.responseText))}catch(e){t("JSON解析错误")}else"plain"==r&&n(e.responseText)}})}},23:(e,t,n)=>{n.d(t,{lP:()=>r,Ys:()=>a,fy:()=>o});let s=[];window.addEventListener("load",(()=>{for(let e of s)e();s=null}));class r{constructor(e){this.elements=[];for(let t of e)this.elements.push(t);0==this.elements.length&&console.warn("nothing selected")}static select(e){return new r(document.querySelectorAll(e))}static load(e){return s?s.push(e):setTimeout(e,0),r}each(e){return this.elements.forEach(e),this}remove(){return this.each((e=>e.remove())),this}html(e){var t;return"string"==typeof e?this.each((t=>t.innerHTML=e)):null===(t=this.elements[0])||void 0===t?void 0:t.innerHTML}hasClass(e){var t;return null===(t=this.elements[0])||void 0===t?void 0:t.classList.contains(e)}removeClass(e){return this.each((t=>t.classList.remove(e)))}addClass(e){return this.each((t=>t.classList.add(e)))}css(e,t){var n;return"string"==typeof t?this.each((n=>n.style[e]=t)):null===(n=this.elements[0])||void 0===n?void 0:n.style[e]}val(e){var t;return"string"==typeof e?this.each((t=>t.value=e)):null===(t=this.elements[0])||void 0===t?void 0:t.value}on(e,t){return this.each((n=>n.addEventListener(e,t)))}append(e){return this.each((t=>{if("string"==typeof e){let n=document.createElement("span");for(n.innerHTML=e;n.childNodes[0];)t.append(n.childNodes[0])}else t.append(e)}))}prepend(e){return this.each((t=>{if("string"==typeof e){let n=document.createElement("span");for(n.innerHTML=e;n.childNodes[n.childNodes.length-1];)t.prepend(n.childNodes[n.childNodes.length-1])}else t.prepend(e)}))}after(e){return this.each((t=>{if("string"==typeof e){let n=document.createElement("span");for(n.innerHTML=e;n.childNodes[n.childNodes.length-1];)t.after(n.childNodes[n.childNodes.length-1])}else t.after(e)}))}parent(){let e=[];return this.each((t=>{t.parentElement&&e.push(t.parentElement)})),new r(e)}hide(){return this.css("display","none")}show(){return this.css("display","")}attr(e,t){var n;return"string"==typeof t?this.each((n=>n.attibutes[e]=t)):null===(n=this.elements[0])||void 0===n?void 0:n.attibutes[e]}data(e,t){return this.attr("data"+e,t)}foreach(e){for(let t in this.elements)e(t,this.elements[t]);return this}}function a(e){return r.select(e)}function o(e){return e?e.trim():""}},585:(e,t,n)=>{n.d(t,{M:()=>r});let s=Math.floor(1048576*Math.random()*1048576*1048576).toString(16);function r(){return s}},313:(e,t,n)=>{n.d(t,{Z:()=>b});var s=n(644),r=n(152),a=n(455),o=n(624),i=n(204),l=n(160),d=n(601),_=n(517),p=n(23);const c=new Map;function u(e,t,n){return`<li id='${e.id}'>\n    <div style='display:inline;'>\n      <img src='${e.icon||""}' width='50' height='50' style="vertical-align:middle;float:left;"/>\n      <div style="height: 8em">\n        &nbsp;&nbsp;\n        <span style='font-size:18px;color:${n}'>\n          <strong>${e.name||"Nameless"}</strong>\n        </span>\n        &nbsp;&nbsp;&nbsp;\n        <span id='vtag-${e.id}' style='font-size:12px;color:#150029;'>\n          ${e.id||"loader.nameless"}@${(e.version||"1.0.0")+(t?"&nbsp;<span style='color:#ff0000'><b>[COREMOD]</b></span>":"")}\n          <span style='color:#df307f;${(0,r.BR)().includes(e.id)?"":"display: none;"}'>\n            [依赖关系原因停用]\n          </span>\n        </span>\n        <br/>\n          &nbsp;&nbsp;\n        <span style='font-size:16px;color:#df307f;'>${e.author||"Someone"}</span>\n        <br/>\n        &nbsp;&nbsp;\n        <span style='font-size:12px'>${e.description}</span>\n        <div style="float: right;">\n          <button type='button' class='pn pnc remove' onclick='window.notifyUninstall("${e.id}")'>\n            <strong>删除模块</strong>\n          </button>\n          &nbsp;&nbsp;\n          <button type='button' class='pn pnc onoff' onclick='window.notifyOnOff("${e.id}")'>\n            <strong>${(0,i.o9)("loader.all",{})[e.id]?"禁用":"启用"}</strong>\n          </button>\n          <button type='button' class='pn pnc showsrc' data-mlsource='${e.id}'>\n            <strong>查看源代码</strong>\n          </button>\n        </div>\n      </div>\n    </div>\n  </li>`}function A(e){var t;c.delete(e.get("id")),(0,r.t3)(),f(),(0,p.Ys)("#install_base64").val((0,i.o9)("code-"+e.get("id"),""));let n=(null===(t=e.get("permissions"))||void 0===t?void 0:t.search("loader:core"))>=0;(0,l.OL)({msg:`${e.get("name")}已成功安装在您的 MCBBS 上。\n      <br/>  \n      以下是有关本次安装的详情：\n      <br/>  \n      &nbsp;&nbsp;软件包类型：Mod\n      <br/>\n      &nbsp;&nbsp;软件包 ID：${e.get("id")||"未知"}\n      <br/>\n      &nbsp;作者：${e.get("author")||"未知"}\n      ${n?"<br/>这是一个 CoreMod，它拥有和 MCBBS Loader 一样的权限，在使用时，请注意安全。":""}\n      <br/>\n      &nbsp;&nbsp版本：${e.get("version")}`,title:"安装简报",mode:"right"}),n?(0,l.JV)("您安装了一个 CoreMod，请当心，CoreMod 拥有很高的权限，可能会破坏 MCBBS Loader。如果这不是您安装的，请移除它："+e.get("id")+"。"):(0,l.JV)("成功安装了模块")}function g(e){(0,l.wp)(e,"安装失败",(()=>{}))}function f(){(0,p.Ys)("title").html("MCBBS Loader - 管理页面"),(0,p.Ys)(".a").removeClass("a"),setTimeout((()=>(0,p.Ys)("#loader_manager").parent().addClass("a")),50);let e=(0,r.ul)().replace(/\n/g,"<br>");p.lP.load((()=>{(0,p.Ys)("div[class='bm bw0']").css("user-select","none"),(0,p.Ys)("div[class='bm bw0']").html(`<span style='font-size:1.5rem'>模块管理&nbsp;&nbsp;&nbsp;版本&nbsp;${(0,s.Y)()}\n        <span style="font-size: 0.8em;color:red" >${(0,r.m4)()?"":"<br>依赖关系未解决"}</span>\n        <span style="font-size: 0.8em;color: brown" >${(0,r.eT)()?"<br>当前的设置需要刷新才能生效":""}</span>\n      </span>\n      <br/>\n      <hr/>\n      <span style='${(0,r.m4)()?"display:none;":""}font-size:1rem;'>错误</span>\n      <div id='deperr' style='overflow:auto;color:#ff0000;${(0,r.m4)()?"display:none;":""}'>\n        ${e}\n      </div>\n      <hr style='${(0,r.m4)()?"display:none;":""}'/>`+a.ZP),(0,p.Ys)("#use_mloader").on("click",(()=>(0,p.Ys)("#install_uno").val("MCBBS-Loader:仓库名:模块 ID:main"))),(0,p.Ys)("#use_cv").on("click",(()=>(0,p.Ys)("#install_uno").val("CaveNightingale:CaveNightingale-MCBBS-Modules:模块 ID:master"))),(0,p.Ys)("#use_mext").on("click",(()=>(0,p.Ys)("#install_uno").val("MCBBS-Loader:Integration-Motion:模块 ID:main"))),(0,p.Ys)("#debugmode").on("click",(()=>{"false"==(0,p.Ys)("#debugmode").attr("debug")?((0,p.Ys)("#debugmode").attr("debug","true"),(0,p.Ys)("#install_base64").show(),(0,p.Ys)("#install_uno").hide(),(0,p.Ys)(".srcc").hide()):((0,p.Ys)("#debugmode").attr("debug","false"),(0,p.Ys)("#install_base64").hide(),(0,p.Ys)("#install_uno").show(),(0,p.Ys)(".srcc").show())})),(0,i.oE)("notifyUninstall",(e=>{(0,r.wZ)(e,(()=>{(0,r.t3)(),f(),(0,l.JV)("成功移除了模块")}))})),(0,i.oE)("notifyOnOff",(e=>{let t=(0,i.o9)("loader.all",{});t[e]=!t[e],(0,i.s4)("loader.all",t),(0,r.no)(),(0,r.t3)(),f()})),(0,p.Ys)("#install").on("click",(()=>{var e;let t="true"==(0,p.Ys)("#debugmode").attr("debug")?"#install_base64":"#install_uno",n=(null===(e=(0,p.Ys)(t).val())||void 0===e?void 0:e.toString())||"";try{let e=(0,r.WM)(atob(n));if("string"!=typeof e)A(e);else if(/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g.test(n)){(0,l.JV)("正在获取数据……");try{(0,d.e)(n,g,(e=>{let t=(0,r.WM)(e);"string"!=typeof t?A(t):g(t)}))}catch(e){let t=(0,r.WM)(n);"string"!=typeof t?A(t):(0,r.GK)(r.C5.fromString(n),A,g)}}else{let e=(0,r.WM)(n);"string"!=typeof e?A(e):(0,r.GK)(r.C5.fromString(n),A,g)}}catch(e){if(/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g.test(n)){(0,l.JV)("正在获取数据……");try{(0,d.e)(n,g,(e=>{let t=(0,r.WM)(e);"string"!=typeof t?A(t):g(t)}))}catch(e){let t=(0,r.WM)(n);"string"!=typeof t?A(t):(0,r.GK)(r.C5.fromString(n),A,g)}}else{let e=(0,r.WM)(n);"string"!=typeof e?A(e):(0,r.GK)(r.C5.fromString(n),A,(()=>g("无效 ID 或网络错误，所有安装途径均失败")))}}}));let t=(0,i.o9)("loader.all",{});for(let e of Object.entries(t)){let t=(0,i.o9)("meta-"+e[0],{id:"impossible"}),n=-1!=t.permissions.search("loader:core"),s=u(t,n,n?"#ff0000":"#5d2391");(0,p.Ys)("#all_modules").append(s)}(0,p.Ys)(".showsrc").on("click",(e=>{"false"==(0,p.Ys)("#debugmode").attr("debug")&&((0,p.Ys)("#debugmode").attr("debug","true"),(0,p.Ys)("#install_base64").show(),(0,p.Ys)("#install_uno").hide(),(0,p.Ys)(".srcc").hide());let t=(0,p.Ys)(e.target).data("mlsource")||(0,p.Ys)(e.target).parent().data("mlsource");t&&(0,p.Ys)("#install_base64").val((0,i.o9)("code-"+t,""))})),(0,p.Ys)("#all_modules > li").foreach(((e,t)=>{let n=(0,p.Ys)(t).attr("id")||"loader.impossible",s=(0,i.o9)("meta-"+n);c.get(n)!=s.version&&(c.set(n,s.version),(0,o.P)(s,((e,t,a)=>{if(c.get(n)!=s.version)return;let o;c.delete(n);let i=!1;switch(e){case"latest-api-too-early":o="<span style='color:#f16d2e'><b>[已过期]</b></span>";break;case"latest-no-update-url":case"latest-no-version":o="<span style='color:#636363'><b>[本地]</b></span>";break;case"latest-version-equal-or-earlier":o="<span style='color:#df307f'><b>[最新]</b></span>";break;default:e.startsWith("latest")||(o="<span style='color:#ffaec8'><b>[有可用更新]</b></span>",i=!0)}let d=(0,p.Ys)(`[id='vtag-${s.id}']`).html();d=`${d}${i?"&nbsp;->&nbsp;"+a:""}&nbsp;${o}`,(0,p.Ys)(`[id='vtag-${s.id}']`).html(d),i&&(0,p.Ys)(`[id='vtag-${s.id}']`).parent().append(`<button type='button' style='float:right' class='pn pnc update' data-mlurl='${e}'>\n                <strong>更新模块</strong>\n              </button>`),(0,p.Ys)(".update").on("click",(e=>{let t=(0,p.Ys)(e.target).data("mlurl")||(0,p.Ys)(e.target).parent().data("mlurl");t&&((0,p.Ys)(e.target).data("mlurl")?(0,p.Ys)(e.target).remove():(0,p.Ys)(e.target).parent().remove(),(0,r.no)(),(0,r.qA)(t,(()=>{f();let e=(0,p.Ys)(`[id='vtag-${s.id}']`).html();e=e.replace('<span style="color:#ffaec8"><b>[有可用更新]</b></span>',"<span style='color:#df307f'><b>[已更新]</b></span>"),(0,p.Ys)(`[id='vtag-${s.id}']`).html(e)}),(()=>{let e=(0,p.Ys)(`[id='vtag-${s.id}']`).html();e=e.replace('<span style="color:#ffaec8"><b>[有可用更新]</b></span>',"<span style='color:#ec1c24'><b>[更新失败]</b></span>"),(0,p.Ys)(`[id='vtag-${s.id}']`).html(e)}),r.C5.fromString(s.gid)),(0,l.JV)("已尝试更新，更新效果在更新完成后刷新页面才会显示。"))}))})))}))}))}const b={createBtn:function(){p.lP.load((()=>{(0,p.Ys)("ul.user_info_menu_btn").append("<li><a href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager'>MCBBS 模块管理</a></li>")}))},createMenu:function(){window.location.href.startsWith("https://www.mcbbs.net/home.php?mod=spacecp")&&(p.lP.load((()=>{(0,p.Ys)("div.appl > div.tbn > ul").prepend("<li><a id='loader_manager' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager'style='cursor:pointer;'>模块管理</a></li>"),(0,p.Ys)("#loader_manager").on("click",(e=>{e.preventDefault(),f(),history.replaceState(null,null,"https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=manager")}))})),_.Z.createMenu())},dumpManager:f,onInstall:A,onFailure:g}},455:(e,t,n)=>{n.d(t,{QD:()=>s,ZP:()=>r,k7:()=>a,Uk:()=>o});const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAgAElEQVR4Ae2d76p2WXbVcwX5UCb9x3RVAlVU0bakaVuwvwiiEBISENMiQYh20xqDTTSKJDHglwYxQuInL6AFDXonwZs6Mosa5XhHzznXXPvZ5937nDMCD/PfWmuvPfaav+xz3qfr/NzP+f+sgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBayAFbACVsAKWAErYAWsgBWwAlbAClgBK2AFrIAVsAJWwApYAStgBd6SAt/69KOn+Lyle/a9WgEr8MIUAKjUvrDb8HatgBV4zQoooKr4NWvge7MCVuDmClRgWuVvflvenhWwAq9Jge9957Mn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",r="<span style='font-size:1rem'>已安装的模块</span>\n  <br/>\n  <div style='overflow:auto;'>\n    <ul id='all_modules'></ul>\n  </div>\n  <hr/>\n  <span style='font-size:1rem'>安装新模块</span>\n  <button debug='false' type='button' id='debugmode' class='pn pnc'>\n    <strong>调试模式</strong>\n  </button>\n  <br/>\n  <textarea style=\"display:none;font-family:'Fira Code','Courier New',monospace;background-color:#fbf2db;width:90%;height:150px;overflow:auto;word-break:break-all;resize:vertical;\" placeholder='BASE64 编码，URL 或 JavaScript 代码……' id='install_base64'></textarea>\n  <br/>\n  <input style='width:90%;font-family:\"Fira Code\",\"Courier New\",monospace;' type='text' class='px' id='install_uno' placeholder='使用 ID 或 URL 安装……'/>\n  <br/>\n  <br/>\n  <button class='pn pnc' type='button' id='install'>\n    <strong>安装</strong>\n  </button>\n  <br/>\n  <br/>\n  <br/>\n  <button class='pn pnc srcc' type='button' id='use_mloader'>\n    <strong>快速使用 MCBBS Loader 源（MCBBS-Loader）</strong>\n  </button>\n  <span class='srcc'>\n    MCBBS Loader 电池源，其中的模块是为用户专门设计的，\n    <a id='preview_ml' style='color:#df307f' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#MCBBS-Loader%3AMCBBS-Loader-Batteries%3Amanifest%3Amain' target='_blank'>\n      预览该软件源\n    </a>\n    。\n  </span>\n  <br/>\n  <br/>\n  <button class='pn pnc srcc' type='button' id='use_cv'>\n    <strong>快速使用 洞穴夜莺 源（CaveNightingale）</strong>\n  </button>\n  <span class='srcc'>\n    洞穴夜莺的软件源中包含许多轻松使用模块，\n    <a id='preview_cv' style='color:#df307f'href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#CaveNightingale%3ACaveNightingale-MCBBS-Modules%3Amanifest%3Amaster' target='_blank'>\n      预览该软件源\n    </a>\n    。\n  </span>\n  <br/>\n  <br/>\n  <button class='pn pnc srcc' type='button' id='use_mext'>\n    <strong>快速使用 MExt 整合运动 源（MExt-IM）</strong>\n  </button>\n  <span class='srcc'>\n    MExt 整合运动的软件源中包括了许多适合老用户的 MExt 模块，\n    <a id='preview_mext' style='color:#df307f' href='https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#MCBBS-Loader%3AIntegration-Motion%3Amanifest%3Amain' target='_blank'>\n      预览该软件源\n    </a>。\n  </span>\n  <br/>\n</span>",a="&nbsp;&nbsp;\n  <input class=\"px\" id=\"viewsrc\" type=\"text\" style=\"width: 50%\" placeholder=\"输入新的软件源地址来加载预览\"/>\n  &nbsp;\n  <button type=\"button\" id=\"loadview\" class=\"pn pnc\">\n    <strong>加载预览</strong>\n  </button>\n  <br/>\n  <hr/>\n  <span style='font-size:1rem'>该软件源中的模块</span>\n  <span style='float: right;'>\n    <a href='javascript:;' style='color: #524229;' id='select-all-btn'>反选</a>\n    <a href='javascript:;' style='color: #524229;' id='apply-changes-btn'>应用</a>\n  </span>\n  <br/>\n  <div style='overflow:auto;'>\n    <ul id='all_modules'></ul>\n  </div>\n  <hr/>",o="#_popbg {\n  user-select: none;\n  cursor: default;\n  width: 100%;\n  height: 50px;\n  background-color: #02020275;\n  position: fixed;\n  bottom: -50px;\n  text-align: center;\n  color: #ffffff;\n}\n\ninput.loadertextconf {\n  background-color: white;\n  float: right;\n  width:50%;\n}"},624:(e,t,n)=>{n.d(t,{P:()=>o});var s=n(644),r=n(152),a=n(601);function o(e,t){let n=e.id||"loader.nameless",o=/^((file|https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/g;if(e.updateURL||e.gid){let i=e.updateURL?o.test(e.updateURL)?e.updateURL:r.C5.fromString(e.updateURL,r.C5.fromString(e.gid)).getAsURL():r.C5.fromString(e.gid).getAsURL();(0,a.e)(i,(()=>t("latest-network-err")),(a=>{let o=new Map;if((0,r.jw)(a,o),o.get("id")!=n)t("latest-diff-id");else if("string"==typeof o.get("version")){let n=o.get("version")||"1.0.0",r=e.version||"1.0.0";if(function(e,t){let n=e.split("."),s=t.split(".");if(1==n.length)return parseInt(n[0])>parseInt(s[0]||"0");for(let e=0;e<n.length;e++){if(parseInt(n[e])>parseInt(s[e]||"0"))return!0;if(parseInt(n[e])<parseInt(s[e]||"0"))return!1}return!1}(n,r)){let a=o.get("apiVersion");"string"==typeof a&&a!=String((0,s.Y)())?t("latest-api-too-early"):t(e.updateURL,r,n)}else t("latest-version-equal-or-earlier")}else t("latest-no-version")}))}else t("latest-no-update-url")}},647:(e,t,n)=>{n.d(t,{Z:()=>_});var s=n(152),r=n(313),a=n(204),o=n(160),i=n(455),l=n(601),d=n(23);const _={dumpPreview:function e(t){(0,d.Ys)("title").html("MCBBS Loader - 软件源");let n=s.C5.fromString(t);(0,d.Ys)(".a").removeClass("a");var _=new Set;(0,d.Ys)("div[class='bm bw0']").css("user-select","none").html(`<span style='font-size:1.0rem'>正在预览软件源 ${t}</span>`+i.k7),(0,d.Ys)("#viewsrc").val(t),(0,d.Ys)("#loadview").on("click",(()=>{open("https://www.mcbbs.net/home.php?mod=spacecp&bbsmod=repopreview#"+encodeURIComponent(s.C5.fromString((0,d.Ys)("#viewsrc").val(),n).asString()),"_self"),e(s.C5.fromString((0,d.Ys)("#viewsrc").val(),n).asString())})),function(e,t){(0,l.e)(e.getAsURL(".json"),(e=>(0,d.Ys)("#all_modules").html("无法显示该软件源的预览。<br/>"+e)),(e=>{if("object"!=typeof e)(0,d.Ys)("#all_modules").html("无法显示该软件源的预览。<br/>无效的JSON");else{for(var[t,l]of Object.entries(e)){var p=e[t];p.id=p.id||"impossible",p.name=p.name||"Nameless",p.author=p.author||"Someone",p.description=p.description||"No description provided.",p.permissions=p.permissions||"";var c=-1!=p.permissions.search("loader:core"),u=null!=(0,a.o9)("meta-"+p.id),A=u?"#575757":c?"#ff0000":"#5d2391",g=u?"&nbsp;<span style='color:#575757'><b>[已安装]</b></span>":"",f=`<li id='${p.id}'>\n          <div style='display:inline;'>\n            <img src='${p.icon||i.QD}' width='50' height='50' style="vertical-align:middle;float:left;"/>\n            <div style="height: 8em">\n              &nbsp;&nbsp;\n              <span style='font-size:18px;color:${A}'>\n                <strong>${p.name||"Nameless"}</strong>\n              </span>\n              &nbsp;&nbsp;&nbsp;\n              <span id='vtag-${p.id}' style='font-size:12px;color:#150029;'>\n                ${p.id}@${(p.version||"1.0.0")+(c?"&nbsp;<span style='color:#ff0000'><b>[COREMOD]</b></span>":"")+g}\n              </span>\n              <br/>\n              &nbsp;&nbsp;\n              <span style='font-size:16px;color:#df307f;'>\n                ${p.author||"Someone"}\n              </span>\n              <br/>\n              &nbsp;&nbsp;\n              <span style='font-size:12px'>\n                ${p.description}\n              </span>\n              <input type='checkbox' class='fast-install-chk' style='float: right;' gtar='${p.gid}'/>\n              <button class='pn pnc insremote' style='float:right;' data-gtar='${p.gid}'>\n                <strong>安装/更新</strong>\n              </button>\n            </div>\n          </div>\n        </li>`;(0,d.Ys)("#all_modules").append(f)}(0,d.Ys)(".insremote").on("click",(e=>{var t=null!=e.target.getAttribute("gtar")?e.target:e.target.parentElement;(0,s.GK)(s.C5.fromString(t.getAttribute("gtar"),n),(e=>r.Z.onInstall(e)),(e=>r.Z.onFailure(e)))}));var b=!1;(0,d.Ys)(".fast-install-chk").on("click",(e=>{b?e.preventDefault():e.target.checked?_.add(e.target.getAttribute("gtar")):_.delete(e.target.getAttribute("gtar"))})),(0,d.Ys)("#apply-changes-btn").on("click",(()=>{if(_.size&&!b){b=!0;var e=[],t=[],a=()=>{if((0,s.t3)(),e.length+t.length==_.size){var n=`成功安装了 ${e.length} 个模块:`;for(var a of e)n+="<br>&nbsp;&nbsp;&nbsp;&nbsp;"+a.get("name");if(t.length){for(var[i,l]of(n+=`<br>未能安装 ${t.length} 个模块:`,t))n+=`<br>&nbsp;&nbsp;&nbsp;&nbsp;${i}&nbsp;&nbsp;&nbsp;&nbsp${l}`;(0,o.wp)(n,"安装失败",(()=>r.Z.dumpManager()))}(0,o.s$)(n,"安装成功",(()=>r.Z.dumpManager())),b=!1}};_.forEach((r=>{(0,s.GK)(s.C5.fromString(r,n),(t=>{e.push(t),a()}),(e=>{t.push([r,e]),a()}))})),(0,o.JV)("安装中，请稍后")}})),(0,d.Ys)("#select-all-btn").on("click",(e=>{b||(0,d.Ys)(".fast-install-chk").each(HTMLLinkElement.prototype.click)}))}}),"json")}(n)}}},487:(e,t,n)=>{function s(){(async()=>{let e=new MutationObserver((e=>{for(let n of e)"childList"==(t=n).type&&(t.addedNodes.length>0&&(e=>{switch(e.target.nodeName){case"DIV":void 0!==e.target.id&&(e.target.id.lastIndexOf("threadPreview_")>=0?"SPAN"==e.addedNodes[0].nodeName&&" 请稍候..."==e.addedNodes[0].innerText&&e.target.dispatchEvent(new CustomEvent("ThreadPreviewPreOpen",{bubbles:!0})):e.addedNodes.length>=3&&e.target.id.lastIndexOf("post_")>=0?"A"==e.addedNodes[0].nodeName&&"newpost"==e.addedNodes[0].name&&null!=e.addedNodes[0].parentNode&&e.target.dispatchEvent(new CustomEvent("ThreadFlushFinished",{bubbles:!0})):"append_parent"==e.target.id?"DIV"==e.addedNodes[0].nodeName&&("fwin_rate"==e.addedNodes[0].id?e.addedNodes[0].dispatchEvent(new CustomEvent("RateWindowPreOpen",{bubbles:!0})):"fwin_reply"==e.addedNodes[0].id?e.addedNodes[0].dispatchEvent(new CustomEvent("ReplyWindowPreOpen",{bubbles:!0})):void 0!==e.addedNodes[0].id&&e.addedNodes[0].id.lastIndexOf("fwin_miscreport")>=0&&e.addedNodes[0].dispatchEvent(new CustomEvent("ReportWindowPreOpen",{bubbles:!0}))):""===e.target.id&&null!=e.target.parentElement&&"postlistreply"==e.target.parentElement&&e.target.dispatchEvent(new CustomEvent("NewReplyAppended",{bubbles:!0})));break;case"A":"#text"==e.addedNodes[0].nodeName&&"undefined"==typeof tid&&("正在加载, 请稍后..."==e.addedNodes[0].nodeValue?e.target.dispatchEvent(new CustomEvent("ThreadsListLoadStart",{bubbles:!0})):"下一页 »"==e.addedNodes[0].nodeValue&&e.target.dispatchEvent(new CustomEvent("ThreadsListLoadFinished",{bubbles:!0})));break;case"TD":"fwin_content_rate"==e.target.id&&"DIV"==e.addedNodes[0].nodeName&&"floatlayout_topicadmin"==e.addedNodes[0].id&&e.target.dispatchEvent(new CustomEvent("RateWindowOpened",{bubbles:!0})),"fwin_content_reply"==e.target.id&&"H3"==e.addedNodes[0].nodeName&&"fctrl_reply"==e.addedNodes[0].id&&e.target.dispatchEvent(new CustomEvent("ReplyWindowOpened",{bubbles:!0})),void 0!==e.target.id&&e.target.id.lastIndexOf("fwin_content_miscreport")>=0&&"H3"==e.addedNodes[0].nodeName&&e.addedNodes[0].id.lastIndexOf("fctrl_miscreport")>=0&&e.target.dispatchEvent(new CustomEvent("ReportWindowOpened",{bubbles:!0}))}})(t),t.removedNodes.length>0&&(e=>{switch(e.target.nodeName){case"TBODY":void 0!==e.target.id&&e.target.id.lastIndexOf("normalthread_")>=0&&e.target.dispatchEvent(new CustomEvent("ThreadPreviewClosed",{bubbles:!0}));break;case"DIV":void 0!==e.target.id&&e.target.id.lastIndexOf("threadPreview_")>=0?"SPAN"==e.removedNodes[0].nodeName&&" 请稍候..."==e.removedNodes[0].innerText&&e.target.dispatchEvent(new CustomEvent("ThreadPreviewOpened",{bubbles:!0})):e.removedNodes.length>=3&&e.target.id.lastIndexOf("post_")>=0?"A"==e.removedNodes[0].nodeName&&"newpost"==e.removedNodes[0].name&&null!=e.removedNodes[0].parentNode&&e.target.dispatchEvent(new CustomEvent("ThreadFlushStarted",{bubbles:!0})):"append_parent"==e.target.id&&"DIV"==e.removedNodes[0].nodeName&&("fwin_rate"==e.removedNodes[0].id?e.target.dispatchEvent(new CustomEvent("RateWindowClosed",{bubbles:!0})):"fwin_reply"==e.removedNodes[0].id?e.target.dispatchEvent(new CustomEvent("ReplyWindowClosed",{bubbles:!0})):void 0!==e.removedNodes[0].id&&e.removedNodes[0].id.lastIndexOf("fwin_miscreport")>=0&&e.target.dispatchEvent(new CustomEvent("ReportWindowClosed",{bubbles:!0})))}})(t));var t}));document.addEventListener("DOMContentLoaded",(()=>{unsafeWindow.MExt||e.observe(document.body,{childList:!0,subtree:!0})})),addEventListener("DiscuzAjaxPostPost",(()=>document.dispatchEvent(new CustomEvent("DiscuzAjaxPostFinished",{bubbles:!0})))),addEventListener("DiscuzAjaxPostGet",(()=>document.dispatchEvent(new CustomEvent("DiscuzAjaxGetFinished",{bubbles:!0}))))})()}n.d(t,{Q:()=>s})},827:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>loadEvents,a:()=>LoaderEvent});class LoaderEvent extends Event{constructor(e,t,n=!1){super(e,{bubbles:!0,cancelable:n}),this.name=e;for(let[e,n]of Object.entries(t))this[e]=n}static emit(e,t={}){document.dispatchEvent(new LoaderEvent(e,t))}static emitCancelable(e,t={}){let n=new LoaderEvent(e,t,!0);return document.dispatchEvent(n),n.defaultPrevented}}function loadEvents(){(async()=>{if(void 0!==unsafeWindow.ajaxpost){const __ajaxpost=unsafeWindow.ajaxpost;unsafeWindow.ajaxpost=(formid,showid,waitid,showidclass,submitbtn,recall)=>{LoaderEvent.emitCancelable("DiscuzAjaxPrePost",{formid,showid,waitid,showidclass,submitbtn,recall})||__ajaxpost(formid,showid,waitid,showidclass,submitbtn,(()=>{"function"==typeof recall?recall():eval(recall),LoaderEvent.emit("DiscuzAjaxPostPost",{formid,showid,waitid,showidclass,submitbtn,recall})}))}}if(void 0!==unsafeWindow.ajaxget){const __ajaxget=unsafeWindow.ajaxget;unsafeWindow.ajaxget=(url,showid,waitid,loading,display,recall)=>{LoaderEvent.emitCancelable("DiscuzAjaxPreGet",{url,showid,waitid,loading,display,recall})||__ajaxget(url,showid,waitid,loading,display,(()=>{"function"==typeof recall?recall():eval(recall),LoaderEvent.emit("DiscuzAjaxPostGet",{url,showid,waitid,loading,display,recall})}))}}if(void 0!==unsafeWindow.previewThread){let e=unsafeWindow.previewThread;unsafeWindow.previewThread=(t,n)=>{LoaderEvent.emitCancelable("ToggleThreadPreview",{tid:t,tbody:n})||e(t,n)}}if(void 0!==unsafeWindow.showWindow){let e=unsafeWindow.showWindow;unsafeWindow.showWindow=(t,n,s,r,a)=>{LoaderEvent.emitCancelable("WindowPreLoad",{win:t,url:n,method:s,cache:r,menuv:a})||e(t,n,s,r,a)}}if(void 0!==unsafeWindow.showMenu){let e=unsafeWindow.showMenu;unsafeWindow.showMenu=t=>{LoaderEvent.emitCancelable("MenuPreShow",{detail:t})||(e(t),LoaderEvent.emit("MenuPostShow",{detail:t}))}}if(void 0!==unsafeWindow.hideMenu){let e=unsafeWindow.hideMenu;unsafeWindow.hideMenu=(t,n)=>{LoaderEvent.emitCancelable("MenuPreHide",{attr:t,mtype:n})||(e(t,n),LoaderEvent.emit("MenuPostHide",{attr:t,mtype:n}))}}})()}},160:(e,t,n)=>{n.d(t,{wp:()=>a,JV:()=>i,s$:()=>r,OL:()=>o,NE:()=>l});var s=n(321);function r(e,t,n){(0,s.LP)().showDialog(e,"right",t,n)}function a(e,t,n){(0,s.LP)().showDialog(e,"alert",t,n)}function o(e){showDialog(e.msg,e.mode,e.title,e.onClick,e.cover,e.onCancel,e.confirmText,e.cancelText,e.closeTime,e.locationTime)}function i(e){(0,s.LP)().showError(e)}function l(e,t,n){let s="fwin_"+e,r=$(s),a="";r||(r=document.createElement("div"),r.id=s,r.className="fwinmask",r.style.opacity=0,r.style.pointerEvents="none",document.getElementById("append_parent").appendChild(r),evt=' style="cursor:move" onmousedown="dragMenu($(\''+s+"'), event, 1)\" ondblclick=\"hideWindow('"+e+"')\"",a='<style type="text/css">object{visibility:hidden;}</style>',r.innerHTML=a+'<table cellpadding="0" cellspacing="0" class="fwin"><tr><td class="t_l"></td><td class="t_c"'+evt+'></td><td class="t_r"></td></tr><tr><td class="m_l"'+evt+')">&nbsp;&nbsp;</td><td class="m_c" id="fwin_content_'+e+'"></td><td class="m_r"'+evt+'"></td></tr><tr><td class="b_l"></td><td class="b_c"'+evt+'></td><td class="b_r"></td></tr></table>',t instanceof Text||t instanceof HTMLElement?document.getElementById("fwin_content_"+e).appendChild(t):document.getElementById("fwin_content_"+e).innerHTML=t),function(){hideMenu("fwin_dialog","dialog");let t={mtype:"win",menuid:s,duration:3,pos:"00",zindex:JSMENU.zIndex.win,drag:"",cache:-1};for(e in n)t[e]=n[e];showMenu(t)}(),doane()}},321:(e,t,n)=>{function s(e,t,n){e[t]=n}function r(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1,configurable:!1})}function a(){return unsafeWindow||window}function o(){return{GM_addStyle,GM_deleteValue,GM_download,GM_getResourceText,GM_getResourceURL,GM_getValue,GM_listValues,GM_log,GM_notification,GM_setClipboard,GM_setValue}}n.d(t,{Hn:()=>s,LP:()=>a,VI:()=>r,rj:()=>o})},204:(e,t,n)=>{function s(e){GM_deleteValue(e)}function r(e,t){GM_setValue(e,t)}function a(e,t){return GM_getValue(e,t)}function o(e){GM_log(e)}function i(e,t){unsafeWindow[e]=t}function l(e){return unsafeWindow[e]}function d(e){return GM_xmlhttpRequest(e)}n.d(t,{LB:()=>s,s4:()=>r,o9:()=>a,n$:()=>o,h0:()=>d,oE:()=>i,vo:()=>l})}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var _libs_codeload__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(152),_libs_manager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(313),_libs_configpage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(517),_libs_updator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(624),_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(204),_libs_native__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(321),_api_STDAPI__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(644),_api_NTEVT__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(487),_libs_encrypt__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(585),_libs_viewrepo__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(647),_libs_static__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(455),_api_STDEVT__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(827),_libs_domutils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(23);const isManagerRegex=/bbsmod=manager/i;function fixMuteScreen(){(0,_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.Ys)("#ct").hasClass("wp cl w")&&((0,_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.Ys)("#ct").remove(),(0,_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.Ys)("#wp").html('<div id="pt" class="bm cl">\n    <div class="z">\n    <a href="./" class="nvhm" title="首页">Minecraft(我的世界)中文论坛</a> <em>›</em>\n    <a href="home.php?mod=spacecp">设置</a> <em>›</em>个人资料\n    </div>\n    </div><div id="ct" class="ct2_a wp cl">\n    <div class="mn">\n    <div class="bm bw0" style="user-select: none;"></div>\n    </div>\n    <div class="appl"><div class="tbn">\n    <h2 class="mt bbda">设置</h2>\n    <ul>'))}function main(){(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.oE)("__onExtraScriptLoaded",(e=>e())),_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.lP.load(_api_NTEVT__WEBPACK_IMPORTED_MODULE_10__.Q).load(_api_STDEVT__WEBPACK_IMPORTED_MODULE_7__.w).load((()=>{(0,_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.Ys)("head").append("<link type='text/css' rel='stylesheet'\n          href='https://cdn.staticfile.org/font-awesome/5.15.1/css/all.min.css'/>").append("<link type='text/css' rel='stylesheet'\n          href='https://cdn.staticfile.org/font-awesome/5.15.1/css/v4-shims.min.css'/>").append(`<style id="mcbbs-loader-common-css">${_libs_static__WEBPACK_IMPORTED_MODULE_11__.Uk}</style>`),(0,_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.Ys)("#debuginfo").after(`<br/><span>With MCBBS Loader Version ${(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_4__.Y)()}.<br/>MCBBS Loader 是独立的项目，与我的世界中文论坛没有从属关系</span>`)})),(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.n$)("[MCBBS Loader] 加载器和 API 版本："+(0,_api_STDAPI__WEBPACK_IMPORTED_MODULE_4__.Y)());const RESET_TOKEN=Math.floor(1048576*Math.random()*1048576*1048576*1048576).toString(16);let sureToReset=!1;(0,_libs_native__WEBPACK_IMPORTED_MODULE_12__.VI)((0,_libs_native__WEBPACK_IMPORTED_MODULE_12__.LP)(),"reset_"+RESET_TOKEN,(()=>{if(sureToReset){let e=(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("loader.all",{});for(let t of Object.entries(e))e[t[0]]=!1;(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.s4)("loader.all",e),(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.oE)("loader.all",e),(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.n$)("[MCBBS Loader] 重置完成，下次别安装不可靠模块了~")}else sureToReset=!0,(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.n$)("[MCBBS Loader] 确定要重置吗？这将禁用所有模块！\n如果确定重置，请再调用一次该函数。")})),(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.n$)("[MCBBS Loader] 重置令牌：reset_"+RESET_TOKEN),(0,_libs_native__WEBPACK_IMPORTED_MODULE_12__.VI)((0,_libs_native__WEBPACK_IMPORTED_MODULE_12__.LP)(),"forkAPI_"+(0,_libs_encrypt__WEBPACK_IMPORTED_MODULE_5__.M)(),_api_STDAPI__WEBPACK_IMPORTED_MODULE_4__.u),(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.oE)("CDT",[]);let all=(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("loader.all",{});for(let[id,enabled]of Object.entries(all))if(enabled&&-1!=(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("meta-"+id,{}).permissions.indexOf("loader:earlyload"))try{eval(`(() => {let MCBBS = null; ${(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("code-"+id)}})()`)}catch(e){console.error(e)}_libs_domutils__WEBPACK_IMPORTED_MODULE_8__.lP.load((()=>{let e=(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("loader.sortedModuleList")||(0,_libs_codeload__WEBPACK_IMPORTED_MODULE_0__.t3)();for(let t of e)(0,_libs_codeload__WEBPACK_IMPORTED_MODULE_0__.uk)(t,(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("code-"+t)),(e=>{(0,_libs_updator__WEBPACK_IMPORTED_MODULE_3__.P)((0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.o9)("meta-"+e,""),((t,n,s)=>{t.startsWith("latest")||console.log(`[MCBBS Loader] 有更新可用，模块 ${e} 具有新版本 ${s}，当前安装的版本为 ${n}。`)}))})(t);(0,_libs_codeload__WEBPACK_IMPORTED_MODULE_0__.ul)().length&&(0,_libs_usfunc__WEBPACK_IMPORTED_MODULE_9__.n$)("[MCBBS Loader] 部分模块未加载，请到管理页面修复依赖关系错误"),_libs_manager__WEBPACK_IMPORTED_MODULE_1__.Z.createBtn(),_libs_manager__WEBPACK_IMPORTED_MODULE_1__.Z.createMenu();let t=String(window.location.search);if(/bbsmod=repopreview/i.test(t)){fixMuteScreen();let e=window.location.hash.indexOf("#");_libs_viewrepo__WEBPACK_IMPORTED_MODULE_6__.Z.dumpPreview(-1!=e?decodeURIComponent(window.location.hash.substring(1)):"MCBBS-Loader/examplemod@main")}else/bbsmod=manager/i.test(t)?(fixMuteScreen(),_libs_manager__WEBPACK_IMPORTED_MODULE_1__.Z.dumpManager()):/bbsmod=config/i.test(t)&&(fixMuteScreen(),setTimeout((()=>_libs_configpage__WEBPACK_IMPORTED_MODULE_2__.Z.dumpConfigPage()),0))}))}main()})()})();